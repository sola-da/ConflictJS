/**
 * @preserve Jodit v2.3.22
 * @homepage http://xdsoft.net/jodit/
 * @author Chupurnov Valeriy (<chupurnov@gmail.com>)
 * @license Free for Non-Commercial http://xdsoft.net/jodit/license.html
 */
!function(a,b){"use strict";a.Jodit=b()}(this,function(){"use strict";function a(d,e,f,g){b=a.modules.Dom;var h,i,j=this,k=d?b(d).eq(0):!1;return c+=1,k&&k.length&&(k.data("jodit")?j=k.data("jodit"):j.init(k[0],a.extendOptions(!0,a.defaultOptions,b.isPlainObject(e)?e:{})),"string"==typeof e&&j[e]&&b.isFunction(j[e])&&(h=j[e](f,g),void 0!==h&&(i=h))),i}var b,c=1,d="2.3.22";return a.prototype.getDocument=function(){return this.iframe&&this.iframe.contentWindow?this.iframe.contentWindow.document:this.editor.ownerDocument||this.editor.document},a.prototype.getWindow=function(){var a=this.getDocument();return a.defaultView||a.parentWindow},a.prototype.execCommand=function(b,c,d){var e,f=this;if(f.events.fire("beforeCommand",[b,c,d])===!1)return!1;switch(b){case"applyCSSProperty":f.applyCSSProperty(d,c);break;case"fontSize":f.applyCSSProperty("font-size",d+"px");break;case"formatBlock":d=/h([1-6])/.test(c)?f.browser("msie")?"Heading "+/h([1-6])/.exec(c)[1]:c:"<"+c+">",f.getDocument().execCommand(b.toLowerCase(),!1,d);break;default:f.getDocument().execCommand(b.toLowerCase(),c||!1,d||null),e=f.$editor.find(Object.keys(a.OLDTAG).join(",")),e.length&&(f.selection.save(),e.each(function(){f.node.replace(this,a.OLDTAG[this.tagName],!0)}),this.selection.restore())}this.events.fire("afterCommand",[b,c,d])},a.prototype.applyCSSProperty=function(c,d){var e,f=this.selection.range(0),g=this,h=b('<span style="'+c+": "+d+';">'+a.INVISIBLE_SPACE+"</span>",g.getDocument()).get(0);this.selection.isCollapsed()?(f.insertNode(h),g.selection.focusTo(h)):(g.selection.save(),g.getDocument().execCommand("fontSize",!1,4),g.$editor.find("font").each(function(){e=h.cloneNode(!0),g.node.replace(this,e)}),g.selection.restore())},a.prototype.getJodit=function(){return this},a.prototype.getMode=function(){return this.mode},a.prototype.getRealMode=function(){return this.mode!==a.MODE_SPLIT?this.mode:document.activeElement&&"TEXTAREA"===document.activeElement.tagName?a.MODE_TEXTAREA:a.MODE_WYSIWYG},a.prototype.setMode=function(c){var d={mode:c},e=this,f=["jodit_wysiwyg_mode","jodit_area_mode","jodit_split_mode"],g=e.mode;e.events.fire("beforeSetMode",[d])!==!1&&(e.syncCode(),e.mode=-1!==b.inArray(d.mode,[a.MODE_TEXTAREA,a.MODE_WYSIWYG,a.MODE_SPLIT])?d.mode:a.MODE_WYSIWYG,e.$toolbar.children().each(function(c,d){var f,g=d.control;f=void 0===g||void 0===g.mode?a.MODE_WYSIWYG:g.mode,b(d).toggleClass("disabled",f!==a.MODE_SPLIT&&f!==e.mode)}),e.$wysiwyg.removeClass(f).addClass(f[e.mode-1]),setTimeout(function(){e.getMode()!==a.MODE_WYSIWYG||g!==a.MODE_TEXTAREA&&!e.options.autofocus?e.getMode()!==a.MODE_TEXTAREA||g!==a.MODE_WYSIWYG&&!e.options.autofocus||e.$area[0].focus():(e.$editor.focus(),e.$editor.find("p").length?e.selection.moveToCursorPosition(e.$editor.find("p")[0]):e.selection.moveToCursorPosition(e.editor))},300),e.mode!==a.MODE_TEXTAREA?e.observer&&e.observer.changed():e.observerarea&&e.observerarea.changed(),e.events.fire("afterSetMode"))},a.prototype.toggleMode=function(){var c=this.getMode();-1!==b.inArray(c+1,[a.MODE_TEXTAREA,a.MODE_WYSIWYG,this.options.useSplitMode?a.MODE_SPLIT:9])?c+=1:c=a.MODE_WYSIWYG,this.setMode(c)},a.prototype.val=function(a){return void 0===a?this.getElementValue():(this.events.fire("beforeSetValue",a),a=this.setElementValue(a),this.setEditorValue(a),this.setAreaValue(a),void this.events.fire("afterSetValue"))},a.prototype.syncCode=function(){var b,c=this,d=c.getRealMode();c.events.fire("beforeSyncCode")!==!1&&(b=d===a.MODE_WYSIWYG?c.getEditorValue():c.getAreaValue(),c.setElementValue(b),b=c.val(),d===a.MODE_WYSIWYG?c.setAreaValue(b):c.setEditorValue(b),!c.val()||""===c.$editor.text()&&!c.$editor.find("img,table,hr").length&&c.$editor.find("br").length>1?c.$placeholder.show():(c.$placeholder.hide(),this.observe()),c.events.fire("afterSyncCode"))},a.prototype.checkTargets=function(a){var c=this;c.$toolbar.find("li").removeClass("active"),b.each(c.options.controls,function(d,e){var f,g,h,i,j=d||"empty",k=function(a){var d=0,e=0;b.each(a,function(a,f){b.isFunction(f)?f.apply(c,[i.css(a).toString().toLowerCase(),c])&&(d+=1):i.css(a).toString().toLowerCase()===f&&(d+=1),e+=1}),e===d&&c.$toolbar.find(".toolbar-"+j).addClass("active")};if(e.tags||e.options&&e.options.tags)for(f=e.tags||e.options&&e.options.tags,g=a;g&&!b(g).hasClass("jodit_editor")&&1===g.nodeType;)-1!==b.inArray(g.tagName.toLowerCase(),f)&&c.$toolbar.find(".toolbar-"+j).addClass("active"),g=g.parentNode;if(e.css||e.options&&e.options.css)for(h=e.css||e.options&&e.options.css,i=b(a);i&&i[0]&&1===i[0].nodeType&&!i.hasClass("jodit_editor");)k(h),i=i.parent()})},a.prototype.observe=function(){this.observer.block(1),this.$editor.find("img, table").each(b.proxy(function(c,d){this.browser("msie")&&b(d).attr("unselectable","on"),this.resizer&&("IMG"===d.tagName&&this.options.useImageResizer||"TABLE"===d.tagName&&this.options.useTableResizer)&&this.resizer.bind(b(d)),"TABLE"===d.tagName&&this.options.useTableProcessor&&!b(d).data("table-processor")&&void 0!==a.modules.TableProcessor&&b(d).data("table-processor",new a.modules.TableProcessor(this,d)),"IMG"===d.tagName&&this.options.useImageProcessor&&!b(d).data("image-processor")&&void 0!==a.modules.ImageProcessor&&b(d).data("image-processor",new a.modules.ImageProcessor(this,d))},this)),this.observer.block(0)},a.prototype.getVersion=function(){return d},a.prototype.getEditorValue=function(){var a=b(this.$editor[0].cloneNode(!0));return a.find(".jodit_marker").remove(),a.find(".jodit_focused_image,.jodit_focused_cell").removeClass("jodit_focused_image jodit_focused_cell"),a.html()},a.prototype.setEditorValue=function(a){var b={value:a};this.events.fire("beforeSetEditorValue",[b]),this.$editor.html(b.value),this.events.fire("afterSetEditorValue")},a.prototype.getAreaValue=function(){return this.$area.val()},a.prototype.setAreaValue=function(a){var b={value:a};this.events.fire("beforeSetAreaValue",[b]),this.$area.val(b.value),this.events.fire("afterSetAreaValue")},a.prototype.getElementValue=function(){return this.$element.val()},a.prototype.setElementValue=function(a){var b,c=this.getElementValue(),d={value:a};return this.events.fire("beforeSetElementValue",[d])===!1?"":(b=this.helper.clear(d.value),this.$element.val(b),this.events.fire("afterSetElementValue"),c!==b&&this.events.fire("changeElementValue"),b)},a.prototype.closeToolbarPopap=function(){(this.$toolbar_popap.is(":visible")||this.$toolbar.find(".jodit_dropdownlist").is(":visible"))&&(this.$toolbar.find(".jodit_with_dropdownlist").removeClass("jodit_dropdown_open active jodit_right"),this.$toolbar_popap.hide(),this.$toolbar_popap.appendTo("body"))},a.prototype.buildToolbarButton=function(a,c,d){var e,f=b('<li><a href="javascript:void(0)"></a><div class="jodit_tooltip"></div></li>'),g="string"===b.type(a)?a:a.icon||"empty",h="string"===b.type(a)?a:a.name||"empty",i=f.find("a");return f[0].control=c,f.addClass("toolbar-"+h),i.addClass("icon icon-"+g),void 0!==c&&b.isPlainObject(c)||(c={command:h}),void 0!==d&&i.html(d),c.list&&(e=b('<ul class="jodit_dropdownlist"></ul>'),b.each(c.list,b.proxy(function(a,b){var d=this.buildToolbarButton(a,{exec:c.exec,command:c.command,args:[c.args&&c.args[0]||a,c.args&&c.args[1]||b]},c.template&&c.template.call(this,a,b));e.append(d)},this)),f.append(e),f.addClass("jodit_with_dropdownlist")),c.iconURL&&i.css({"background-image":"url("+c.iconURL+")"}),c.tooltip?f.find(".jodit_tooltip").html(this.i18n(c.tooltip)):f.find(".jodit_tooltip").remove(),f.on("mousedown",b.proxy(function(a){return f.hasClass("disabled")?!1:(a.stopImmediatePropagation(),a.preventDefault(),this.$toolbar.find(".jodit_with_dropdownlist").not(f).removeClass("jodit_dropdown_open active"),this.$toolbar_popap.hide(),e?f.toggleClass("jodit_dropdown_open active"):void 0!==c.exec&&b.isFunction(c.exec)?c.exec.call(this,a,c,f):void 0!==c.popap&&b.isFunction(c.popap)?(f.toggleClass("active"),this.$toolbar_popap.show(),f.append(this.$toolbar_popap),this.$toolbar_popap.empty(),this.$toolbar_popap.html(c.popap.call(this,this.selection.current(),c))):((c.command||h)&&this.execCommand(c.command||h,c.args&&c.args[0]||null,c.args&&c.args[1]||null),this.checkTargets(this.selection.current())),void this.syncCode())},this)),f},a.prototype.buildToolbar=function(){var a=this;a.$toolbar=b('<ul class="toolbar"></ul>'),a.options.toolbar||a.$toolbar.hide(),a.$toolbar_popap=b('<div class="jodit_toolbar_popap non-selected"></div>'),a.$toolbar_dummy=b('<div class="jodit_toolbar_dummy"></div>'),a.$toolbar_popap.on("mousedown",function(a){a.stopImmediatePropagation()}),b(a.getWindow()).add(a.$editor).off("mousedown.editor"+a.id).on("mousedown.editor"+a.id,function(){a.closeToolbarPopap()}),b.each(a.options.buttons,function(c){if(-1===a.options.removeButtons.indexOf(a.options.buttons[c]))if("|"!==a.options.buttons[c]){var d=a.options.buttons[c];b.isPlainObject(d)||void 0===a.options.controls[d]||(d=a.options.controls[d]),a.$toolbar.append(a.buildToolbarButton(a.options.buttons[c],d))}else a.$toolbar.append('<li class="separator"></li>')}),a.$workflow.before(a.$toolbar[0]),a.$workflow.before(a.$toolbar_dummy[0])},a.prototype.init=function(b,d){this.element=b,this.mode=a.MODE_WYSIWYG,this.$element=a.modules.Dom(b),this.options=d,this.id="jodit"+(b.id||"editor"+c),this.build(),this.$element.data("jodit",this),this.setMode(this.options.defaultMode),this.observe(),a.editors[this.id]=this,this.events.fire("afterInit")},a.prototype.loadModules=function(c){var d,e=c||Object.keys(a.modules);if(this.base=new a.modules.Base(this),e.length){for(d=0;d<e.length;d+=1)this[e[d].toLowerCase()]||(this[e[d].toLowerCase()]=new a.modules[e[d]](this));for(d=0;d<e.length;d+=1)"base"!==e[d].toLowerCase()&&(this[e[d].toLowerCase()]=b.extend(this[e[d].toLowerCase()],this.base),b.isFunction(this[e[d].toLowerCase()].init)&&this[e[d].toLowerCase()].init())}return this},a.prototype.destroyModules=function(c){var d,e=c||Object.keys(a.modules);if(e.length)for(d=0;d<e.length;d+=1)b.isFunction(this[e[d].toLowerCase()].destroy)&&this[e[d].toLowerCase()].destroy(),delete this[e[d].toLowerCase()];return this},a.prototype.build=function(){var c,d,e,f=this;f.windows=[window],f.$wysiwyg=b('<div id="'+f.id+'" class="jodit"></div>'),f.options.fullsize&&f.$wysiwyg.addClass("jodit_fullsize"),f.$workflow=b('<div class="jodit_workflow"></div>'),f.options.iframe?f.$iframe=b('<iframe style="display:block;" src="about:blank" frameBorder="0"></iframe>'):f.$editor=b('<div class="jodit_editor" contenteditable="true" spellcheck="true" tabindex="'+f.options.tabIndex+'"/>'),f.$placeholder=b('<span class="jodit_placeholder">'+f.i18n("Type something")+"</span>"),f.element.hasAttribute("placeholder")&&f.$placeholder.html(f.$element.attr("placeholder")),f.$area=b('<textarea class="jodit_area_editor"/>'),f.$area_flow=b('<div class="jodit_area_flow"></div>'),f.$area_flow.append(f.$area),f.$wysiwyg_flow=b('<div class="jodit_wysiwyg_flow"></div>'),f.options.iframe?f.$wysiwyg_flow.append(f.$iframe):f.$wysiwyg_flow.append(f.$editor),f.area=f.$area.get(0),f.$progress_bar=b('<div class="jodit_progress_bar"><div></div></div>'),f.$workflow.append(f.$placeholder).append(f.$wysiwyg_flow).append(f.$area_flow).append(f.$progress_bar),f.$wysiwyg.append(f.$workflow),f.$element.after(f.$wysiwyg),f.options.iframe?(f.iframe=f.$iframe[0],e=f.getDocument(),e.open(),e.write("<!DOCTYPE html>"),e.write('<html class="jodit"><head></head><body class="jodit_editor" style="outline:none" contenteditable="true"></body></html>'),e.close(),f.$editor=b(e.body),f.options.iframeIncludeJoditStyle&&b("link[href*=jodit]").each(function(){var a=b('<link rel="stylesheet" href="'+this.getAttribute("href")+'">',e).get(0);e.head.appendChild(a)}),f.options.iframeCSSLinks&&f.options.iframeCSSLinks.forEach(function(a){var c=b('<link rel="stylesheet" href="'+a+'">',e).get(0);e.head.appendChild(c)}),f.options.iframeStyle&&(d=e.createElement("style"),d.innerHTML=f.options.iframeStyle,f.getDocument().head.appendChild(d)),f.$iframe.css({width:"auto"===f.options.width?"100%":f.options.width,height:f.options.height,minHeight:f.options.minHeight}),f.$editor.css("minHeight",f.options.minHeight),f.windows.push(f.getWindow())):f.$editor.css({width:f.options.width,height:f.options.height,minHeight:f.options.minHeight}),f.editor=f.$editor.get(0),f.buildToolbar(),f.loadModules(),f.val(f.$element.val()),f.$element.hide(),b(window).on("resize.jodit_"+f.id+" scroll.jodit_"+f.id,function(a){var b=window.pageYOffset||document.documentElement.scrollTop;b>f.$wysiwyg.offset().top&&b<f.$wysiwyg.offset().top+f.$wysiwyg.outerHeight()?(f.$toolbar.addClass("jodit_sticky").css({width:f.$wysiwyg.width()+"px"}),f.$toolbar_dummy.css({height:f.$toolbar.height()+"px"})):f.$toolbar.hasClass("jodit_sticky")&&f.$toolbar.removeClass("jodit_sticky")}),f.$editor.on("click",function(a){f.checkTargets(a.target||a.srcElement)}),f.$editor.on("keydown",function(c){var d;switch(c.which){case a.keys.TAB:if(d=f.selection.current(),f.node.hasParent(d,"TD|TH"))return d=f.node.parentNode(d,"TD|TH"),c.shiftKey?f.selection.focusTo(b(d).closest("table").data("table-processor").prevCell(d)):f.selection.focusTo(b(d).closest("table").data("table-processor").nextCell(d,!0)),!1;if(f.node.hasParent(d,"PRE"))return d=f.getDocument().createTextNode("	"),f.selection.insertNode(d),f.selection.insertNode(f.getDocument().createTextNode(a.NBSP)),!1}}),b().add(f.$area).add(f.$editor).on("keydown mousedown mouseup change update drop drag",function(){clearTimeout(c),c=setTimeout(function(){f.syncCode()},3)}),f.options.iframe&&"auto"===f.options.height&&(f.getDocument().documentElement.style.overflowY="hidden",f.events.on("changeElementValue afterInit",function(){f.$iframe.css("height",f.$editor.outerHeight())}));try{f.getDocument().execCommand("enableObjectResizing",!1,!1),f.getDocument().execCommand("enableInlineTableEditing",!1,!1)}catch(g){}},a.prototype.destroy=function(){this.destroyModules(),b(window).off("scroll.jodit_"+this.id),this.$wysiwyg.remove(),delete this.$wysiwyg,this.$element.show()},a.editors={},a.MODE_WYSIWYG=1,a.MODE_TEXTAREA=2,a.MODE_SPLIT=3,a.keys={CTRL:17,TAB:9,ENTER:13,BACKSPACE:8,LEFT:37,TOP:38,RIGHT:39,BOTTOM:40,Z:90,Y:89},a.NBSP=" ",a.NBSP_REG_EXP=/\u00A0/g,a.INVISIBLE_SPACE="\ufeff",a.INVISIBLE_SPACE_REG_EXP=/[\uFEFF\u200b]/g,a.INVISIBLE_SPACE_REG_EXP_START=/^[\uFEFF]+/g,a.INVISIBLE_SPACE_REG_EXP_END=/[\uFEFF]+$/g,a.SPACE_REG_EXP_START=/^[\s\n\t\r\uFEFF\u200b]+/g,a.SPACE_REG_EXP_END=/[\s\n\t\r\uFEFF\u200b]+$/g,a.ENTER_BR="br",a.ENTER_P="p",a.ENTER_DIV="div",a.modules={},a.BLOCKS=["P","DIV","H1","H2","H3","H4","H5","H6","HR","ADDRESS","PRE","FORM","TABLE","LI","OL","UL","TD","TH","CAPTION","BLOCKQUOTE","CENTER","DL","DT","DD","SCRIPT","NOSCRIPT","STYLE"],a.ALONE=["BASE","BR","EMBED","HR","IMG","INPUT","LINK","META"],a.OLDTAG={I:"EM",B:"STRONG",STRIKE:"S"},a.modules={},a.plugins={},a.lang={en:{}},a.modules.Base=function(a){this.parent=a,this.ctrlKey=function(a){if(-1!==navigator.userAgent.indexOf("Mac OS X")){if(a.metaKey&&!a.altKey)return!0}else if(a.ctrlKey&&!a.altKey)return!0;return!1}},a.extendOptions=function(b){var c,d,e,f={},g=!1,h=0,i=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(b)&&(g=b,h+=1),e=function(b){for(d=Object.keys(b),c=0;c<d.length;c+=1)g&&"[object Object]"===Object.prototype.toString.call(b[d[c]])?f[d[c]]=a.extendOptions(!0,null===f[d[c]]?{}:f[d[c]],b[d[c]]):f[d[c]]=b[d[c]]};i>h;)void 0!==arguments[h]&&e(arguments[h]),h+=1;return f},a.prototype.i18n=function(b){var c=void 0!==a.lang[this.options.language]?a.lang[this.options.language]:a.lang.en,d=Array.prototype.slice.call(arguments),e=function(a){return a.replace(/([0-9]{1})\$/gm,function(a,b){return b=parseInt(b,10),void 0!==d[b]?d[b]:""})};return e(void 0!==this.options.i18n[this.options.language]&&this.options.i18n[this.options.language][b]?this.options.i18n[this.options.language][b]:c[b]?c[b]:a.lang.en[b]?a.lang.en[b]:b)},a.defaultOptions={},a}),function(){"use strict";function a(a){var b=!!a&&void 0!==a.length&&a.length,c=g.type(a);return"function"===c||g.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&void 0!==a[b-1]}var b={},c=b.toString,d=b.hasOwnProperty,e=[],f=e.indexOf,g=function(a,b){var c,d=[],e=document,f=/[\s]+/,h=Array.prototype.slice,i=function(a){var b;for(b=0;b<d.length&&a.call(d[b],b,d[b])!==!1;b+=1);return this},j=function(a){var b=d;return g(a).each(function(){-1!==b.indexOf(this)&&b.splice(b.indexOf(this),1)}),this},k=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=c.defaultView||c.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=b.top+g-i,l=b.left+h-j;return{top:Math.round(k),left:Math.round(l)}},l=function(){return d.length?k(d[0]):null},m=function(a){a=a?a.split(f):[];var b,c=function(){var c,d=this,f=a[b].split(".")[0];e.createEvent?(c=e.createEvent("HTMLEvents"),c.initEvent(f,!0,!0)):(c=e.createEventObject(),c.eventType=f),c.eventName=f,e.createEvent?d.dispatchEvent(c):d.fireEvent("on"+c.eventType,c)};for(b=0;b<a.length;b+=1)i(c);return this},n=function(a,b,c){g.isFunction(b)&&(c=b,b=!1);var d,e,h,j,k=this,l=function(){var e=this,f=function(a,b){for(var c=a;c!==b&&c.parentNode&&c.parentNode!==e;)c=c.parentNode;return c===b},i=function(a){var d=e,h=window.performance.now();return a.start=function(){var a=window.performance.now()-h;return h=window.performance.now(),a},a=a||window.event,a.originalEvent=a,void 0===a.which&&void 0!==a.keyCode&&(a.which=a.keyCode),void 0===a.target&&(a.target=a.srcElement),b&&(d=!1,k.find(b).each(function(){return f(a.target,this)?(d=this,!1):void 0})),d&&c&&g.isFunction(c)&&!1===c.call(d,a)?(a.preventDefault(),!1):void 0};e._rt_handlers||(e._rt_handlers={}),e._rt_namespaces||(e._rt_namespaces={}),e._rt_handlers[a[d]]||(e._rt_handlers[a[d]]=[]),e._rt_handlers[a[d]].push(i),e._rt_namespaces[j]||(e._rt_namespaces[j]=[]),e._rt_namespaces[j].push({event:h,callback:i}),e.addEventListener(h,i)};for(a=a?a.split(f):[],d=0;d<a.length;d+=1)e=a[d].split("."),h=e[0],j=e[1]?e[1]:"window",i(l);return this},o=function(a,b){a=a?a.split(f):[];var c,d,e=this,g=function(){var f=this;b?f.removeEventListener(a[c],b,!1):f._rt_handlers&&f._rt_handlers[a[c]]?(f._rt_handlers[a[c]].forEach(function(b){f.removeEventListener(a[c],b,!1)}),delete f._rt_handlers[a[c]]):/^\./.test(a[c])&&f._rt_namespaces&&(d=a[c].substr(1),f._rt_namespaces[d]&&(f._rt_namespaces[d].forEach(function(a){e.off(a.event,a.callback)}),delete f._rt_namespaces[d]))};for(c=0;c<a.length;c+=1)i(g);return this},p=function(a,b,c){g.isFunction(b)&&(c=b,b=!1);return n(a,b,c),this},q=function(a,b){var c,e;return g.isPlainObject(a)||void 0!==b?(e=function(a,b,c){void 0!==c&&null!==c&&/^left|top|bottom|right|width|min|max|height|margin|padding/i.test(b)&&/^[0-9]+$/.test(c.toString())&&(c+="px"),a.style[b]=c},i(function(){if(g.isPlainObject(a)){var c,d=Object.keys(a);for(c=0;c<d.length;c+=1)e(this,g.camelCase(d[c]),a[d[c]])}else e(this,g.camelCase(a),b)}),this):(d.length&&(c=window.getComputedStyle(d[0]).getPropertyValue(g.fromCamelCase(a))),c)},r=function(a){var b,c=!1;if(":visible"===a){for(b=0;b<d.length;b+=1)if(d[b].offsetWidth||d[b].offsetHeight)return!0;return!1}return g(a,d[0].parentNode).each(function(){var a=this;return g.each(d,function(b,d){return a===d?(c=!0,!1):void 0}),c?!1:void 0}),c},s=function(){return d.length&&void 0!==d[0].offsetHeight?parseInt(d[0].offsetHeight,10):0},t=function(a){return void 0===a?d.length?parseInt(window.getComputedStyle(d[0]).getPropertyValue("width"),10):0:(q("width",a),this)},u=function(a){return void 0===a?d.length?parseInt(window.getComputedStyle(d[0]).getPropertyValue("height"),10):0:(q("height",a),this)},v=function(){return d.length&&void 0!==d[0].offsetWidth?parseInt(d[0].offsetWidth,10):0},w=function(){return d.length?g(d[0].nextSibling):g()},x=function(){return d.length?g(d[0].prevSibling):g()},y=function(a){if(d.length){for(var b=d[0].parentNode;b&&"string"==typeof a&&b.tagName.toLowerCase()!==a.toLowerCase();)b=b.parentNode;return g(b)}return g()},z=g.type,A=function(a,b,c){i(function(){var d,e=a&&"string"===z(a)?a.split(f):a||[],g=this.hasAttribute&&this.hasAttribute("class")?this.getAttribute("class").split(f):[],h=g.join(" ");for(d=0;d<e.length;d+=1)if(b(g,e[d])===!1)return!1;!c&&h!==g.join(" ")&&this.setAttribute&&this.setAttribute("class",g.join(" "))})},B=function(a){var b=!1;return A(a,function(a,c){-1!==a.indexOf(c)&&(b=!0)},!0),b},C=function(a){return A(a,function(a,b){-1===a.indexOf(b)&&a.push(b)}),this},D=function(a){return A(a,function(a,b){-1!==a.indexOf(b)&&a.splice(a.indexOf(b),1)}),this},E=function(a,b){return void 0===b?A(a,function(a,b){-1!==a.indexOf(b)?a.splice(a.indexOf(b),1):a.push(b)}):b?C(a):D(a),this},F=function(a){return void 0!==a?(i(function(){this.innerText=a.toString()}),this):d[0]?d[0].innerText:""},G=function(a){return void 0!==a?("string"!==z(a)?this.empty().append(a):i(function(){this.innerHTML=a}),this):d[0]?d[0].innerHTML:""},H=function(){return this.html("")},I=function(a){if(d.length){if(void 0===a)return d[0].value;i(function(){void 0!==this.value&&(this.value=a)})}return void 0===a?"":this},J=function(a){var b,c=[];return i(function(){for(b=this.firstChild;b;)b&&(a||b.nodeType!==Node.TEXT_NODE)&&c.push(b),b=b.nextSibling}),c},K=function(){return g(J(!0))},L=function(){return g(J())},M=function(a){var b=[];return i(function(){b=b.concat(h.call(g(a,this)))}),g(b)},N=function(a,b){var c,d,f=[];if(Array.isArray(a))return g.each(a,function(b){f=f.concat(N(a[b]))}),f;if((void 0!==a.jqcut&&a.jqcut===g.fn.jqcut||void 0!==a.jquery)&&a.length)return h.call(a);if(/^body$/i.test(a))return[e.body];if(/^#/.test(g.trim(a))||/^(script|link|img|div|h[1-6]|p|table|tr|tbody|thead|tfoot|td|th|span|strong|ul|li|ol|a|body|label|option|select|input|button|textarea|i|b|strike|font)(\s|\t|\n|$|>|:|\.|\#|\[)/i.test(g.trim(a))||/^\./.test(g.trim(a))||/^\>/.test(g.trim(a))){/^\>/.test(g.trim(a))&&(a=":scope"+a);try{return b.querySelectorAll?h.call(b.querySelectorAll(a)||[]):[]}catch(i){return[]}}if("string"===z(a)){for(c=(b&&void 0!==b.createElement?b:e).createElement("div"),c.innerHTML=a,d=c.firstChild;d;)f.push(d),d=d.nextSibling;return f}return a.addEventListener?[a]:void 0},O=function(a,b){var c=this;return i(function(){return void 0===b?(c=this[a],!1):void(this[a]=b)}),c},P=function(a,b){var c=this;return i(function(){return void 0===b?(c=this.getAttribute(a),!1):void this.setAttribute(a,b)}),c},Q=function(a){return i(function(){this.removeAttribute(a)}),this},R=function(){return i(function(){this.style.display="none"}),this},S=function(){return i(function(){this.style.display="block"}),this},T=function(){return i(function(){this.parentNode&&this.parentNode.removeChild&&this.parentNode.removeChild(this)})},U=function(a){return d&&d.length&&g(a).each(function(){d[0].parentNode.insertBefore(this,d[0])}),this},V=function(a){if(d&&d.length){var b=d[0].parentNode;g(a).each(function(){b.lastchild===d[0]?b.appendChild(this):d[0].parentNode.insertBefore(this,d[0].nextSibling)})}return this},W=function(){return d.length&&d[0]&&void 0!==d[0].focus&&e.hasFocus&&e.hasFocus()&&d[0].focus(),this},X=function(a){return g(a).append(this),this},Y=function(){return g(d[0].parentNode)},Z=function(){var a,b=0;if(d&&d.length)for(a=d[0];a.previousSibling;)a=a.previousSibling,3===a.nodeType&&/^\s*$/.test(a.data)||(b+=1);return b},$=function(a){return d=d.concat(h.call(g(a))),this.length=d.length,this},_="_store_dataset",aa=function(a,b){if(a=g.camelCase(a),d.length){if(void 0===b){if(void 0!==d[0].dataset){if(void 0!==d[0].dataset[a])return d[0].dataset[a]}else if(d[0].hasAttribute("data-"+a))return d[0].getAttribute("data-"+a);if(void 0!==d[0][_]&&void 0!==d[0][_][a])return d[0][_][a];return}return i(function(){void 0===this[_]&&(this[_]={}),this[_][a]=b}),this}return void 0===b?void 0:this},ba=function(a){return aa(a,null),this},ca=function(a){return i(function(){var b=this;g(a).each(function(){b.appendChild&&b.appendChild(this)})}),this};if(a)if("function"==typeof a)window.addEventListener("load",a,!1);else for(a="string"!==z(a)||/^</.test(a)?[a]:a?a.split(","):[],c=0;c<a.length;c+=1)void 0!==a[c]&&(d=d.concat(N(a[c],b||e.body)));return g.extend(!0,{},d,{prop:O,closest:y,next:w,prev:x,width:t,height:u,outerWidth:v,outerHeight:s,offset:l,focus:W,is:r,parent:Y,not:j,add:$,index:Z,val:I,data:aa,removeData:ba,attr:P,removeAttr:Q,hide:R,show:S,fire:m,trigger:m,html:G,empty:H,text:F,contents:K,children:L,find:M,remove:T,detach:T,after:V,before:U,append:ca,appendTo:X,type:z,css:q,each:i,on:n,one:p,off:o,hasClass:B,addClass:C,removeClass:D,toggleClass:E,length:d.length,eq:function(a){return d[a]?g(d[a]):g()},get:function(a){return d[a]}},g.fn)};g.fn={jqcut:"1.9.1"},g.camelCase=function(a){return a.replace(/-(.{1})/g,function(a,b){return b.toUpperCase()})},g.fromCamelCase=function(a){return a.replace(/([A-Z]+)/g,function(a,b){return"-"+b.toLowerCase()})},g.type=function(a){return null===a?a.toString():"object"==typeof a||"function"==typeof a?b[c.call(a)]||"object":typeof a},g.isWindow=function(a){return null!==a&&a===a.window},g.isArray=Array.isArray,g.isPlainObject=function(a){return"object"!==g.type(a)||a.nodeType||g.isWindow(a)?!1:a.constructor&&!d.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},g.each=function(b,c){var d,e,f;if(a(b))for(d=b.length,f=0;d>f&&c.call(b[f],f,b[f])!==!1;f+=1);else for(e=Object.keys(b),f=0;f<e.length&&c.call(b[e[f]],e[f],b[e[f]])!==!1;f+=1);return b},g.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Symbol"],function(a,c){b["[object "+c+"]"]=c.toLowerCase()}),g.isFunction=function(a){return a&&"function"==typeof a},g.inArray=function(a,b,c){return null===b?-1:f.call(b,a,c)},g.trim=function(a,b){void 0===b&&(b="\\s");var c=new RegExp("^"+b,"g"),d=new RegExp(b+"$","g");return a.toString().replace(c,"").replace(d,"")},g.proxy=function(a,b){return function(){return a.apply(b,arguments)}},g.eventLog=!1,g.extend=g.fn.extend=function(a){var b,c,d,e,f,h,i,j,k=a||{},l=1,m=arguments.length,n=!1;for("boolean"==typeof k&&(n=k,k=arguments[l]||{},l+=1),"object"==typeof k||g.isFunction(k)||(k={}),l===m&&(k=this,l+=1),l;m>l;l+=1)if(b=arguments[l],null!==b&&void 0!==b)for(j=Object.keys(b),i=0;i<j.length;i+=1)c=j[i],d=k[c],e=b[c],k!==e&&(n&&e&&(g.isPlainObject(e)||g.isArray(e))?(f=g.isArray(e),f?(f=!1,h=d&&g.isArray(d)?d:[]):h=d&&g.isPlainObject(d)?d:{},k[c]=g.extend(n,h,e)):void 0!==e&&(k[c]=e));return k},g.defaultAjaxOptions={dataType:"json",type:"GET",url:"",data:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",error:function(a){console.log(a)},success:function(a){console.log(a)},xhr:function(){return new XMLHttpRequest}},g.ajax=function(a){a=g.extend(!0,{},g.defaultAjaxOptions,a);var b=a.xhr(),c={status:!1,response:!1,is_done:!1,is_error:!1,__done:!1,__error:!1,__fire_done:function(a){c.is_done&&c.__done&&c.__done.call(b,c.response,c.status)},__fire_error:function(a){c.is_error&&c.__error&&(b.getMessage=function(){return c.status},c.__error.call(b,c.response,c.status))},done:function(a){c.__done=a,c.__fire_done()},error:function(a){c.__error=a,c.__fire_error()},abort:function(){b.abort()}},d=function(a,b){if("string"==typeof a||a instanceof window.FormData)return a;var c,e,f,g=[];for(c in a)a.hasOwnProperty(c)&&(e=b?b+"["+c+"]":c,f=a[c],g.push("object"==typeof f?d(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f)));return g.join("&")};return b.onreadystatechange=function(d){if(b.readyState===XMLHttpRequest.DONE){var e=d.target.responseText;if(200===b.status){switch(a.dataType){case"json":try{e=JSON.parse(e)}catch(f){return b.getMessage=function(){return f.message},void a.error(b,b.status)}}a.success(e),c.response=e,c.status=b.status,c.is_done=!0,c.__fire_done()}else a.error(b,b.status),c.response=e,c.status=b.status,c.is_error=!0,c.__fire_error()}},b.open(a.type,a.url,!0),b.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),a.contentType&&b.setRequestHeader("Content-type",a.contentType),a.data&&b.send(d(a.data)),c},void 0!==window.Jodit?Jodit.modules.Dom=g:window.$=g}(),function(a){"use strict";Jodit.defaultOptions={iframe:!1,iframeStyle:'html{margin: 0px;}body{padding:10px;background:transparent;color:#000;position:relative;z-index: 2;user-select:auto;margin:0px;overflow:hidden;}body:after{content:"";clear:both;display:block}',iframeCSSLinks:[],iframeIncludeJoditStyle:!0,width:"auto",height:"auto",minHeight:100,language:"en",i18n:Jodit.lang,tabIndex:-1,autofocus:!1,fullsize:!1,toolbar:!0,autosave:!1,autosaveCallback:!1,interval:60,enter:Jodit.ENTER_P,defaultMode:Jodit.MODE_WYSIWYG,useSplitMode:!0,colors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8"],colorPickerDefaultTab:"background",imageDefaultWidth:300,removeButtons:[],buttons:["source","|","bold","italic","|","ul","ol","|","font","fontsize","brush","paragraph","|","image","table","link","|","left","center","right","justify","|","undo","redo","|","hr","eraser","fullsize","about"],controls:{about:{exec:function(a,b,c){var d=new Jodit.modules.Dialog(this);d.setTitle(this.i18n("About Jodit")),d.setContent('<div class="jodit_about">                            <div>'+this.i18n("Jodit Editor")+" v."+this.getVersion()+" "+this.i18n("Free Non-commercial Version")+'</div>                            <div><a href="http://xdsoft.net/jodit/" target="_blank">http://xdsoft.net/jodit/</a></div>                            <div><a href="http://xdsoft.net/jodit/doc/" target="_blank">'+this.i18n("Jodit User's Guide")+"</a> "+this.i18n("contains detailed help for using")+"</div>                            <div>"+this.i18n("For information about the license, please go to our website:")+'</div>                            <div><a href="http://xdsoft.net/jodit/license.html" target="_blank">http://xdsoft.net/jodit/license.html</a></div>                            <div><a href="http://xdsoft.net/jodit/#download" target="_blank">'+this.i18n("Buy full version")+"</a></div>                            <div>"+this.i18n("Copyright © XDSoft.net - Chupurnov Valeriy. All rights reserved.")+"</div>                        </div>"),d.open()},tooltip:"About Jodit",mode:Jodit.MODE_TEXTAREA+Jodit.MODE_WYSIWYG},fullsize:{exec:function(a,b,c){this.$wysiwyg.toggleClass("jodit_fullsize"),this.events.fire("afterResize")},tooltip:"Open editor in fullsize",mode:Jodit.MODE_TEXTAREA+Jodit.MODE_WYSIWYG},eraser:{exec:function(){this.execCommand("removeFormat",!1,!1)},tooltip:"Clear Formatting"},brush:{css:{backgroundColor:function(a,b){return-1!==this.options.colors.indexOf(this.helper.colorToHex(a))?!0:void 0}},popap:function(b){var c,d,e,f,g=this.selection.get(),h="",i="";return g&&g.anchorNode&&a(g.anchorNode.parentNode).attr("style")&&-1!==a(g.anchorNode.parentNode).attr("style").indexOf("background")&&a(g.anchorNode.parentNode).css("background-color")&&(c=g.anchorNode.parentNode,i=a(c).css("background-color")),g&&g.anchorNode&&a(g.anchorNode.parentNode).attr("style")&&-1!==a(g.anchorNode.parentNode).attr("style").indexOf("color")&&a(g.anchorNode.parentNode).css("color")&&(c=g.anchorNode.parentNode,h=a(c).css("color")),d=this.form.buildColorPicker(a.proxy(function(b){c?a(c).css("background-color",b):this.applyCSSProperty("background-color",b),this.closeToolbarPopap()},this),i),e=this.form.buildColorPicker(a.proxy(function(b){c?a(c).css("color",b):this.applyCSSProperty("color",b),this.closeToolbarPopap()},this),h),f="background"===this.options.colorPickerDefaultTab?{Background:d,Text:e}:{Text:e,Background:d},this.form.buildTabs(f)},tooltip:"Fill color or set the text color"},redo:{mode:Jodit.MODE_SPLIT,exec:function(){this.getRealMode()!==Jodit.MODE_TEXTAREA?this.observer.redo():this.observerarea.redo();
},tooltip:"Redo"},undo:{mode:Jodit.MODE_SPLIT,exec:function(){this.getRealMode()!==Jodit.MODE_TEXTAREA?this.observer.undo():this.observerarea.undo()},tooltip:"Undo"},bold:{tags:["b","strong"],css:{fontWeight:"bold"},tooltip:"Bold",hotkey:{ctrl:1,key:66}},italic:{tags:["i","em"],css:{fontStyle:"italic"},tooltip:"Italic",hotkey:{ctrl:1,key:73}},ul:{command:"insertUnorderedList",controlName:"ul",exec:function(b,c){var d,e,f=this.selection,g=f.current();this.node.hasParent(g,"p")?(e=this.node.parentNode(g,"p"),d=0===this.helper.trim(e.innerText).length?a("<"+c.controlName+">\n<li>"+Jodit.INVISIBLE_SPACE+"</li>\n</"+c.controlName+">\n").get(0):a("<"+c.controlName+">\n<li> "+e.innerHTML+" </li>\n</"+c.controlName+">\n").get(0),a(e).replaceWith(d),f.moveToCaretPosition(a(d).find("li").get(0))):this.execCommand(c.command)},tags:["ul"],tooltip:"Insert Unordered List"},ol:{command:"insertOrderedList",controlName:"ul",exec:function(a,b){this.options.controls.ul.exec.call(this,a,b)},tags:["ol"],tooltip:"Insert Ordered List"},center:{command:"justifyCenter",tags:["center"],css:{textAlign:"center"},tooltip:"Justify Center"},justify:{command:"justifyFull",css:{textAlign:"justify"},tooltip:"Justify Full"},left:{command:"justifyLeft",css:{textAlign:"left"},tooltip:"Justify Left"},right:{command:"justifyRight",css:{textAlign:"right"},tooltip:"Justify Right"},hr:{command:"insertHorizontalRule",tags:["hr"],tooltip:"Insert Horizontal Line"},image:{popap:function(b){var c=this;return c.form.imageSelector({url:function(b,d){var e=a(c.form.getCurrentImage()||a("<img/>",c.getDocument()).get(0));e.attr("src",b),e.attr("alt",d),c.form.getCurrentImage()||c.selection.insertImage(e.get(0)),c.closeToolbarPopap(),c.syncCode()},upload:function(a){var b;if(a.files&&a.files.length)for(b=0;b<a.files.length;b+=1)c.selection.insertImage(a.baseurl+a.files[b]);c.closeToolbarPopap(),c.syncCode()},filebrowser:function(a){if(a.files&&a.files.length){var b;for(b=0;b<a.files.length;b+=1)c.selection.insertImage(a.baseurl+a.files[b]);c.closeToolbarPopap(),c.syncCode()}}},b)},tags:["img"],tooltip:"Insert Image"},link:{popap:function(b){var c,d=this.selection.get(),e=a('<div><input required name="url" placeholder="http://" type="text"/><input name="text" placeholder="'+this.i18n("Anchor")+'" type="text"/><label><input name="target" type="checkbox"/> '+this.i18n("Open in new tab")+'</label><label><input name="nofollow" type="checkbox"/> '+this.i18n("No follow")+'</label><button type="button">'+this.i18n("Insert")+"</button></div>");return d&&d.anchorNode&&"A"===d.anchorNode.parentNode.tagName?(e.find("input[name=url]").val(d.anchorNode.parentNode.href),e.find("input[name=text]").val(d.anchorNode.parentNode.text),e.find("input[name=target]").get(0).checked="_blank"===d.anchorNode.parentNode.target,e.find("input[name=nofollow]").get(0).checked="nofollow"===d.anchorNode.parentNode.rel,""===d.toString()&&(c=d.anchorNode.parentNode)):e.find("input[name=text]").val(d.toString()),this.selection.save(),e.find("button").on("click",a.proxy(function(){this.selection.restore();var b=a(c||"<a></a>");return b.attr("href",e.find("input[name=url]").val()),b.text(e.find("input[name=text]").val()),e.find("input[name=target]").get(0).checked?b.attr("target","_blank"):b.removeAttr("target"),e.find("input[name=nofollow]").get(0).checked?b.attr("rel","nofollow"):b.removeAttr("rel"),c||this.execCommand("insertHTML",!1,b.prop("outerHTML")),this.closeToolbarPopap(),this.syncCode(),!1},this)),e},tags:["a"],tooltip:"Insert link"},fontsize:{command:"fontSize",list:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],template:function(a,b){return b},tooltip:"Font size"},font:{command:"applyCSSProperty",args:[null,"font-family"],list:{"Helvetica,sans-serif":"Helvetica","Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","'Times New Roman',Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},template:function(a,b){return'<span style="font-family: '+a+'"> '+b+" </span>"},tooltip:"Font family"},paragraph:{command:"formatBlock",list:{p:"Normal",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",blockquote:"Quote",pre:"Code"},template:function(a,b){return"<"+a+' class="jodit_list_element"><span>'+this.i18n(b)+"</span></"+a+"></li>"},tooltip:"Insert format block"},table:{cols:10,popap:function(b,c){function d(b){var c=(b+1)*m;if(p.length>c){for(e=c;e<p.length;e+=1)j[0].removeChild(p[e]),delete p[e];p=p.splice(0,c)}for(e=0;c>e;e+=1)p[e]||(h=i.getDocument().createElement("div"),h.index=e,p.push(h));j.append(p),j.css("width",a(p[0]).outerWidth()*m+"px")}var e,f,g,h,i=this,j=a('<form class="jodit_form_inserter"><label><span>1</span> &times; <span>1</span></label></form>'),k=1,l=1,m=c.cols,n=j.find("span").eq(0),o=j.find("span").eq(1),p=[];return d(1),p[0].className="hovered",j.on("mousemove","div",function q(a){if(g=isNaN(a)?this.index:a,k=Math.ceil((g+1)/m),l=g%m+1,d(k),l===m||m-1>l&&m>10)return m=l===m?m+1:m-1,q(l+(k-1)*m-1);for(e=0;e<p.length;e+=1)l>=e%m+1&&k>=Math.ceil((e+1)/m)?p[e].className="hovered":p[e].className="";o.text(l),n.text(k)}),j.on("mousedown","div",function(a){a.preventDefault(),g=this.index,k=Math.ceil((g+1)/m),l=g%m+1;var b,c,d,h,j=i.getDocument().createElement("table"),n=(100/l).toFixed(7);for(e=1;k>=e;e+=1){for(c=i.getDocument().createElement("tr"),f=1;l>=f;f+=1)d=i.getDocument().createElement("td"),d.style.width=n+"%",b||(b=d),h=i.getDocument().createElement("br"),d.appendChild(h),c.appendChild(i.getDocument().createTextNode("\n")),c.appendChild(i.getDocument().createTextNode("	")),c.appendChild(d);j.appendChild(i.getDocument().createTextNode("\n")),j.appendChild(c)}i.selection.insertNode(i.getDocument().createTextNode("\n")),i.selection.insertNode(j),i.selection.moveToCursorPosition(b),i.closeToolbarPopap(),i.syncCode()}),j},tags:["table"],tooltip:"Insert table"},source:{mode:Jodit.MODE_SPLIT,exec:function(){this.toggleMode()},tooltip:"Change mode"}}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Selection=function(b){var c={},d=b.getDocument(),e=b.getWindow(),f=b.$editor,g=function(){return e.getSelection?e.getSelection():d.getSelection?d.getSelection():d.selection.createRange()},h=function(a){var b,c=g(),e=[];if(c&&c.getRangeAt&&c.rangeCount)for(b=0;b<c.rangeCount;b+=1)e.push(c.getRangeAt(b));else e=d.createRange?[d.createRange()]:[];return void 0!==a?e[a]:e},i=function(a){var d=c.range(0),e=d.startContainer,g=d.endContainer;if(e===g)return a.call(e,e),void b.node.each(e,a);for(;e&&e!==g;)e=b.node.findSibling(e,f[0],"firstChild","nextSibling",!1),e&&a.call(e,e);for(e=d.startContainer;e&&e!==d.commonAncestorContainer;)a.call(e,e),e=e.parentNode},j=function(){var a=g();a.removeAllRanges&&a.removeAllRanges()||a.empty&&a.empty()||a.clear&&a.clear()},k=function(a,c){function e(a){for(;a;){if(a.nodeType===Node.ELEMENT_NODE||a.nodeType===Node.TEXT_NODE&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}}var f,h,i,k;if(a){if(/^(LI|DT|DD)$/.test(a.nodeName)&&(k=e(a.firstChild),k&&/^(UL|OL|DL)$/.test(k.nodeName)&&a.insertBefore(d.createTextNode(" "),a.firstChild)),f=d.createRange(),b.browser("msie")||a.normalize(),a.hasChildNodes()){for(h=a;h;){if(h.nodeType===h.TEXT_NODE){f.setStart(h,c?h.nodeValue.length:0),f.setEnd(h,c?h.nodeValue.length:0);break}i=h,h=b.node.findSibling(h,a,"firstChild","nextSibling",!1)}h||(f.setStart(i,0),f.setEnd(i,0))}else"BR"===a.nodeName?a.nextSibling&&b.node.isBlock(a.nextSibling)?(f.setStartBefore(a),f.setEndBefore(a)):(f.setStartAfter(a),f.setEndAfter(a)):(f.setStart(a,0),f.setEnd(a,0));j(),g().addRange(f)}},l=function(a){var c,d,e,g=h(0),i=g.startContainer,j=!1,k=b.node.getParentNode(i,b.node.isBlock),l=g.startOffset;if(i.nodeType===Node.ELEMENT_NODE&&i.hasChildNodes()&&(j=l>i.childNodes.length-1,i=i.childNodes[Math.min(l,i.childNodes.length-1)]||i,l=j&&i.nodeType===Node.TEXT_NODE?i.nodeValue.length:0),i.nodeType===Node.TEXT_NODE&&(e=d=i.nodeValue,Jodit.SPACE_REG_EXP_START.test(d)&&l&&(e=d.replace(Jodit.INVISIBLE_SPACE_REG_EXP_START,""),l-=d.length-e.length),d=e,Jodit.SPACE_REG_EXP_END.test(d)&&l&&(e=b.helper.trim(d),l>e.length&&(l=e.length)),0>l&&(l=0)),i.nodeType===Node.TEXT_NODE&&(a?l>0:l<e.length))return!1;if(a&&i.nodeType===Node.ELEMENT_NODE&&(k&&i===k.firstChild||i===f[0].firstChild))return!0;if(!a&&i.nodeType===Node.ELEMENT_NODE&&(k&&i===k.lastChild||i===f[0].lastChild))return!0;if("TABLE"===i.nodeName||i.previousSibling&&"TABLE"===i.previousSibling.nodeName)return j&&!a||!j&&a;for(c=i,i.nodeType===Node.TEXT_NODE&&(a&&0===l?c=b.node.findSibling(c,k,"lastChild","previousSibling"):a||l!==e.length||(c=b.node.findSibling(c,k,"firstChild","nextSibling")));c;){if(c.nodeType===Node.ELEMENT_NODE){if("BR"!==c.nodeName)return!1}else if(c.nodeType===Node.TEXT_NODE&&!/^[ \t\r\n]*$/.test(c.nodeValue)&&!b.node.isEmptyTextNode(c))return!1;c=a?b.node.findSibling(c,k,"lastChild","previousSibling",!1):b.node.findSibling(c,k,"firstChild","nextSibling",!1)}return!0},m=function(){return b.getDocument().hasFocus()&&b.$editor[0]===b.getDocument().activeElement},n=function(a){var b,c=d.createRange();c.setStartAfter(a),c.collapse(!0),b=g(),j(),b.addRange(c)},o=function(){var a,b=h();for(a=0;a<b.length;a+=1)if(!b[a].collapsed)return!1;return!0},p=0,q=function(a){var c,d;if(c=g(),m()||(b.getWindow().focus(),b.$editor.focus()),o()||b.execCommand("Delete"),c.rangeCount){d=h(0),d.collapse(!1),d.deleteContents(),d.insertNode(a),d=d.cloneRange(),d.selectNodeContents(a),d.collapse(!1),j();try{c.addRange(d)}catch(e){}}clearTimeout(p),p=setTimeout(function(){b.syncCode()},300)},r=function(a){var c,e,f=d.createElement("DIV"),g=d.createDocumentFragment();for(m()||b.editor.focus(),f.innerHTML=a,c=f.lastChild;f.firstChild;)g.appendChild(f.firstChild);for(q(g),e=b.editor.lastChild;e&&e.nodeType===Node.TEXT_NODE&&e.previousSibling&&/^\s*$/.test(e.data);)e=e.previousSibling;c&&(e&&c===e&&1===c.nodeType&&b.editor.appendChild(d.createElement("br")),n(c))},s=function(c,e){var f,g="string"===a.type(c)?a("<img/>",d):a(c);o()||b.execCommand("Delete"),"string"===a.type(c)&&g.attr("src",c),f=b.options.imageDefaultWidth,f&&"auto"!==f&&String(f).indexOf("px")<0&&String(f).indexOf("%")<0&&(f+="px"),g.css(e||{width:f}),g.one("load",function(){(this.naturalHeight<a(this).height()||this.naturalWidth<a(this).width())&&(g.css("width",""),g.css("height","")),b.syncCode()}).each(function(){this.complete&&a(this).trigger("load")}),q(g[0]),b.events.fire("afterInsertImage",[g[0]])},t=function(a){var b=d.createRange();b.selectNode(a),j(),g().addRange(b)},u=function(a,b,c,e){c||(c=a),void 0===e&&(e=b);var f,h=g();h&&(h.collapse&&h.extend?(h.collapse(a,b),h.extend(c,e)):(f=d.createRange(),f.setStart(a,b),f.setEnd(c,e),j(),h.addRange(f)))},v=function(){f.find(".jodit_marker").remove()},w=function(a,b){return'<span class="jodit_marker" data-start="'+(a?1:0)+'" data-index="'+b+'"  style="display: inline-block; line-height: 0;">&#8203;</span>'},x=function(c,e,f){var g,h,i,j;try{if(j=c.cloneRange(),j.collapse(!!e),g=a(w(e,f),d).get(0),j.insertNode(g),e&&c.collapsed)for(h=g.nextSibling;h&&h.nodeType===Node.TEXT_NODE&&!h.textContent.length;)h.parentNode.removeChild(h),h=g.nextSibling;if(e&&!c.collapsed&&(h=g.nextSibling,h&&b.node.isBlock(h))){i=[h];do h=i[0],i=h?a(h).contents():[];while(i[0]&&b.node.isBlock(i[0]));h.firstChild?h.insertBefore(g,h.firstChild):h.appendChild(g)}if(!e&&!c.collapsed){if(h=g.previousSibling,h&&b.node.isBlock(h)){i=[h];do h=i[i.length-1],i=h?a(h).contents():[];while(i[i.length-1]&&b.node.isBlock(i[i.length-1]));a(h).append(g)}g.parentNode&&-1!==["TD","TH"].indexOf(g.parentNode.tagName)&&g.parentNode.previousSibling&&!g.previousSibling&&b.node.isBlock(g.parentNode.previousSibling)&&g.parentNode.previousSibling.appendChild(g)}return g}catch(k){return console.log(k),null}},y=!1,z=function(){if(!y){v();var a,b=h();for(a=0;a<b.length;a+=1)b[a].startContainer!==d&&(x(b[a],!0,a),x(b[a],!1,a));y=!0}},A=function(a,b){var c,e,f=null;if(v(),void 0!==d.caretPositionFromPoint?(c=d.caretPositionFromPoint(a,b),f=d.createRange(),f.setStart(c.offsetNode,c.offset),f.setEnd(c.offsetNode,c.offset)):void 0!==d.caretRangeFromPoint&&(c=d.caretRangeFromPoint(a,b),f=d.createRange(),f.setStart(c.startContainer,c.startOffset),f.setEnd(c.startContainer,c.startOffset)),null!==f)j(),g().addRange(f);else if(void 0!==d.body.createTextRange)try{f=d.body.createTextRange(),f.moveToPoint(a,b),console.log(f),e=f.duplicate(),e.moveToPoint(a,b),f.setEndPoint("EndToEnd",e),f.select()}catch(h){return!1}y=!1,z()},B=function(c){function e(a,b,c){var d,e=a.previousSibling,f=a.nextSibling;return e&&f&&e.nodeType===Node.TEXT_NODE&&f.nodeType===Node.TEXT_NODE?(d=e.textContent.length,c?(f.textContent=e.textContent+f.textContent,e.parentNode.removeChild(e),a.parentNode.removeChild(a),function(){b.setStart(f,d)}):(e.textContent=e.textContent+f.textContent,f.parentNode.removeChild(f),a.parentNode.removeChild(a),function(){b.setEnd(e,d)})):!1}var h,i,k,l,m,n,o,p,q,r,s,t,u=f.find('.jodit_marker[data-start="1"]'),w=!1;if(y=!1,!u.length)return!1;for(o=g(),f.focus(),j(),t=0;t<u.length;t+=1){if(h=u.eq(t).data("index"),i=u.get(t),l=d.createRange(),k=f.find('.jodit_marker[data-start="0"][data-index="'+h+'"]').get(0))try{if(b.node.clearEmptyTextSibling(i),b.node.clearEmptyTextSibling(k),i.nextSibling===k||k.nextSibling===i){if(r=b.node.clearEmptyTextSibling(i.nextSibling===k?i:k,!0),r&&r.nodeType===Node.TEXT_NODE)for(;r&&r.previousSibling&&r.previousSibling.nodeType===Node.TEXT_NODE;)r.previousSibling.textContent=r.previousSibling.textContent+r.textContent,r=r.previousSibling,r.nextSibling.parentNode.removeChild(r.nextSibling);if(s=b.node.clearEmptyTextSibling(i.nextSibling===k?k:i),s&&s.nodeType===Node.TEXT_NODE)for(;s&&s.nextSibling&&s.nextSibling.nodeType===Node.TEXT_NODE;)s.nextSibling.textContent=s.textContent+s.nextSibling.textContent,s=s.nextSibling,s.previousSibling.parentNode.removeChild(s.previousSibling);r&&b.node.isAlone(r)&&(r=null),s&&b.node.isAlone(s)&&(s=null),r&&s&&r.nodeType===Node.TEXT_NODE&&s.nodeType===Node.TEXT_NODE?(i.parentNode.removeChild(i),k.parentNode.removeChild(k),p=r.textContent.length,r.textContent=r.textContent+s.textContent,s.parentNode.removeChild(s),l.setStart(r,p),l.setEnd(r,p),w=!0):!r&&s&&s.nodeType===Node.TEXT_NODE?(k.parentNode.removeChild(k),l.setStart(s,0),l.setEnd(s,0),w=!0):!s&&r&&r.nodeType===Node.TEXT_NODE&&(i.parentNode.removeChild(i),k.parentNode.removeChild(k),l.setStart(r,r.textContent.length),l.setEnd(r,r.textContent.length),w=!0)}w||(i.nextSibling===k?(m=e(k,l,!0),m||l.setStartAfter(k),n=e(i,l,!1),n||l.setEndBefore(i)):(i.previousSibling===k&&(i=k,k=i.nextSibling),k.nextSibling&&"BR"===k.nextSibling.tagName||!k.nextSibling&&b.node.isBlock(i.previousSibling)||i.previousSibling&&"BR"===i.previousSibling.tagName||(i.style.display="inline",k.style.display="inline",q=a(d.createTextNode("​"))),m=e(i,l,!0),m||(a(i).before(q),l.setStartBefore(i)),n=e(k,l,!1),n||(a(k).after(q),l.setEndAfter(k))),m&&m(),n&&n())}catch(x){console.log(x)}o.addRange(l)}c||v()},C=function(){if(void 0!==e.getSelection){var a=g();if(a.rangeCount>0)return h(0).commonAncestorContainer}return b.editor},D=function(a){var b=d.createRange();b.selectNodeContents(a),b.collapse(!1),j(),g().addRange(b)};return c={insertAtPoint:A,selectImage:t,each:i,moveToCaretPosition:k,moveToCursorPosition:k,caretAtStartOrEndOfBlock:l,insertHTML:r,insertNode:q,isCollapsed:o,set:u,get:g,range:h,empty:j,unmark:v,marker:w,save:z,mark:x,restore:B,current:C,isFocused:m,focusAfter:n,focusTo:D,insertImage:s}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Snapshot=function(a){var b,c=a.editor,d=function(a){if(!a.parentNode)return 0;var b,c,d=a.parentNode.childNodes,e=0;for(c=0;c<d.length;c+=1){if(!b||d[c].nodeType===Node.TEXT_NODE&&""===d[c].textContent||b.nodeType===Node.TEXT_NODE&&d[c].nodeType===Node.TEXT_NODE||(e+=1),d[c]===a)return e;b=d[c]}},e=function(a){var b=[];if(!a.parentNode)return[];for(;a&&a!==c;)b.push(d(a)),a=a.parentNode;return b.reverse()},f=function(a,b){for(;a&&a.nodeType===Node.TEXT_NODE;)a=a.previousSibling,a&&a.nodeType===Node.TEXT_NODE&&(b+=a.textContent.length);return b},g=function(){var b,d={};return d.html=c.innerHTML,b=a.selection.range(0),b&&(d.range={startContainer:e(b.startContainer),startOffset:f(b.startContainer,b.startOffset),endContainer:e(b.endContainer),endOffset:f(b.endContainer,b.endOffset)}),d},h=function(a){var b,d=c;for(b=0;d&&b<a.length;b+=1)d=d.childNodes[a[b]];return d},i=function(a,b){return a.html===b.html&&JSON.stringify(a.range)===JSON.stringify(b.range)},j=function(b){c.innerHTML=b.html,b.range&&a.selection.set(h(b.range.startContainer),b.range.startOffset,h(b.range.endContainer),b.range.endOffset)};return b={make:g,equal:i,restore:j}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Browser=function(){return function(a){var b=navigator.userAgent.toLowerCase(),c=/(firefox)[\s\/]([\w.]+)/.exec(b)||/(chrome)[\s\/]([\w.]+)/.exec(b)||/(webkit)[\s\/]([\w.]+)/.exec(b)||/(opera)(?:.*version)[\s\/]([\w.]+)/.exec(b)||/(msie)[\s]([\w.]+)/.exec(b)||/(trident)\/([\w.]+)/.exec(b)||b.indexOf("compatible")<0||[];return"version"===a?c[2]:"webkit"===a?"chrome"===c[1]||"webkit"===c[1]:"ff"===a?"firefox"===c[1]:"msie"===a?"trident"===c[1]||"msie"===c[1]:c[1]===a}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{dialog:{zIndex:1e3,resizable:!0,draggable:!0}}),Jodit.modules.Dialog=function(b,c){var d,e,f,g,h,i,j,k=a.extend({},Jodit.defaultOptions.dialog,b&&b.options?b.options.dialog:{},c),l=a('<div style="z-index:'+k.zIndex+'" class="jodit jodit_dialog_box"><div class="jodit_dialog_overlay"></div><div class="jodit_dialog"><div class="jodit_dialog_header non-selected"><h4></h4><a href="javascript:void(0)" title="Close" class="jodit_close">&times;</a></div><div class="jodit_dialog_content"></div><div class="jodit_dialog_footer"></div>'+(k.resizable?'<div class="jodit_dialog_resizer"><i class="icon icon-resize"></i></div>':"")+"</div></div>"),m=document.body,n=!1,o=l.find(".jodit_dialog"),p=l.find(".jodit_dialog_resizer"),q=!1,r=function(){return o},s=function(){return l},t=function(a,b){a&&o.css({width:a}),b&&o.css({height:b})},u=function(a,b){var c=parseInt(window.innerWidth,10),d=parseInt(window.innerHeight,10),g=c/2-o.outerWidth()/2,h=d/2-o.outerHeight()/2;void 0!==a&&void 0!==b&&(e=a,f=b,q=Math.abs(a-g)>100||Math.abs(b-h)>100),o.css({left:(a||g)+"px",top:(b||h)+"px"})},v=function(a){l.$header.children().detach(),l.$header.empty(),l.$header.append(a)},w=function(a){l.$content.children().detach(),l.$content.empty(),l.$content.append(a)},x=function(a){l.$footer.children().detach(),l.$footer.empty(),l.$footer.append(a),o.toggleClass("with_footer",!!a)},y=function(){var b,c,d,e=0;return a(".jodit_dialog_box").each(function(){b=a(this).data("jodit_dialog"),c=parseInt(this.style.zIndex||0,10),b.isOpened()&&c>e&&(d=b,e=c)}),d},z=function(){var b=0;a(".jodit_dialog_box").each(function(){b=Math.max(parseInt(a(this).css("z-index"),10),b)}),l.css("z-index",b+1)},A=function(a,c,g,h){b&&b.events&&b.events.fire(d,"beforeOpen")===!1||(n=g===!0,void 0!==c&&v(c),a&&w(a),l.addClass("active"),h&&l.addClass("jodit_modal"),u(e,f),z(),b&&b.events&&b.events.fire(d,"afterOpen"))},B=function(){return l.hasClass("active")},C=!1,D=!1,E={x:0,y:0,w:0,h:0},F=function(a){(D||C)&&(D=!1,C=!1,b&&b.events&&b.events.fire(d,"endResize endMove"))},G=function(a){k.draggable&&(D=!0,g=a.clientX,h=a.clientY,E.x=parseInt(o.css("left"),10),E.y=parseInt(o.css("top"),10),z(),a.preventDefault(),b&&b.events&&b.events.fire(d,"startMove"))},H=function(a){D&&k.draggable&&(u(E.x+a.clientX-g,E.y+a.clientY-h),b&&b.events&&b.events.fire(d,"move",[a.clientX-g,a.clientY-h]),a.stopImmediatePropagation(),a.preventDefault()),C&&k.resizable&&(t(E.w+a.clientX-g,E.h+a.clientY-h),b&&b.events&&b.events.fire(d,"resizeDialog",[a.clientX-g,a.clientY-h]),a.stopImmediatePropagation(),a.preventDefault())},I=function(){l.remove(),l.empty(),a(window).off("onmouseup",F).off("onmousemove",H).off("keydown",i).off("resize",j)},J=function(){b&&b.events&&b.events.fire(d,"beforeClose"),l.removeClass("active"),n&&I(),b&&b.events.fire(d,"afterClose")},K=function(a){C=!0,g=a.clientX,h=a.clientY,E.w=o.outerWidth(),E.h=o.outerHeight(),b.events&&b.events.fire(d,"startResize")};return l.$header=l.find(".jodit_dialog_header>h4"),l.$content=l.find(".jodit_dialog_content"),l.$footer=l.find(".jodit_dialog_footer"),l.$close=l.find(".jodit_dialog_header>a"),a(m).append(l),l.$close.on("click",function(){J()}),i=function(a){if(B()&&27===a.which){var b=y();b?b.close():J(),a.stopImmediatePropagation()}},j=function(a){!k.resizable||q||!B()||e||f||u()},a(window).on("mousemove",H).on("mouseup",F).on("keydown",i).on("resize",j),l.find(".jodit_dialog_header").on("mousedown",G),k.resizable&&p.on("mousedown",K),d={getBox:s,getDialog:r,getMaxZIndexDialog:y,setMaxZIndex:z,setTitle:v,setContent:w,setFooter:x,setSize:t,open:A,isOpened:B,close:J,destroy:I},l.data("jodit_dialog",d),d},Jodit.Alert=function(b,c){var d=new Jodit.modules.Dialog,e=a('<div class="jodit_alert"></div>').html(b);d.open(e,c||"&nbsp;",!0,!0)},Jodit.Promt=function(b,c,d,e){var f,g=new Jodit.modules.Dialog,h=a('<form class="jodit_promt"></form>'),i=a('<input autofocus="true" type="text"/>'),j=a("<label></label>");e&&i.attr("placeholder",e),j.html(b),h.append(j),h.append(i),f=a('<a href="javascript:void(0)" style="float:right;" class="jodit_button"><i class="icon icon-cancel"></i>&nbsp;Cancel</a>').on("click",g.close),g.setFooter([a('<a href="javascript:void(0)" style="float:left;" class="jodit_button"><i class="icon icon-check"></i>&nbsp;OK</a>').on("click",function(){d&&d(i.val()),g.close()}),f]),g.open(h,c||"&nbsp;",!0,!0),f[0].focus()},Jodit.Confirm=function(b,c,d){var e,f=new Jodit.modules.Dialog,g=a('<form class="jodit_promt"></form>'),h=a("<label></label>");h.html(b),g.append(h),e=a('<a href="javascript:void(0)" style="float:right;" class="jodit_button"><i class="icon icon-cancel"></i>&nbsp;Cancel</a>').on("click",function(){d&&d(!1),f.close()}),f.setFooter([a('<a href="javascript:void(0)" style="float:left;" class="jodit_button"><i class="icon icon-check"></i>&nbsp;Yes</a>').on("click",function(){d&&d(!0),f.close()}),e]),f.open(g,c||"&nbsp;",!0,!0),e.focus()}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.EnterKey=function(b){var c,d=b.getDocument(),e=function(){return b.selection.insertHTML("<br>"+Jodit.INVISIBLE_SPACE),!1},f=function(a,c){for(var d=c?"previousSibling":"nextSibling",e=a[d];b.node.isEmptyTextNode(e);)e.parentNode.removeChild(e),e=a[d];void 0===c&&f(a,!0)},g=function(a){return a.nextSibling&&a.nextSibling.nodeType===Node.TEXT_NODE&&"\n"===a.nextSibling.nodeValue?a.nextSibling:a},h=function(a,b,c){var e=a?d.createElement(a):b.cloneNode(!1);return e.hasAttribute("id")&&e.removeAttribute("id"),e.innerHTML=void 0!==c?c:Jodit.INVISIBLE_SPACE,e},i=function(c){var d,e,i,j=b.selection;return j.range(0).collapsed?(i=j.current(),f(i),b.node.hasParent(i,"pre|td|th|blockquote")&&j.caretAtStartOrEndOfBlock(c)&&(d=b.node.parentNode(i,"pre|table|blockquote"),!b.node.findSibling(d,b.editor,!1,c?"previousSibling":"nextSibling",!0,function(a){return a.nodeType!==Node.TEXT_NODE||this.parent.helper.trim(a.nodeValue).length}))?(e=h(b.options.enter),a(g(d))[c?"before":"after"](e),j.moveToCaretPosition(e),!1):!0):!0},j=function(a){var c,d=b.selection,e=d.current();return b.$editor.find("img.jodit_focused_image").length?(b.$editor.find("img.jodit_focused_image").remove(),!1):e.nodeType===Node.TEXT_NODE&&0===b.helper.trim(e.nodeValue).length&&b.node.isBlock(e.parentNode)&&e.parentNode!==b.editor&&0===b.helper.trim(e.parentNode.innerHTML).length?(c=b.node.findSibling(e.parentNode,b.editor,!1,"previousSibling",!0,b.node.isBlock),c&&d.moveToCaretPosition(c),e.parentNode.parentNode.removeChild(e.parentNode),!1):void 0},k=function(c){var i,j,k,l,m,n,o=b.selection,p=o.current(),q=d.createTextNode("\n");if(o.isCollapsed()||b.execCommand("Delete"),b.node.hasParent(p,"pre"))return f(p),o.range(0).deleteContents(),o.insertNode(q),n=d.createTextNode(Jodit.INVISIBLE_SPACE),o.insertNode(n),o.focusAfter(q),!1;if(b.node.hasParent(p,"li")&&(o.range(0).deleteContents(),i=b.node.parentNode(p,"li"),l=a.trim(b.helper.trimInvisible(i.textContent||i.innerText||"")),0===l.length&&(n=d.createTextNode(Jodit.INVISIBLE_SPACE),a(b.node.parentNode(p,"ol|ul")).after(n),a(b.node.parentNode(p,"li")).remove(),p=o.current(),o.moveToCaretPosition(n))),b.options.enter===Jodit.ENTER_BR||c.shiftKey||b.node.hasParent(p,"TH|TD|BLOCKQUOTE"))return e();if(b.node.hasParent(p,"H[1-6]|P|DIV|LI|A")){if(i=b.node.parentNode(p,"H[1-6]|P|DIV|LI|A",!0),f(i),o.caretAtStartOrEndOfBlock())return m=h(-1===[b.options.enter.toLowerCase(),"li"].indexOf(i.tagName.toLowerCase())?b.options.enter:!1,i),a(g(i)).after(m),o.moveToCaretPosition(m),!1;if(o.caretAtStartOrEndOfBlock(!0))return m=i.parentNode.insertBefore(h(!1,i),i),o.moveToCaretPosition(i),!1;if(b.node.canSplitBlock(i)&&(k=o.range(0).cloneRange(),k.setEndAfter(i),j=k.extractContents(),j.firstChild))return m=j.firstChild,a(g(i)).after(j),m.normalize(),o.moveToCaretPosition(m),!1;m=h(b.options.enter),a(g(i)).after(m),o.moveToCaretPosition(m)}else m=h(b.options.enter),o.insertNode(m),o.moveToCaretPosition(m);return!1};return b.$editor.on("keydown",function(a){return a.which===Jodit.keys.BACKSPACE?j(a):a.which===Jodit.keys.ENTER?k(a):a.which===Jodit.keys.RIGHT||a.which===Jodit.keys.BOTTOM||a.which===Jodit.keys.LEFT||a.which===Jodit.keys.TOP?i(a.which===Jodit.keys.LEFT||a.which===Jodit.keys.TOP):void 0}),c={createNewBlock:h,enter:k,backspace:j,enterBr:e}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Events=function(b){var c,d={},e=[],f=function(){return c},g=function(c,e,f){var g,h;if("string"===a.type(c)&&(f=e,e=c,c=b),void 0!==c.handlers){for(e=e.split(/[\s,]+/),g=0;g<e.length;g+=1)if(void 0!==c.handlers[e[g]])if(void 0!==f)for(h=0;h<c.handlers[e[g]].length;h+=1)c.handlers[e[g]][h]===f&&c.handlers[e[g]].splice(h,1);else delete c.handlers[e[g]];return d}},h=function(c,e,f){var g;for("string"===a.type(c)&&(f=e,e=c,c=b),e=e.split(/[\s,]+/),g=0;g<e.length;g+=1)void 0===c.handlers&&(c.handlers={}),void 0===c.handlers[e[g]]&&(c.handlers[e[g]]=[]),c.handlers[e[g]].push(f);return d},i=function(d,f,g){var h,i,j;if("string"===a.type(d)&&(g=f,f=d,d=b),void 0!==d.handlers){for(f=f.split(/[\s,]+/),h=0;h<f.length;h+=1)if(void 0!==d.handlers[f[h]]){for(e.push(f[h]),i=0;i<d.handlers[f[h]].length;i+=1)c=f[h],d.handlers[f[h]][i].apply(d,g||[])===!1&&(j=!1);e.pop()}return j}};return d={current:f,on:h,off:g,fire:i}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{filebrowser:{howLongShowMsg:3e3,createNewFolder:!0,deleteFolder:!0,width:"650px",height:"400px",buttons:["upload","remove","update","select"],isSuccess:function(a){return!a.error},getMsg:function(a){return a.msg},ajax:{url:"",async:!0,beforeSend:function(){return!0},data:{},cache:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",headers:{},type:"POST",processData:!0,dataType:"json",prepareData:function(a){return a},process:function(a){return{files:a.files||[],path:a.path,baseurl:a.baseurl,error:a.error,msg:a.msg}}},create:{data:{action:"create"}},move:{data:{action:"move"}},remove:{data:{action:"remove"}},items:{data:{action:"items"}},folder:{data:{action:"folder"}},uploader:null}}),Jodit.modules.FileBrowser=function(b){var c,d={},e=b.options.filebrowser,f="",g=!1,h=new Jodit.modules.Dialog(b),i=a('<div class="jodit_filebrowser_loader"><i class="icon-loader"></i></div>'),j=a('<div class="jodit_filebrowser non-selected"><div class="jodit_filebrowser_tree"></div><div class="jodit_filebrowser_files"></div><div class="jodit_filebrowser_status"></div></div>'),k=j.find(".jodit_filebrowser_status"),l={upload:a('<div class="jodit_uploadfile_button jodit_button"><i class="icon icon-plus"></i><input type="file" accept="image/*" tabindex="-1" dir="auto" multiple=""/></div>'),remove:a('<div class="jodit_button disabled"><i class="icon icon-bin"></i></div>'),update:a('<div class="jodit_button"><i class="icon icon-update"></i></div>'),select:a('<div class="jodit_button disabled"><i class="icon icon-check"></i></div>'),addfolder:a('<a class="jodit_button addfolder" href="javascript:void(0)"><i class="icon icon-plus"></i> Folder</a>')},m=j.find(".jodit_filebrowser_tree"),n=j.find(".jodit_filebrowser_files"),o=function(a){return a.replace(/([^:])[\\\/]+/g,"$1/")},p=function(a){return a.replace(/([^:])[\\\/]+/g,"$1/")},q=function(){return h.isOpened()&&j.is(":visible")},r=0,s=function(a,b){clearTimeout(r),k.removeClass("success").text(a).addClass("active"),b&&k.addClass("success"),r=setTimeout(function(){k.removeClass("active")},e.howLongShowMsg)},t=function(b,c){var d=[];a.each(b,function(b,f){var g=a('<a href="javascript:void(0)" data-path="'+p(c+f)+'/"><span>'+f+"</span></a>");d.push(g),e.deleteFolder&&".."!==f&&"."!==f&&g.append(a('<i class="remove" data-path="'+p(c+f+"/")+'">&times;</i>'))}),m.html(d),e.createNewFolder&&m.append(l.addfolder)},u=function(b,c,d){var e,f,g=[];a.each(b,function(a,b){"string"==typeof b?(e=b,f=b):(void 0!==b.file&&(e=b.file,f=b.file),b.thumb&&(f=b.thumb)),g.push('<a href="'+o(d+c+e)+'" data-path="'+p((c?c+"/":"")+e+"/")+'" data-name="'+e+'" data-url="'+o(d+c+e)+'"><img src="'+o(d+c+f)+'" alt="'+e+'"></a>')}),n.html(g)},v=function(){l.remove.toggleClass("disabled",!n.find(">a.active").length),l.select.toggleClass("disabled",!n.find(">a.active").length)},w=0,x=function(b,c,d){var f,g=a.extend(!0,{},e[b]);return g.data=g.prepareData(g.data),f=a.ajax(g),f.done(c),f.error(d),f},y=function(a){a?e.items.data.path=a:a=e.items.data.path||"",e.items.url&&(n.addClass("active").html(i[0].cloneNode(!0)),w.abort&&w.abort(),w=x("items",function(a){var b=e.items.process.call(d,a);u(b.files,b.path,b.baseurl),v()},function(a){s(b.i18n("Error on load list"))}))},z=0,A=function(a){a&&(e.folder.data.path=a),f=a,c&&c.setPath(f),e.folder.url?(m.addClass("active").html(i[0].cloneNode(!0)),z.abort&&z.abort(),z=x("folder",function(a){var b=e.folder.process.call(d,a);f=b.path,t(b.files,b.path)},function(a){s(b.i18n("Error on load folders"))})):m.removeClass("active"),y(a)},B=function(a,b){e.create.data.path=b,e.create.data.name=a,x("create",function(a){e.isSuccess(a)?A(b):s(e.getMsg(a))},function(a){s(a)})},C=function(a,b){e.move.data.filepath=a,e.move.data.path=b,x("move",function(a){e.isSuccess(a)?A(b):s(e.getMsg(a))},function(a){s(a)})},D=function(a,b){e.remove.data.path=a,e.remove.data.target=b,x("remove",function(a){a=e.remove.process.call(d,a),e.isSuccess(a)?(v(),s(e.getMsg(a),!0)):s(e.getMsg(a))},function(a){s(a)})},E=function(){h.close()},F=function(b){return function(){if(n.find(">a.active").length){var c=[];n.find(">a.active").each(function(){c.push(a(this).data("url"))}),E(),a.isFunction(b)&&b({baseurl:"",files:c})}return!1}},G=function(c){if(e.items.url){n.off("dblclick").on("dblclick",">a",F(c)),l.select.off("click").on("click",F(c)),A(f);var d,g,i=[b.i18n("File Browser")+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"];for(d=0;d<e.buttons.length;d+=1)void 0!==l[e.buttons[d]]?i.push(l[e.buttons[d]]):a.isFunction(e.buttons[d])?i.push(e.buttons[d].call(b)):a.isPlainObject(e.buttons[d])&&e.buttons[d].exec&&e.buttons[d].name&&(g=a('<div class="jodit_button"><i class="icon icon-'+e.buttons[d].name+'"></i></div>'),i.push(g),g.on("click",e.buttons[d].exec));h.open(j,i)}},H=function(a,c){e.isSuccess(c)?s(b.i18n("Files [1$] was uploaded",a.files.join(",")),!0):s(e.getMsg(c)),y()},I=function(){void 0!==Jodit.modules.Uploader&&(c=new Jodit.modules.Uploader(b,e.uploader),c.setPath(f),c.bind(j,H),c.bind(l.upload,H))},J=!1,K={x:0,y:0},L={x:0,y:0};return l.remove.on("click",function(){n.find(">a.active").length&&Jodit.Confirm(b.i18n("Are you shure?"),"",function(b){b&&(n.find(">a.active").each(function(){D(f,a(this).data("name"));
}),v(),A(f))})}),l.update.on("click",function(){A()}),m.on("click","a>i.remove",function(c){var d=this.parentNode,e=a(d).data("path");return Jodit.Confirm(b.i18n("Are you shure?"),"",function(b){b&&(D(e,a(d).data("name")),A(f))}),c.stopImmediatePropagation(),!1}).on("click","a",function(){a(this).hasClass("addfolder")?Jodit.Promt(b.i18n("Enter Directory name"),b.i18n("Create directory"),function(a){B(a,f)},b.i18n("type name")):A(a(this).data("path"))}).on("dragstart","a",function(a){g=this}).on("drop","a",function(b){g&&C(a(g).data("path"),a(this).data("path"))}),n.on("mousedown","a>img",function(b){L.x=b.clientX,L.y=b.clientY,K=a(this).offset(),J=a(this.cloneNode(!0)),J.css({"z-index":1e14,position:"fixed",display:"none",left:K.left,top:K.top,width:a(this).width(),height:a(this).height()}).appendTo("body").get(0)}).on("dragstart","a",function(b){g=this,b.originalEvent.dataTransfer.setData("text/plain",a(this).attr("href")),b.stopPropagation()}).on("click",function(a){d.ctrlKey(a)||(n.find(">a").removeClass("active"),v())}).on("click","a",function(b){return d.ctrlKey(b)||n.find("a").removeClass("active"),a(this).addClass("active"),v(),b.stopPropagation(),!1}),a(document).on("dragover",function(b){q()&&J&&void 0!==b.originalEvent.clientX&&a(J).css({left:b.originalEvent.clientX+20,top:b.originalEvent.clientY+20,display:"block"})}),a(window).on("keydown",function(a){q()&&46===a.which&&l.remove.trigger("click")}).on("mouseup dragend",function(b){J&&(a(J).remove(),J=!1)}),h.setSize(e.width,e.height),e.create=a.extend(!0,{},e.ajax,e.create),e.move=a.extend(!0,{},e.ajax,e.move),e.remove=a.extend(!0,{},e.ajax,e.remove),e.folder=a.extend(!0,{},e.ajax,e.folder),e.items=a.extend(!0,{},e.ajax,e.items),d={init:I,open:G,status:s,create:B,move:C,remove:D,isOpened:q}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Form=function(b){var c,d,e=function(c,d){var e=a('<div class="jodit_colorpicker"></div>');return a.each(b.options.colors,function(c,f){var g=a("<a "+(b.helper.colorToHex(d)===f.toUpperCase()?' class="active" ':"")+' data-color="'+f+'" href="javascript:void(0)"><i class="icon"></i></a>');g.css("background-color",f),e.append(g)}),e.append('<a data-color="" href="javascript:void(0)"><i class="icon icon-eraser"></i></a>'),e.on("mousedown","a",function(d){var f,g=this;return e.find("a.active").removeClass("active"),a(g).addClass("active"),f=a(g).data("color"),c&&a.isFunction(c)&&c.call(b,f),d.stopPropagation(),!1}),e},f=function(d){var e=a('<div class="jodit_tabs"></div>'),f=a('<div class="jodit_tabs_wrapper"></div>'),g=a('<div class="jodit_tabs_buttons"></div>'),h=0;return e.append(g),e.append(f),a.each(d,function(d,e){var i=a('<div class="jodit_tab"></div>'),j=a('<a href="javascript:void(0);"></a>');j.html(b.i18n(d)),g.append(j),a.isFunction(e)?i.append('<div class="jodit_tab_empty"></div>'):i.append(e),f.append(i),j.on("mousedown",function(b){return g.find("a").removeClass("active"),f.find(".jodit_tab").removeClass("active"),j.addClass("active"),i.addClass("active"),a.isFunction(e)&&e.call(c),b.stopPropagation(),!1}),h+=1}),h?(g.find("a").css("width",(100/h).toFixed(10)+"%"),g.find("a:first-child").addClass("active"),f.find(".jodit_tab:first-child").addClass("active"),e):null},g=function(){return d},h=function(c,e){var g,h,i={};return c.upload&&(g=a('<div class="jodit_draganddrop_file_box"><strong>'+b.i18n("Drop image")+"</strong><span><br> "+b.i18n("or click")+'</span><input type="file" accept="image/*" tabindex="-1" dir="auto" multiple=""/></div>'),b.uploader.bind(g,function(d,e){a.isFunction(c.upload)&&c.upload.call(b,d)},function(a){b.events.fire("errorPopap",[b.options.uploader.getMsg(a)])}),i['<i class="icon icon-upload"></i> '+b.i18n("Upload")]=g),c.url&&(h=a('<div><input required name="url" placeholder="http://" type="text"/><input name="text" placeholder="'+b.i18n("Alternative text")+'" type="text"/><button type="submit">'+b.i18n("Insert")+"</button></div>"),d=null,e&&(a(e).is("img")||a(e).find("img").length)&&(d=a(e).is("img")?e:a(e).find("img").get(0),h.find("input[name=url]").val(a(d).attr("src")),h.find("input[name=text]").val(a(d).attr("alt")),h.find("button").text("Update")),h.find("button").on("click",function(){return a.isFunction(c.url)&&c.url.call(b,h.find("input[name=url]").val(),h.find("input[name=text]").val()),!1}),i['<i class="icon icon-link"></i> URL']=h),c.filebrowser&&b.filebrowser&&(b.options.filebrowser.url||b.options.filebrowser.ajax.url||b.options.filebrowser.items.url)&&(i['<i class="icon icon-folder"></i> '+b.i18n("Browse")]=function(){b.filebrowser.open(c.filebrowser)}),f(i)};return c={buildColorPicker:e,buildTabs:f,imageSelector:h,getCurrentImage:g}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Helper=function(b){var c=function(a){if(!a||"rgba(0, 0, 0, 0)"===a||"#"===a.substr(0,1)||!a)return a;var b,c,d,e,f=/([\s\n\t\r]*?)rgb\((\d+), (\d+), (\d+)\)/.exec(a)||/([\s\n\t\r]*?)rgba\((\d+), (\d+), (\d+), ([\d\.]+)\)/.exec(a);return f?(b=parseInt(f[2],10),c=parseInt(f[3],10),d=parseInt(f[4],10),e=d|c<<8|b<<16,f[1]+"#"+e.toString(16).toUpperCase()):a},d=function(a){return/^[0-9]$/.test(a)?a+"px":a},e=function(a){return a.replace(Jodit.INVISIBLE_SPACE_REG_EXP_START,"").replace(Jodit.INVISIBLE_SPACE_REG_EXP_END,"")},f=function(a){return a.replace(Jodit.SPACE_REG_EXP_START,"").replace(Jodit.SPACE_REG_EXP_END,"")},g=function(a){return f(a).replace(Jodit.INVISIBLE_SPACE_REG_EXP,"").replace(/[\s]*class=""/g,"")},h=function(c,d){var e=a(c).offset(),f=b.$workflow.offset();return!b.options.iframe||d?{left:e.left-f.left,top:e.top-f.top}:e},i={offset:h,normalizeSize:d,trimInvisible:e,trim:f,clear:g,colorToHex:c};return i}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{useImageProcessor:!0,imageprocessor:{}}),Jodit.modules.ImageProcessor=function(b,c){Jodit.modules.ImageProcessor.unique+=1;var d,e=b.id+"_image_"+Jodit.modules.TableProcessor.unique,f=!1,g=function(){a(b.getDocument()).off(".jodit"+e)},h=function(c){return{left:a(c).offset().left-b.$workflow.offset().left,top:a(c).offset().top-b.$workflow.offset().top}};return c&&(b.events.on(c,"execCommand",function(d){switch(d){case"bin":c.parentNode.removeChild(c);break;case"left":case"right":case"center":var e=b.node.getParentNode(c,b.node.isBlock);e&&a(e).css("text-align",d);break;case"bottom":case"middle":case"top":a(c).css("vertical-align",d)}b.syncCode()}),a(c).on("dragstart",function(a){a.originalEvent.dataTransfer&&(a.originalEvent.dataTransfer.dropEffect="move",a.originalEvent.dataTransfer.setData("text/plain","-"))}).on("mousedown",function(d){a(c).addClass("jodit_focused_image");var e=h(c);b.events.fire("showPopap",[c,Math.round(e.left+a(c).outerWidth()/2),Math.round(e.top+a(c).outerHeight())]),f=!0,d.stopPropagation()}),a(b.windows).on("keyup.jodit"+e+" mouseup.jodit"+e,function(d){return c&&c.parentNode?void(f?f=!1:(a(c).removeClass("jodit_focused_image"),b.$editor.find(".jodit_focused_cell").length||b.$editor.find(".jodit_focused_image").length||b.events.fire("hidePopap"))):void g()})),d={}},Jodit.modules.ImageProcessor.unique=1}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Node=function(b){var c,d=b.getDocument(),e=function(a,b,d,e,f,g){var h,i;if(a){if(!f&&a[d])return a[d];if(a!==b){if(h=a[e])return h;for(i=a.parentNode;i&&i!==b;i=i.parentNode)if(h=i[e],h&&(void 0===g||g.call(c,h)))return h}}},f=function(b,c,e,f){var g="string"==typeof c?d.createElement(c):c;if(!f)for(;b.firstChild;)g.appendChild(b.firstChild);return e&&a.each(b.attributes,function(a,b){g.setAttribute(b.name,b.nodeValue)}),b.parentNode.replaceChild(g,b),g},g=function(a,b){var c="string"==typeof b?d.createElement(b):b,e=d.createElement("span");return a.parentNode.insertBefore(e,a),c.appendChild(a),e.parentNode.replaceChild(c,e),c},h=function(a,c,d){if(null!==a)for(;a.parentNode&&a!==b.editor;){if(c(a))return d?d(a):a;a=a.parentNode}},i=function(a,b,c){var d,e=a,f=function(a){return a.nodeName.toLowerCase().match(new RegExp("^("+b+")$","i"))},g=function(a){return a};if(e=h(a,f,g),!c||!e)return e;for(;e&&e.parentNode;)d=e,e=h(e.parentNode,f,g);return d},j=function(a,c){var d=a;do d=b.node.findSibling(d,a,"firstChild","nextSibling"),d&&c.call(d,d);while(d)},k=function(a,b){return!!i(a,b)},l=function(a){return a&&a.nodeType===Node.TEXT_NODE&&0===a.nodeValue.replace(Jodit.INVISIBLE_SPACE_REG_EXP,"").length},m=function(a,b){var c;do c&&c.parentNode.removeChild(c),c=a[b===!0?"previousSibling":"nextSibling"],a=c;while(a&&a.nodeType===Node.TEXT_NODE&&!a.textContent.length);return a||null},n=function(a){if(a){if(a.nodeType!==Node.ELEMENT_NODE)return!1;if(-1!==Jodit.BLOCKS.indexOf(a.tagName))return!0}return!1},o=function(a){if(a){if(a.nodeType!==Node.ELEMENT_NODE)return!1;if(-1!==Jodit.ALONE.indexOf(a.tagName))return!0}return!1},p=function(b,c,e){function f(a,b){var c,d,e=0;if(a)for(c=a.nodeType,a=a.previousSibling;a;a=a.previousSibling)d=a.nodeType,(!b||d!==Node.TEXT_NODE||d!==c&&a.nodeValue.length)&&(e+=1,c=d);return e}function g(b){function c(a){var b=a.previousSibling&&"SPAN"===a.previousSibling.nodeName,c=a.nextSibling&&"SPAN"===a.nextSibling.nodeName;return b&&c}var d,e,f=b.childNodes,h=b.nodeType;for(d=f.length-1;d>=0;d-=1)g(f[d]);if(h!==Node.DOCUMENT_NODE){if(h===Node.TEXT_NODE&&b.nodeValue.length>0){if(e=a.trim(b.nodeValue).length,(!n(b.parentNode)||e>0||0===e)&&c(b))return}else if(h===Node.ELEMENT_NODE&&(f=b.childNodes,f.length||/^(br|hr|input|img)$/i.test(b.nodeName)))return;a(b).remove()}return b}var h,i,j,k=d.createRange();return b&&c?(k.setStart(b.parentNode,f(b)),k.setEnd(c.parentNode,f(c)),h=k.extractContents(),k=d.createRange(),k.setStart(c.parentNode,f(c)+1),k.setEnd(b.parentNode,f(b)+1),i=k.extractContents(),j=b.parentNode,j.insertBefore(g(h),b),e?j.insertBefore(e,b):j.insertBefore(c,b),j.insertBefore(g(i),b),b.parentNode.removeChild(b),e||c):void 0},q=function(a){return a&&n(a)&&!/^(TD|TH|CAPTION|FORM)$/.test(a.nodeName)&&!/^(fixed|absolute)/i.test(a.style.position)};return c={wrap:g,isBlock:n,isAlone:o,canSplitBlock:q,split:p,replace:f,findSibling:e,getParentNode:h,parentNode:i,each:j,hasParent:k,isEmptyTextNode:l,clearEmptyTextSibling:m}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{observer:{subtree:!0,childList:!0,characterData:!0,attributes:!0}}),Jodit.modules.Observer=function(b){var c,d,e,f,g,h,i,j,k=new Undo.Stack,l=!1,m=b.editor,n=function(a){a===!0||a===!1?l=a:1===a?(j=l,l=!0):0===a&&(l=void 0!==j?j:!1)},o=Undo.Command.extend({constructor:function(a,b){this.oldValue=a,this.newValue=b},execute:function(){},undo:function(){n(!0),b.snapshot.restore(this.oldValue)},redo:function(){n(!0),b.snapshot.restore(this.newValue)}}),p=function(){b.getRealMode()===Jodit.MODE_WYSIWYG&&(e.toggleClass("disabled",!k.canRedo()),f.toggleClass("disabled",!k.canUndo()))},q=function(){k.redo()},r=function(){k.undo()},s=function(){g=b.snapshot.make(),e=b.$toolbar.find(".toolbar-redo"),f=b.$toolbar.find(".toolbar-undo"),k.changed(),i=new MutationObserver(function(a){return l?void n(!1):(clearTimeout(d),void(d=setTimeout(function(){h=b.snapshot.make(),b.snapshot.equal(h,g)||(k.execute(new o(g,h)),g=h)},300)))}),i.observe(m,b.options.observer),a(m).on("keydown",function(a){c.ctrlKey(a)&&(a.which===Jodit.keys.Z&&k.canUndo()?(k.undo(),a.preventDefault(),a.stopImmediatePropagation()):a.which===Jodit.keys.Y&&k.canRedo()&&(k.redo(),a.preventDefault(),a.stopImmediatePropagation()))})};return void 0===window.MutationObserver&&(window.MutationObserver=function(b){this.observe=function(c){a(c).on("keydown mousedown drop",b)}}),k.changed=p,c={changed:p,block:n,redo:q,undo:r,init:s}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.ObserverArea=function(b){var c,d,e,f,g,h,i,j={},k=new Undo.Stack,l=!1,m=b.area,n=function(a){if(void 0!==a.selectionStart&&document.activeElement===a)return{start:a.selectionStart,end:a.selectionEnd};if(a.createTextRange){var b,c,d,e=document.selection.createRange();if(e.parentElement()===a){for(d=a.createTextRange(),d.moveToBookmark(e.getBookmark()),b=0;d.compareEndPoints("EndToStart",d)>0;d.moveEnd("character",-1))b+=1;for(d.setEndPoint("StartToStart",a.createTextRange()),c={start:0,end:b};d.compareEndPoints("EndToStart",d)>0;d.moveEnd("character",-1))c.start+=1,c.end+=1;return c}}return-1},o=function(b,c){void 0===c&&(c=b),a(m).each(function(){if(void 0!==this.selectionStart)this.selectionStart=b,this.selectionEnd=c;else if(this.setSelectionRange)this.setSelectionRange(b,c);else if(this.createTextRange){var a=this.createTextRange();a.collapse(!0),a.moveEnd("character",c),a.moveStart("character",b),a.select()}})},p=Undo.Command.extend({constructor:function(a,b,c,d){this.selectionStart=c,this.selectionSecond=d,this.oldValue=a,this.newValue=b},execute:function(){},undo:function(){j.block(!0),b.setAreaValue(this.oldValue),o(this.selectionStart.start,this.selectionStart.end),b.events.fire("updateStackEditor")},redo:function(){j.block(!0),b.setAreaValue(this.newValue),o(this.selectionSecond.start,this.selectionSecond.end),b.events.fire("updateStackEditor")}}),q=function(){b.getRealMode()===Jodit.MODE_TEXTAREA&&(d.toggleClass("disabled",!k.canRedo()),e.toggleClass("disabled",!k.canUndo()))},r=function(a){l=!!a},s=function(){k.redo()},t=function(){k.undo()},u=function(){f=m.value,h={start:0},d=this.parent.$toolbar.find(".toolbar-redo"),e=this.parent.$toolbar.find(".toolbar-undo"),k.changed(),b.$area.on("keydown",function(a){var b,c,d,e,f,g;a.which===Jodit.keys.TAB&&(a.preventDefault(),b=n(m),c=b.start,d=b.end,g=m.value,f=g.substring(b.start,b.end),b.start!==b.end&&f.match(/\n/)?(e="	"+f.replace(/\n/g,"\n	"),d=c+e.length):(e="	",d+=1,c=d),m.value=g.substring(0,b.start)+e+g.substring(b.end),o(c,d))}).on("keydown",function(a){j.ctrlKey(a)&&(a.which===Jodit.keys.Z&&k.canUndo()?(k.undo(),a.preventDefault(),a.stopImmediatePropagation()):a.which===Jodit.keys.Y&&k.canRedo()&&(k.redo(),a.preventDefault(),a.stopImmediatePropagation()))}).on("keydown mousedown change updatestack",function(a){return l||a.which===Jodit.keys.CTRL?void j.block(!1):(clearTimeout(c),void(c=setTimeout(function(){g=m.value,g!==f&&(i=n(m),k.execute(new p(f,g,h,i)),h=i,f=g)},300)))})};return k.changed=q,j={changed:q,block:r,redo:s,undo:t,init:u}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.modules.Plugins=function(a){var b,c,d={},e=function(){if(Jodit.plugins&&(c=Object.keys(Jodit.plugins),c.length))for(b=0;b<c.length;b+=1)d[c[b]]=new Jodit.plugins[c[b]](a)};return d={init:e}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{popap:{img:[{name:"bin"},{name:"pencil",exec:function(a){Jodit.plugins.image.open&&Jodit.plugins.image.open.call(a)}},{name:"valign",list:{top:"Top",middle:"Middle",bottom:"Bottom"}},{name:"left",list:{left:"Left",right:"Right",center:"Center"}}],table:[{name:"brush",popap:function(b,c){var d,e,f,g=a(b).find(".jodit_focused_cell"),h=g.css("color"),i=g.css("background-color");return d=this.form.buildColorPicker(a.proxy(function(a){g.css("background-color",a),c&&c()},this),i),e=this.form.buildColorPicker(a.proxy(function(a){g.css("color",a),c&&c()},this),h),f=this.form.buildTabs({Background:d,Text:e})}},{name:"valign",list:{top:"Top",middle:"Middle",bottom:"Bottom"}},"|","splitv","splitg","\n","merge",{name:"addcolumn",list:{addcolumnbefore:"Insert column before",addcolumnafter:"Insert column after"}},{name:"addrow",list:{addrowbefore:"Insert row above",addrowafter:"Insert row below"}},{name:"bin",list:{bin:"Delete table",binrow:"Delete row",bincolumn:"Delete column",empty:"Empty cell"}}]}}),Jodit.modules.Popap=function(b){var c,d,e,f,g,h=function(){e.removeClass("active").find(".jodit_dropdown_open,.active").removeClass("jodit_dropdown_open active"),f.hide()},i=function(c){var e,j="string"===a.type(c)?c:c.name,k=a('<li><a href="javascript:void(0)"></a></li>'),l=k.find("a");return k.addClass("toolbar-"+j),l.addClass("icon icon-"+j),c.content&&l.html(b.i18n(c.content)),c.list&&(e=a('<ul class="jodit_dropdownlist"></ul>'),a.each(c.list,function(a,b){var c=i({name:a,content:b});e.append(c)}),k.append(e),k.addClass("jodit_with_dropdownlist")),k.on("mouseup",function(a){a.stopPropagation()}).on("mousedown",a.proxy(function(a){k.hasClass("jodit_with_dropdownlist")?(g.find(".jodit_with_dropdownlist").not(k).removeClass("jodit_dropdown_open active"),k.toggleClass("jodit_dropdown_open active"),f.hide()):(g.find(".jodit_with_dropdownlist").removeClass("jodit_dropdown_open active"),c.popap?(f.show(),k.append(f),f.empty(),f.html(c.popap.call(b,d,function(){setTimeout(function(){f.hide()},30)}))):c.exec?(c.exec.call(b,d),h()):(b.events.fire(d,"execCommand",[j]),h())),a.stopPropagation(),a.preventDefault()},this)),k},j=function(c,f){h(),g.empty(),a.each(b.options.popap[d.tagName.toLowerCase()],function(a,b){switch(b){case"\n":g.append('<li class="next_row"></li>');break;case"|":g.append('<li class="separator"></li>');break;default:g.append(i(b))}}),e.addClass("active"),b.options.iframe&&(c+=b.helper.offset(b.$iframe,!0).left),e.css({left:c+"px",top:f+"px",marginLeft:-Math.round(e.outerWidth()/2)+"px"})},k=function(){e||(e=a('<div class="jodit_popap_inline"></div>'),g=a('<ul class="toolbar"></ul>'),f=a('<div class="jodit_toolbar_popap non-selected"></div>'),f.on("mousedown",function(a){a.stopImmediatePropagation()}),e.append(g),b.$workflow.append(e)),b.events.on("hidePopap",h),b.events.on("showPopap",function(a,b,c){d=a,j(b,c)})};return c={init:k}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{useTableResizer:!0,useImageResizer:!0,resizer:{min_width:10,min_height:10}}),Jodit.modules.Resizer=function(b){var c,d,e,f,g,h,i,j,k,l,m={},n=!1,o=!1,p=a('<div class="resizer"><i class="topleft"></i><i class="topright"></i><i class="bottomright"></i><i class="bottomleft"></i></div>'),q=function(b){b=a(b),b.off(".jodit-resizer").on("drag.jodit-resizer",function(a){p.hide()}).on("mousedown.jodit-resizer",a.proxy(function(a){b.get(0).clicked=!0})).on("mouseup.jodit-resizer",function(a){b.get(0).clicked&&setTimeout(function(){b.get(0).clicked=!1,p.$element=b,p.show().trigger("updatesize")},50)})};return p.find("i").on("mousedown",function(a){p.$element.get(0).clicked=!1,c=a.target||a.srcElement,a.preventDefault(),a.stopImmediatePropagation(),f=parseInt(p.$element.outerWidth(),10),g=parseInt(p.$element.outerHeight(),10),h=f/g,n=!0,o=!1,d=parseInt(a.clientX,10),e=parseInt(a.clientY,10)}),a(b.windows).off(".jodit-resizer"+b.id+" updateresizer.jodit-resizer"+b.id).on("mousemove.jodit-resizer"+b.id,function(a){n&&(o=!0,k=parseInt(a.clientX,10)-d,l=parseInt(a.clientY,10)-e,"IMG"===p.$element[0].tagName?k?(j=f+(c.className.match(/left/)?-1:1)*k,i=Math.round(j/h)):(i=g+(c.className.match(/top/)?-1:1)*l,j=Math.round(i*h)):(j=f+(c.className.match(/left/)?-1:1)*k,i=g+(c.className.match(/top/)?-1:1)*l),j>b.options.resizer.min_width&&(j<p.parent().outerWidth()?p.$element.css("width",j+"px"):p.$element.css("width","100%")),i>b.options.resizer.min_height&&p.$element.css("height",i+"px"),p.trigger("updatesize"),a.stopImmediatePropagation())}).on("resize.jodit-resizer"+b.id+" updateresizer.jodit-resizer",function(a){p.is(":visible")&&p.trigger("updatesize")}).on("mouseup.jodit-resizer"+b.id+" keydown.jodit-resizer"+b.id,function(a){p.is(":visible")&&(n?(o&&b.syncCode(),n=!1,o=!1,a.stopImmediatePropagation()):p.$element.get(0).clicked||p.hide())}),p.on("updatesize.jodit-resizer"+b.id,function(){if(p.is(":visible")){var a,c=b.helper.offset(p.$element);b.options.iframe&&(a=b.helper.offset(b.$iframe,!0),c.left+=a.left),p.css({top:c.top-1+"px",left:c.left-1+"px",width:p.$element.outerWidth()+"px",height:p.$element.outerHeight()+"px"})}}),b.$workflow.append(p),m={bind:q}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{useTableProcessor:!0,tableprocessor:{accuracy:10,resizerOffset:20}}),Jodit.modules.TableProcessor=function(b,c){Jodit.modules.TableProcessor.unique+=1;var d,e,f,g=b.id+"_"+Jodit.modules.TableProcessor.unique,h=b.options.tableprocessor.accuracy,i=a(c),j=function(){return i.find("tr").length},k=function(){var b,c,d,e,f,g,h=i.find("tr"),j=function(a,b){a.data("colcount",b)};return h.length&&h.each(function(h,i){b=a(i),f=0,b.find("td,th").each(function(h,i){if(e=a(i).attr("colspan")?parseInt(a(i).attr("colspan"),10):1,a(i).attr("rowspan"))for(c=parseInt(a(i).attr("rowspan"),10)-1,d=b.next(),g=0;c>g;g+=1)j(d,e),d=d.next();f+=e}),j(b,f)}),f=0,h.each(function(b,c){f=Math.max(f,parseInt(a(c).data("colcount"),10)),a(c).removeData("colcount")}),f},l=!1,m=!1,n=!1,o=function(a,b){var c,d,e,f,g,h,o=n&&l?l:[],p=k(),q=j(),r=n&&m?m:i.find("td,th"),s=r.get(0),t=0,u=function(b,c,d,i){if(void 0===o[b]&&(o[b]=[]),o[b][c]=d,a&&a(b,c,d)===!1)return!1;if(void 0===i&&void 0!==d&&(g=0,e=0,d.hasAttribute("colspan")&&(g=parseInt(d.getAttribute("colspan"),10)),d.hasAttribute("rowspan")&&(e=parseInt(d.getAttribute("rowspan"),10)),g>1||e>1))for(f=b,h=c;b+e-1>f||c+g-1>h;)if(c+g-1>h?h+=1:(h=c,f+=1),u(f,h,d,!0)===!1)return!1};for(n&&!m&&(m=r),c=0;q>c;c+=1)for(d=0;p>d;d+=1)if(void 0===o[c]||void 0===o[c][d]){if(u(c,d,s)===!1)return s;t+=1,s=r[t]}else if(a&&a(c,d,o[c][d])===!1)return o[c][d];return l=o,o},p=function(a,b){var c,d,e=!1;return o(function(f,g,h){if(a!==h||e&&(b!==!0||c!==f)&&2!==b){if(e)return!1}else{if(c=f,d=g,!b)return!1;e=!0}}),[c,d]},q=function(a,b){var c;return o(function(d,e,f){return c=f,a===d&&b===e?!1:void 0}),c},r=function(){return i.find(".jodit_focused_cell")},s=function(){var a=r();if(a.length){var b,c,d=0,e=1e6,f=0,g=1e6;return a.each(function(a,h){var i=p(h);b=0,c=0,h.hasAttribute("colspan")&&(b=parseInt(h.getAttribute("colspan"),10),b&&(b-=1)),h.hasAttribute("rowspan")&&(c=parseInt(h.getAttribute("rowspan"),10),c&&(c-=1)),d=Math.max(i[1]+b,d),e=Math.min(i[1],e),f=Math.max(i[0]+c,f),g=Math.min(i[0],g)}),[g,e,f,d]}return!1},t=function(b,c,d){var e=a(b);e.addClass("jodit_iamalready_was").data(c,void 0===d?1:d)},u=function(){i.find(".jodit_iamalready_was").each(function(b,c){var d=a(c);d.removeClass("jodit_iamalready_was"),void 0!==d.data("append")&&(a(d.data("append")).append(c),d.removeData("append")),void 0!==d.data("before")&&(a(d.data("before")).before(c),d.removeData("before")),void 0!==d.data("width")&&(d.css("width",d.data("width")),d.removeData("width")),void 0!==d.data("colspan")&&(d.data("colspan")>1?d.attr("colspan",d.data("colspan")):d.removeAttr("colspan"),d.removeData("colspan")),void 0!==d.data("rowspan")&&(d.attr("rowspan",d.data("rowspan")),d.removeData("rowspan")),void 0!==d.data("remove")&&(d.removeData("remove"),d.remove())})},v=function(c){r().each(function(b,d){var e,f=o(),g=p(d,2);for(e=0;e<f.length;e+=1)c?g[1]-1<0||f[e][g[1]]!==f[e][g[1]-1]?a(f[e][g[1]]).before("<td><br/></td>"):t(f[e][g[1]],"colspan",parseInt(f[e][g[1]].getAttribute("colspan"),10)+1):g[1]+1>=f[e].length||f[e][g[1]]!==f[e][g[1]+1]?a(f[e][g[1]]).after("<td><br/></td>"):t(f[e][g[1]],"colspan",parseInt(f[e][g[1]].getAttribute("colspan"),10)+1);u()}),a(b.windows).trigger("updateresizer.jodit-resizer")},w=function(c,d){var e=a("<td/>",b.getDocument());return e.append(d),a(c).append(e),e.get(0)},x=function(c){r().each(function(d,e){var f,g=o(),h=p(e,2),j=a("<tr></tr>",b.getDocument(),b.getDocument()).get(0);for(f=0;f<g[0].length;f+=1)c?h[0]-1<0||g[h[0]][f]!==g[h[0]-1][f]?w(j,"<br>"):t(g[h[0]][f],"rowspan",parseInt(g[h[0]][f].getAttribute("rowspan"),10)+1):h[0]+1>=g.length||g[h[0]][f]!==g[h[0]+1][f]?w(j,"<br>"):t(g[h[0]][f],"rowspan",parseInt(g[h[0]][f].getAttribute("rowspan"),10)+1);i.find("tr").eq(h[0])[c?"before":"after"](j),u()}),a(b.windows).trigger("updateresizer.jodit-resizer")},y=function(){var c,d=a("<tr></tr>",b.getDocument());for(c=1;c<=k();c+=1)w(d,"<br>");return i.append(d),d.get(0)},z=function(){r().each(function(a,b){var c,d=p(b);for(c=o(),a=0;a<c.length;a+=1)d[1]-1>=0&&c[a][d[1]-1]===c[a][d[1]]?t(c[a][d[1]-1],"colspan",parseInt(c[a][d[1]-1].getAttribute("colspan"),10)-1):d[1]+1<c[0].length&&c[a][d[1]+1]===c[a][d[1]]?t(c[a][d[1]],"colspan",parseInt(c[a][d[1]].getAttribute("colspan"),10)-1):t(c[a][d[1]],"remove");u()})},A=function(){var c=[];return 1===i.find("tr").length?(i.remove(),void b.events.fire("hidePopap")):void r().each(function(b,d){var e,f,g,h,i=p(d),j=d.parentNode;if(!c[i[0]]){for(c[i[0]]=!0,f=o(),e=0;e<f[0].length;e+=1)if(i[0]-1>=0&&f[i[0]-1][e]===f[i[0]][e])t(f[i[0]-1][e],"rowspan",parseInt(f[i[0]-1][e].getAttribute("rowspan"),10)-1);else if(i[0]+1<f.length&&f[i[0]+1][e]===f[i[0]][e]){for(g=e+1,h=!1;g<f[0].length&&!h;)f[i[0]+1][g]!==f[i[0]][e]&&j!==f[i[0]+1][g].parentNode&&(t(f[i[0]][e],"rowspan",parseInt(f[i[0]][e].getAttribute("rowspan"),10)-1),t(f[i[0]][e],"before",f[i[0]+1][g]),h=!0),g+=1;h||t(f[i[0]][e],"append",a(j).next())}u(),a(j).remove()}})},B=function(b,c,d,e){var f,g,j,k=o();for(f=0;f<k.length;f+=1)k[f][b]!==k[f][d?b-1:b+1]&&(g=a(k[f][b]).outerWidth(),j=(g+c)/i.outerWidth()*100,t(k[f][b],"width",j.toFixed(h)+"%"));e||u()},C=function(){var a,b,c,d,e,f;for(a=o(),c=0;c<a[0].length;c+=1){for(d=0,e=1e6,f=!1,b=0;b<a.length;b+=1){if(!a[b][c].hasAttribute("colspan")){f=!0;break}d=Math.max(d,parseInt(a[b][c].getAttribute("colspan"),10)),e=Math.min(d,parseInt(a[b][c].getAttribute("colspan"),10))}if(!f)for(b=0;b<a.length;b+=1)t(a[b][c],"colspan",d-e)}for(b=0;b<a.length;b+=1)for(c=0;c<a[b].length;c+=1)a[b][c].hasAttribute("rowspan")&&1===parseInt(a[b][c].getAttribute("rowspan"),10)&&a[b][c].removeAttribute("rowspan"),a[b][c].hasAttribute("colspan")&&1===parseInt(a[b][c].getAttribute("colspan"),10)&&a[b][c].removeAttribute("colspan");for(u(),a=o(),c=0;c<a[0].length;c+=1)B(c,0,!1,!0);u()},D=function(){var b,c,d,e,f,g=s(),j=0,k=[],l=0,m=0;g&&(g[0]-g[2]||g[1]-g[3])&&(o(function(h,i,n){if(h>=g[0]&&h<=g[2]&&i>=g[1]&&i<=g[3]){if(d=a(n),d.hasClass("jodit_iamalready_was"))return;d.addClass("jodit_iamalready_was"),h===g[0]&&(j+=d.outerWidth()),""!==a.trim(n.innerHTML.replace(/<br(\/)?>/g,""))&&k.push(n.innerHTML+"<br/>"),e=0,f=0,n.hasAttribute("colspan")&&(e=parseInt(n.getAttribute("colspan"),10)),n.hasAttribute("rowspan")&&(f=parseInt(n.getAttribute("rowspan"),10)),e>1&&(l+=e-1),f>1&&(m+=f-1),b?t(d,"remove",1):(b=a(n),c=i)}}),l=g[3]-g[1]+1,m=g[2]-g[0]+1,l>1&&b.attr("colspan",l),m>1&&b.attr("rowspan",m),t(b,"width",(j/i.outerWidth()*100).toFixed(h)+"%"),b.html(b.html()+k.join("")),B(c,0,!1,!0),u()),C()},E=function(c,d){var e,f=a(c);return f.next().length?f.next().get(0):f.parent().next().length?f.parent().next().find("td:first-child,th:first-child").get(0):d?(e=y(),a(b.windows).trigger("updateresizer.jodit-resizer"),a(e).find("td:first-child,th:first-child").get(0)):!1},F=function(b){var c=a(b);return c.prev().length?c.prev().get(0):c.parent().prev().length?c.parent().prev().find("td:last,th:last").get(0):b},G=function(){var b,c,d,e,f;r().each(function(g,j){f=a(j),b=p(f.get(0)),!f.attr("colspan")||parseInt(f.attr("colspan"),10)<2?o(function(a,c,d){b[1]===c&&b[0]!==a&&d!==f.get(0)&&t(d,"colspan",d.hasAttribute("colspan")?parseInt(d.getAttribute("colspan"),10)+1:2)}):t(f,"colspan",parseInt(f.attr("colspan"),10)-1),c=a("<td><br/></td>"),f.attr("rowspan")&&t(c,"rowspan",f.attr("rowspan")),f.after(c),d=f.outerWidth(),e=d/i.outerWidth()/2,t(f,"width",(100*e).toFixed(h)+"%"),t(c,"width",(100*e).toFixed(h)+"%"),u(),f.removeClass("jodit_focused_cell")}),C()},H=function(){var b,c,d,e,f,g;r().each(function(h,j){g=a(j),c=a("<td><br/></td>"),d=a("<tr></tr>"),b=p(g.get(0)),!g.attr("rowspan")||parseInt(g.attr("rowspan"),10)<2?(o(function(a,c,d){b[0]===a&&b[1]!==c&&d!==g.get(0)&&t(d,"rowspan",d.hasAttribute("rowspan")?parseInt(d.getAttribute("rowspan"),10)+1:2)}),g.closest("tr").after(d),d.append(c)):(t(g,"rowspan",parseInt(g.attr("rowspan"),10)-1),o(function(c,d,h){c>b[0]&&c<b[0]+parseInt(g.attr("rowspan"),10)&&b[1]>d&&a(h).parent().index()===c&&(f=a(h)),b[0]<c&&h===g.get(0)&&(e=i.find("tr").eq(c))}),f?f.after(c):e.prepend(c)),g.attr("colspan")&&t(c,"colspan",g.attr("colspan")),u(),g.removeClass("jodit_focused_cell")}),C()},I=function(){a(b.getDocument()).off(".jodit"+g).off(".jodit-border-resizer"+g)},J=function(){var d,f,h,j,k,l,m,n,r,s;e||(e=a('<div class="border_resizer"><div></div></div>'),e.on("mousedown",function(c){d=!0,s=!1,f=parseInt(c.clientX,10),n=parseInt(e.css("left"),10),e.addClass("border_resizer_clicked"),b.$editor.addClass("non-selected"),j=p(e.targets[0],!0),k=p(e.targets[1]),l=1e8,m=0,o(function(c,d,e){d===j[1]&&(l=Math.min(b.helper.offset(a(e)).left,l)),d===k[1]&&(m=Math.max(b.helper.offset(a(e)).left+a(e).outerWidth(),m))})}),a(b.getDocument()).off(".jodit-border-resizer"+g).on("mousemove.jodit-border-resizer"+g,function(a){return c&&c.parentNode?void(d&&(s=!0,r=parseInt(a.clientX,10)-f,n+r>l+b.options.tableprocessor.resizerOffset&&n+r<m-b.options.tableprocessor.resizerOffset&&e.css("left",n+r+"px"))):void I()}).on("mouseup.jodit-border-resizer"+g,function(a){return c&&c.parentNode?(d&&e.is(":visible")&&(e.removeClass("border_resizer_clicked"),e.hide()),s&&(n=parseInt(e.css("left"),10),B(j[1],r,!1,!0),B(k[1],-r,!0)),s=!1,d=!1,void b.$editor.removeClass("non-selected")):void I()}),b.$workflow.append(e)),i.off(".jodit-border-resizer").on("mousemove.jodit-border-resizer","td,th",function(c){var d,f=c.target||c.srcElement;e.hasClass("border_resizer_clicked")||"TD"!==f.tagName&&"TH"!==f.tagName||(d=a(f).offset(),h=a(f).outerWidth(),Math.abs(d.left-c.clientX)<10&&a(f).prev().length||Math.abs(d.left+h-c.clientX)<10&&a(f).next().length?(e.target=a(f),e.$table=a(f).closest("table"),e.targets=[],Math.abs(d.left-c.clientX)<10?(j=p(f),e.targets[0]=q(j[0],j[1]-1),e.targets[1]=f):(j=p(f,!0),e.targets[0]=f,e.targets[1]=q(j[0],j[1]+1)),e.css({display:"block",left:(Math.abs(d.left-c.clientX)<10?b.helper.offset(f).left:b.helper.offset(f).left+h)+"px",top:b.helper.offset(i).top+"px",height:i.outerHeight()+"px"})):e.css({display:"none"}))})},K=function(c,d){var e,f,g,h,j,k,l=c.target||c.srcElement;if(k=o(),a(l).addClass("jodit_focused_cell"),c.shiftKey||n){for(e=s(),g=e[0];g<=e[2];g+=1)for(f=e[1];f<=e[3];f+=1)a(k[g][f]).addClass("jodit_focused_cell");if(!d)return K(c,!0)}else i.find("td,th").not(l).removeClass("jodit_focused_cell"),e=s();r().length&&(h=k[e[2]][e[3]],j=k[e[2]][e[1]],b.events.fire("showPopap",[i.get(0),b.helper.offset(j).left+Math.round((b.helper.offset(h).left+a(h).outerWidth()-b.helper.offset(j).left)/2),b.helper.offset(h).top+a(h).outerHeight()]))};return c&&(J(),i.on("dragstart","td,th",function(a){n&&a.preventDefault()}).on("mousedown","td,th",function(a){K(a),n=!0,f=a.target||a.srcElement}).on("mousemove","td,th",function(b){var c=b.target||b.srcElement;n&&f!==c&&(r().removeClass("jodit_focused_cell"),a(f).addClass("jodit_focused_cell"),b.start(),K(b),console.log("select  - "+b.start()),b.preventDefault())}),a(b.getDocument()).on("keyup.jodit"+g+" mouseup.jodit"+g,function(a){return c&&c.parentNode?void(n?(n=!1,a.stopPropagation()):(i.find("td,th").removeClass("jodit_focused_cell"),b.$editor.find(".jodit_focused_cell").length||b.$editor.find(".jodit_focused_image").length||b.events.fire("hidePopap"))):void I()}),i.length&&a(b.getDocument()).on("keydown.jodit"+g,function(a){if(!c||!c.parentNode)return void I();var d,e,g,h,i=b.selection;if(h=i.current(),(a.which===Jodit.keys.TOP||a.which===Jodit.keys.BOTTOM)&&h&&b.node.hasParent(h,"td|th")&&i.caretAtStartOrEndOfBlock(a.which===Jodit.keys.TOP)){f=b.node.parentNode(h,"td|th"),d=p(f),e=o(),g=d[0];do if(g+=a.which===Jodit.keys.TOP?-1:1,g>=0&&g<e.length&&e[g][d[1]]!==f){i.moveToCaretPosition(e[g][d[1]]),a.preventDefault();break}while(g>0&&g<e.length)}}),b.events.on(c,"execCommand",function(a){switch(a){case"splitv":H();break;case"splitg":G();break;case"merge":D();break;case"empty":r().empty();break;case"bin":i.remove();break;case"binrow":A();break;case"bincolumn":z();break;case"addcolumnafter":case"addcolumnbefore":v("addcolumnbefore"===a);break;case"addrowafter":case"addrowbefore":x("addrowbefore"===a);break;case"bottom":case"middle":
case"top":r().css("vertical-align",a)}b.syncCode()})),d={addColumn:v,addRow:x,appendCell:w,appendRow:y,deleteColumn:z,deleteRow:A,nextCell:E,prevCell:F,splitGorizontal:G,splitVertical:H,mergeSelected:D,destroy:I}},Jodit.modules.TableProcessor.unique=1}(Jodit.modules.Dom),function(){function a(a,b){var c,d;for(c in b)d=b[c],void 0!==d&&(a[c]=d);return a}var b=function(){},c=function(c,d){var e;return e=d&&d.hasOwnProperty("constructor")?d.constructor:function(){return c.apply(this,arguments)},b.prototype=c.prototype,e.prototype=new b,d&&a(e.prototype,d),e.prototype.constructor=e,e.__super__=c.prototype,e},d={version:"0.1.15"};d.Stack=function(){this.commands=[],this.stackPosition=-1,this.savePosition=-1},a(d.Stack.prototype,{execute:function(a){this._clearRedo(),a.execute(),this.commands.push(a),this.stackPosition+=1,this.changed()},undo:function(){this.commands[this.stackPosition]&&this.commands[this.stackPosition].undo(),this.stackPosition-=1,this.changed()},canUndo:function(){return this.stackPosition>=0},redo:function(){this.stackPosition+=1,this.commands[this.stackPosition]&&this.commands[this.stackPosition].redo(),this.changed()},canRedo:function(){return this.stackPosition<this.commands.length-1},save:function(){this.savePosition=this.stackPosition,this.changed()},dirty:function(){return this.stackPosition!=this.savePosition},_clearRedo:function(){this.commands=this.commands.slice(0,this.stackPosition+1)},changed:function(){}}),d.Command=function(a){this.name=a};var e=new Error("override me!");a(d.Command.prototype,{execute:function(){throw e},undo:function(){throw e},redo:function(){this.execute()}}),d.Command.extend=function(a){var b=c(this,a);return b.extend=d.Command.extend,b},"function"==typeof define&&define.amd?define(d):"undefined"!=typeof module&&module.exports?module.exports=d:this.Undo=d}.call(this),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{enableDragAndDropFileToEditor:!0,uploader:{url:"",format:"json",pathVariableName:"path",filesVariableName:"files",prepareData:function(a){return a},isSuccess:function(a){return!a.error},getMsg:function(a){return void 0!==a.msg.join?a.msg.join(" "):a.msg},process:function(a){return{files:a[this.options.uploader.filesVariableName]||[],path:a.path,baseurl:a.baseurl,error:a.error,msg:a.msg}},error:function(a){this.events.fire("errorPopap",[a.getMessage(),"error",4e3])},defaultHandlerSuccess:function(a,b){var c,d=this.options.uploader.filesVariableName;if(a[d]&&a[d].length)for(c=0;c<a[d].length;c+=1)this.selection.insertImage(a.baseurl+a[d][c])},defaultHandlerError:function(a){this.events.fire("errorPopap",[this.options.uploader.getMsg(a)])}}}),Jodit.modules.Uploader=function(b,c){this.parent=b;var d="",e=c||b.options.uploader,f=function(b){if(void 0!==window.FormData){if(b instanceof FormData)return b;if("string"===a.type(b))return b;var c,d=new FormData;for(c in b)b.hasOwnProperty(c)&&d.append(c,b[c]);return d}return b},g=function(c,d){a.ajax({xhr:function(){var a=new window.XMLHttpRequest;return void 0!==window.FormData?a.upload.addEventListener("progress",function(a){if(a.lengthComputable){var c=a.loaded/a.total;c=parseInt(100*c,10),b.$progress_bar.show().css("width",c+"%"),100===c&&b.$progress_bar.hide()}},!1):b.$progress_bar.hide(),a},type:"POST",enctype:void 0!==window.FormData&&"string"!==a.type(c)?"multipart/form-data":"application/x-www-form-urlencoded",data:f(c),url:e.url,cache:!1,contentType:void 0!==window.FormData&&"string"!==a.type(c)?!1:"application/x-www-form-urlencoded; charset=UTF-8",processData:void 0===window.FormData||"string"===a.type(c),dataType:e.format||"json",error:a.proxy(e.error,b),success:d})},h=function(c,f,h,i){var j,k,l,m=c.length;if(!m)return!1;for(k=new FormData,k.append(e.pathVariableName,d),j=0;m>j;j+=1)l=c[j].type.match(/\/([a-z0-9]+)/i)[1].toLowerCase(),k.append(e.filesVariableName+"["+j+"]",c[j],c[j].name||Math.random().toString().replace(".","")+"."+l);e.prepareData(k),i&&i(k),g(k,function(c){if(e.isSuccess.call(b,c))a.isFunction(f||e.defaultHandlerSuccess)&&(f||e.defaultHandlerSuccess).call(b,e.process.call(b,c),c);else if(a.isFunction(h||e.defaultHandlerError))return void(h||e.defaultHandlerError).call(b,c)})},i=function(a){d=a},j=function(a){var b,c=atob(a.split(",")[1]),d=a.split(",")[0].split(":")[1].split(";")[0],e=new ArrayBuffer(c.length),f=new Uint8Array(e);for(b=0;b<c.length;b+=1)f[b]=c.charCodeAt(b);return new Blob([f],{type:d})},k=function(c,d,f){c=a(c),c.on("paste",function(a){var c,e,g,i,k=function(a){a.append("extension",g),a.append("mimetype",e.type)};if(a.clipboardData&&a.clipboardData.files&&a.clipboardData.files.length)return h(a.clipboardData.files,d,f),!1;if(b.browser("ff"))return void(a.clipboardData.types.length||"text/plain"===a.clipboardData.types[0]||(i=b.getDocument().createElement("div"),b.selection.insertNode(i),i.focus(),setTimeout(function(){if(i.firstChild&&i.firstChild.hasAttribute("src")){var a=i.firstChild.getAttribute("src");i.parentNode.removeChild(i),h([j(a)],d,f)}},200)));if(a.clipboardData&&a.clipboardData.items&&a.clipboardData.items.length)for(c=0;c<a.clipboardData.items.length;c+=1)if("file"===a.clipboardData.items[c].kind&&"image/png"===a.clipboardData.items[c].type){e=a.clipboardData.items[c].getAsFile(),g=e.type.match(/\/([a-z0-9]+)/i)[1].toLowerCase(),h([e],d,f,k),a.preventDefault();break}}).on("dragover",function(b){a(this).addClass("draghover"),b.preventDefault()}).on("dragleave dragend",function(b){a(this).removeClass("draghover"),b.preventDefault()}).on("drop",function(g){if(a(this).removeClass("draghover"),g.originalEvent.dataTransfer&&g.originalEvent.dataTransfer.files&&g.originalEvent.dataTransfer.files.length)g.preventDefault(),h(g.originalEvent.dataTransfer.files,d,f);else if(g.originalEvent.dataTransfer&&g.originalEvent.dataTransfer.getData("text/plain")&&"-"!==g.originalEvent.dataTransfer.getData("text/plain")&&c.get(0)===b.editor){if(g.preventDefault(),g.stopPropagation(),b.selection.insertAtPoint(g.originalEvent.clientX,g.originalEvent.clientY)===!1)return!1;if(d||e.defaultHandlerSuccess){var i={};i.baseurl="",i[b.options.uploader.filesVariableName]=[g.originalEvent.dataTransfer.getData("text/plain")],(d||e.defaultHandlerSuccess).call(b,i)}g.preventDefault()}}),c.find("input").on("change",function(){h(this.files,d,f)})},l=function(){b.editor&&b.options.enableDragAndDropFileToEditor&&k(b.$editor)};return{init:l,bind:k,setPath:i}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{beautyHTML:!0}),Jodit.plugins.Beautifier=function(a){a.options.beautyHTML&&a.events.on("beforeSetElementValue",function(b){function c(a){return a=a.replace(/\n\s*\n/g,"\n"),a=a.replace(/^[\s\n]*/,""),a=a.replace(/[\s\n]*$/,""),h=0,a}function d(){var a,b="";for(a=0;h>a;a+=1)b+="	";return b}function e(a,b){var c=a.match(j);return(a.match(n)||c)&&(b=b.replace(/\s*$/,""),b+="\n"),c&&"/"===a.charAt(1)&&(h-=1),"\n"===b.charAt(b.length-1)&&(b+=d()),c&&"/"!==a.charAt(1)&&(h+=1),b+=a,(a.match(o)||a.match(j))&&(b=b.replace(/ *$/,""),b+="\n"),b}function f(a){var b,c="",d="",e=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/;a=a.replace(/\n/g," "),a=a.replace(/\s*=\s*/g,"="),a=a.replace(/[\s]{2,}/g," "),a=a.replace(/^\s+|\s+$/g," "),a.match(/\/$/)&&(d="/",a=a.replace(/\/+$/,""));do b=e.exec(a),b&&(b[2]?c+=b[1].toLowerCase()+"="+b[2]:b[1]&&(c+=b[1].toLowerCase()),c+=" ",a=a.substr(b[0].length));while(b);return c.replace(/\s*$/,"")+d+">"}function g(b){function g(){var a,q;for(a=h;h<b.length&&a+i>h;h+=1){if(j=h,-1===b.substr(h).indexOf("<"))return o+=b.substr(h),void(o=c(o));for(;j<b.length&&"<"!==b.charAt(j);)j+=1;for(h!==j&&(-1===m.indexOf(n)?(p=b.substr(h,j-h),p.match(/^\s+$/)||("\n"===o.charAt(o.length-1)?o+=d():"\n"===p.charAt(0)&&(o+="\n"+d(),p=p.replace(/^\s+/,"")),p=p.replace(/\s+/g," "),o+=p),p.match(/\n/)&&(o+="\n"+d())):o+=b.substr(h,j-h)),k=j;j<b.length&&">"!==b.charAt(j);)j+=1;if(n=b.substr(k,j-k),h=j,"!--"===n.substr(1,3)){if(!n.match(/--$/)){for(;"-->"!==b.substr(j,3);)j+=1;j+=2,n=b.substr(k,j-k),h=j}"\n"!==o.charAt(o.length-1)&&(o+="\n"),o+=d(),o+=n+">\n"}else"!"===n[1]?o=e(n+">",o):"?"===n[1]?o+=n+">\n":(q=n.match(/^<(script|style)/i),q?(q[1]=q[1].toLowerCase(),n=f(n),o=e(n,o),l=String(b.substr(h+1)).toLowerCase().indexOf("</"+q[1]),l&&(p=b.substr(h+1,l),h+=l,o+=p)):(n=f(n),o=e(n,o)))}h<b.length?g():c(o)}var h=0,j=0,k=null,l=null,n="",o="",p="";return g(),a.helper.clear(o)}var h=0,i=100,j=["blockquote","div","dl","fieldset","form","frameset","map","ol","p","select","td","th","tr","ul"],k=["area","body","head","hr","i?frame","link","meta","noscript","style","table","tbody","thead","tfoot"],l=["li","dt","dt","h[1-6]","option","script"],m=["<pre>"],n=new RegExp("^<(/?"+k.join("|/?")+"|"+l.join("|")+")[ >]"),o=new RegExp("^<(br|/?"+k.join("|/?")+"|/"+l.join("|/")+")[ >]");j=new RegExp("^</?("+j.join("|")+")[ >]"),b.value=g(b.value)})}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{showPopapErrors:!0,showPopapErrorTime:3e3,showPopapErrorOffsetPx:3}),Jodit.plugins.ErrorPopaps=function(b){if(b.options.showPopapErrors){var c,d=a('<div class="jodit_error_box_for_popaps"></div>'),e=function(){c=5,d.children().each(function(d,e){a(e).css("bottom",c+"px"),c+=a(e).outerHeight()+b.options.showPopapErrorOffsetPx})};b.$workflow.append(d),b.events.on("errorPopap",function(c,f,g){var h=a('<div class="active '+(f||"")+'">'+c+"</div>");d.append(h),e(),setTimeout(function(){h.removeClass("active"),setTimeout(function(){h.remove(),e()},300)},g||b.options.showPopapErrorTime)})}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{image:{openOnDblClick:!0,editSrc:!0,editTitle:!0,editAlt:!0,editLink:!0,editSize:!0,editMargins:!0,editClass:!0,editStyle:!0,editId:!0,editAlign:!0,showPreview:!0,selectimageAfterClose:!0}}),Jodit.plugins.image=function(b){Jodit.plugins.image.open=function(c){var d,e=this,f=new Jodit.modules.Dialog(b),g={remove:a('<a href="javascript:void(0)" class="jodit_button"><i class="icon icon-bin"></i> Delete</a>')},h=a('<form class="jodit_properties"><div class="jodit_row"><div class="jodit_col5"><div class="jodit_properties_view_box"><div style="'+(b.options.image.showPreview?"":"display:none")+'" class="jodit_properties_image_view"><img id="imageViewSrc" src="" alt=""/></div><div style="'+(b.options.image.editSize?"":"display:none")+'" class="jodit_form_group jodit_properties_image_sizes"><input type="number" id="imageWidth"/><a class="jodit_lock_helper jodit_lock_size" href="javascript:void(0)"><i class="icon icon-lock"></i></a><input type="number" id="imageHeight"/></div></div></div><div id="tabsbox" class="jodit_col7"></div></div></form>'),i=a('<div style="'+(b.options.image.editMargins?"":"display:none")+'" class="jodit_form_group"><label for="marginTop">'+b.i18n("Margins")+'</label><div class="jodit_input_group"><input class="jodit_col2 margins" type="text" placeholder="'+b.i18n("top")+'" id="marginTop"/><a style="width: 26px;" class="jodit_lock_helper jodit_lock_margin" href="javascript:void(0)"><i class="icon icon-lock"></i></a><input disabled="true" style="margin-left:-1px" class="jodit_col3 margins" type="text" placeholder="'+b.i18n("right")+'" id="marginRight"/><input disabled="true" style="margin-left:-1px" class="jodit_col3 margins" type="text" placeholder="'+b.i18n("bottom")+'" id="marginBottom"/><input disabled="true" style="margin-left:-1px" class="jodit_col3 margins" type="text" placeholder="'+b.i18n("left")+'" id="marginLeft"/></div></div><div style="'+(b.options.image.editStyle?"":"display:none")+'" class="jodit_form_group"><label for="style">'+b.i18n("Styles")+'</label><input type="text" id="style"/></div><div style="'+(b.options.image.editClass?"":"display:none")+'" class="jodit_form_group"><label for="classes">'+b.i18n("Classes")+'</label><input type="text" id="classes"/></div><div style="'+(b.options.image.editId?"":"display:none")+'" class="jodit_form_group"><label for="id">Id</label><input type="text" id="id"/></div><div style="'+(b.options.image.editAlign?"":"display:none")+'" class="jodit_form_group"><label for="align">'+b.i18n("Align")+'</label><select class="select"  id="align"><option value="">'+b.i18n("--Not Set--")+'</option><option value="left">'+b.i18n("Left")+'</option><option value="center">'+b.i18n("Center")+'</option><option value="right">'+b.i18n("Right")+"</option></optgroup></select></div>"),j=a('<div style="'+(b.options.image.editSrc?"":"display:none")+'" class="jodit_form_group"><label for="imageSrc">'+b.i18n("Src")+'</label><div class="jodit_input_group"><input type="text" id="imageSrc"/><a class="jodit_button jodit_rechange" href="javascript:void(0)"><i class="icon icon-image"></i></a></div></div><div style="'+(b.options.image.editTitle?"":"display:none")+'" class="jodit_form_group"><label for="imageTitle">'+b.i18n("Title")+'</label><input type="text" id="imageTitle"/></div><div style="'+(b.options.image.editAlt?"":"display:none")+'" class="jodit_form_group"><label for="imageAlt">'+b.i18n("Alternative")+'</label><input type="text" id="imageAlt"/></div><div style="'+(b.options.image.editLink?"":"display:none")+'" class="jodit_form_group"><label for="imageLink">'+b.i18n("Link")+'</label><input type="text" id="imageLink"/></div><div style="'+(b.options.image.editLink?"":"display:none")+'" class="jodit_form_group"><input type="checkbox" id="imageLinkOpenInNewTab"/> '+b.i18n("Open link in new tab")+"</div>"),k=e.naturalWidth/e.naturalHeight||1,l=0,m=j.find(".jodit_rechange"),n=h.find("#imageWidth"),o=h.find("#imageHeight"),p=function(){e.style["float"]&&-1!==["left","right"].indexOf(e.style["float"].toLowerCase())?h.find("#align").val(a(e).css("float")):"block"===a(e).css("display")&&"auto"===e.style.marginLeft&&"auto"===e.style.marginRight&&h.find("#align").val("center")},q=function(){h.find("#id").val(e.getAttribute("id"))},r=function(){h.find("#style").val(e.getAttribute("style"))},s=function(){h.find("#classes").val((e.getAttribute("class")||"").replace(/jodit_focused_image[\s]*/,""))},t=function(){if(b.options.image.editMargins){var c=!1;h.find(".margins").each(function(){var b=e.style[this.id];b&&((/^[0-9]+$/.test(b)||/^[0-9]+px$/i.test(b))&&(b=parseInt(b,10)),a(this).val(b||""),c||"marginTop"===this.id||a(this).val()===h.find("#marginTop").val()||(h.find(".jodit_lock_margin>i").addClass("icon-unlock"),h.find(".margins").removeAttr("disabled"),c=!0))})}},u=function(){n.val(a(e).outerWidth()),o.val(a(e).outerHeight())},v=function(a){e.hasAttribute("title")&&h.find("#imageTitle").val(e.getAttribute("title")),e.hasAttribute("alt")&&h.find("#imageAlt").val(e.getAttribute("alt")),b.node.hasParent(e,"a")&&(h.find("#imageLink").val(b.node.parentNode(e,"a").getAttribute("href")),h.find("#imageLinkOpenInNewTab").get(0).checked="_blank"===b.node.parentNode(e,"a").getAttribute("target"))},w=function(){h.find("#imageSrc").val(e.getAttribute("src")),h.find("#imageViewSrc").attr("src",e.getAttribute("src"))},x=function(){w(),v(),u(),t(),s(),q(),p(),r()};return h.find("#tabsbox").html(b.form.buildTabs(function(){var a={};return a[b.i18n("Image")]=j,a[b.i18n("Advansed")]=i,a}())),x(),b.events.on(f,"afterClose",function(){b.closeToolbarPopap(),f.destroy(),e.parentNode&&b.options.image.selectimageAfterClose&&b.selection.selectImage(e)}),g.remove.on("click",function(){e.parentNode.removeChild(e),f.close()}),m.on("mousedown",function(c){m.toggleClass("active"),b.$toolbar_popap.show(),m.append(b.$toolbar_popap),b.$toolbar_popap.addClass("jodit_right"),b.$toolbar_popap.empty(),b.$toolbar_popap.html(b.form.imageSelector({upload:function(a){var c=this.options.uploader.filesVariableName;a[c]&&a[c].length&&e.setAttribute("src",a.baseurl+a[c][0]),x(),b.closeToolbarPopap()},filebrowser:function(c){c&&c.files&&a.isArray(c.files)&&c.files.length&&(e.setAttribute("src",c.files[0]),b.closeToolbarPopap(),x())}},e)),c.stopPropagation()}),h.find(".jodit_lock_helper").on("click",function(){a(this).find("i").toggleClass("icon-unlock"),n.triggerHandler("change")}),h.find(".jodit_lock_helper.jodit_lock_margin").on("click",function(){a(this).find("i").hasClass("icon-unlock")?h.find(".margins").not("#marginTop").removeAttr("disabled"):h.find(".margins").not("#marginTop").attr("disabled",!0)}),h.find("#imageWidth,#imageHeight").on("change keydown mousedown paste",function(a){h.find(".jodit_lock_size>i").hasClass("icon-unlock")||(clearTimeout(l),l=setTimeout(function(){var b=parseInt(n.val(),10),c=parseInt(o.val(),10);"imageWidth"===a.target.id?o.val(Math.round(b/k)):n.val(Math.round(c*k))},100))}),f.setTitle([b.i18n("Image properties"),g.remove]),f.setContent(h),d=a('<a href="javascript:void(0)" style="float:right;" class="jodit_button"><i class="icon icon-cancel"></i>&nbsp;'+b.i18n("Cancel")+"</a>").on("click",function(){f.close()}),f.setFooter([a('<a href="javascript:void(0)" style="float:left;" class="jodit_button"><i class="icon icon-check"></i>&nbsp;'+b.i18n("Ok")+"</a>").on("click",function(){function c(a){return/^[0-9]+$/.test(a)?a+"px":a}function d(){"block"===a(e).css("display")&&a(e).css("display",""),"auto"===e.style.marginLeft&&"auto"===e.style.marginRight&&(e.style.marginLeft="",e.style.marginRight="")}var g;return b.options.image.editStyle&&(h.find("#style").val()?e.setAttribute("style",h.find("#style").val()):e.removeAttribute("style")),h.find("#imageSrc").val()?(e.setAttribute("src",h.find("#imageSrc").val()),h.find("#imageTitle").val()?e.setAttribute("title",h.find("#imageTitle").val()):e.removeAttribute("title"),h.find("#imageAlt").val()?e.setAttribute("alt",h.find("#imageAlt").val()):e.removeAttribute("alt"),h.find("#imageLink").val()?(b.node.hasParent(e,"a")||b.node.wrap(e,"a"),g=b.node.parentNode(e,"a"),g.setAttribute("href",h.find("#imageLink").val()),h.find("#imageLinkOpenInNewTab").get(0).checked?g.setAttribute("target","_blank"):g.removeAttribute("target")):b.node.hasParent(e,"a")&&(g=b.node.parentNode(e,"a"),g.parentNode.replaceChild(e,g)),a(e).css({width:n.val()+"px",height:o.val()+"px"}),b.options.image.editMargins&&(h.find(".jodit_lock_margin>i").hasClass("icon-unlock")?h.find(".margins").each(function(){a(e).css(this.id,c(a(this).val()))}):a(e).css("margin",c(h.find("#marginTop").val()))),b.options.image.editClass&&(h.find("#classes").val()?e.setAttribute("class",h.find("#classes").val()):e.removeAttribute("class")),b.options.image.editId&&(h.find("#id").val()?e.setAttribute("id",h.find("#id").val()):e.removeAttribute("id")),b.options.image.editAlign&&(h.find("#align").val()?-1!==["right","left"].indexOf(h.find("#align").val().toLowerCase())?(a(e).css("float",h.find("#align").val()),d()):a(e).css("float","").css({display:"block","margin-left":"auto","margin-right":"auto"}):(a(e).css("float")&&-1!==["right","left"].indexOf(a(e).css("float").toLowerCase())&&a(e).css("float",""),d())),void f.close()):(e.parentNode.removeChild(e),void f.close())}),d]),f.setSize(500),f.open(),c&&c.preventDefault(),!1},b.options.image.openOnDblClick?b.$editor.on("dblclick","img",Jodit.plugins.image.open):b.$editor.on("dblclick","img",function(a){b.selection.selectImage(this)});var c=function(a){a.originalEvent.dataTransfer.dropEffect="move",a.originalEvent.dataTransfer.setData("text/plain",""),a.preventDefault()};b.$editor.on("dragenter",c).on("dragover",function(a){b.browser("mse")&&c(a)}).on("drop",function(c){var d,e,f=b.$editor.find("img.jodit_focused_image").get(0);if(f){if(c.preventDefault(),c.stopPropagation(),b.selection.insertAtPoint(c.originalEvent.clientX,c.originalEvent.clientY)===!1)return!1;e="A"!==f.parentNode.tagName||f.parentNode.textContent.length?f:f.parentNode,d=b.$editor.find(".jodit_marker"),d.length&&b.node.replace(d.get(0),e,!1,!0),a(f).removeClass("jodit_focused_image"),b.selection.unmark(),b.events.fire("hidePopap")}})}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{cleanHTML:{replaceNBSP:!0}}),Jodit.plugins.cleanHTML=function(b){b.events.on("afterCommand",function(c){var d,e,f,g=b.selection;switch(c){case"insertHorizontalRule":d=b.$editor.find("hr[id=null]").get(0),d&&(e=b.node.findSibling(d,b.editor,"firstChild","nextSibling",!1,b.node.isBlock),e||(e=b.enterkey.createNewBlock(b.options.enter),a(d).after(e)),g.moveToCursorPosition(e));break;case"removeFormat":if(e=g.current(),f=function(a){return a.nodeType===Node.ELEMENT_NODE?(a.hasAttribute("style")&&a.removeAttribute("style"),"FONT"===a.tagName&&(b.node.each(a,f),a=g.replace(a,"span")),a.normalize&&a.normalize()):b.options.cleanHTML.replaceNBSP&&a.nodeType===Node.TEXT_NODE&&a.nodeValue.match(Jodit.NBSP_REG_EXP)&&(a.nodeValue=a.nodeValue.replace(Jodit.NBSP_REG_EXP," ")),a},b.observer&&b.observer.block(!0),g.isCollapsed())for(;e&&e.nodeType!==Node.ELEMENT_NODE&&e!==b.editor;)e=f(e),e=e.parentNode;else g.each(f);b.observer&&b.observer.block(!1)}})}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{codeMirror:!0,codeMirrorOptions:{autofocus:!1,lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeMirrorUrlJS:"//cdnjs.cloudflare.com/ajax/libs/codemirror/5.13.4/codemirror.min.js",codeMirrorUrlCSS:"//cdnjs.cloudflare.com/ajax/libs/codemirror/5.13.4/codemirror.min.css",codeMirrorXMLUrl:"//cdnjs.cloudflare.com/ajax/libs/codemirror/5.13.4/mode/xml/xml.min.js"}),Jodit.plugins.codeMirror=function(b){if(b.options.codeMirror){var c,d=!1,e="jodit_codemirror",f=function(){!d&&c&&b.getRealMode()===Jodit.MODE_TEXTAREA&&(b.val(c.getValue()),b.$area.trigger("updatestack"))},g=function(a,b){var c=document.createElement("script");c.className=e,c.type="text/javascript",c.src=a,void 0!==b&&(c.onload=b),document.body.appendChild(c)};b.events.on("afterSetAreaValue updateStackEditor",function(){if(("updateStackEditor"===b.events.current()||b.getMode()===Jodit.MODE_SPLIT&&b.getRealMode()===Jodit.MODE_WYSIWYG)&&c){var a=c.getValue(),e=b.getAreaValue();a!==e&&(d=!0,c.setValue(e),d=!1)}}),b.events.on("beforeSetMode afterResize",f),b.events.on("afterResize changeElementValue",function(){c&&b.getMode()===Jodit.MODE_SPLIT&&c.setSize(null,b.$editor.outerHeight())}),b.events.on("afterSetMode afterResize",function(){if(-1!==a.inArray(b.getMode(),[Jodit.MODE_TEXTAREA,Jodit.MODE_SPLIT])){var d=function(){void 0===c&&(void 0!==window.CodeMirror&&void 0!==window.CodeMirror.modes&&void 0!==window.CodeMirror.modes.xml?(c=window.CodeMirror.fromTextArea(b.area,b.options.codeMirrorOptions),c.on("change",f)):setTimeout(d,300)),c&&(c.setSize(null,b.$editor.outerHeight()),c.setValue(b.getElementValue()),b.options.autofocus&&c.focus(),c.refresh(),c.clearHistory())};d()}}),void 0!==window.CodeMirror||a("script."+e).length||(g(b.options.codeMirrorUrlJS,function(){g(b.options.codeMirrorXMLUrl)}),a("body").append('<link rel="stylesheet" href="'+b.options.codeMirrorUrlCSS+'">'))}}}(Jodit.modules.Dom),function(a){"use strict";Jodit.defaultOptions=a.extend(!0,Jodit.defaultOptions,{cleanWhitespace:!0,wrapSingleTextNodes:!0,removeEmptyNodes:!0}),Jodit.plugins.textProcessor=function(b){(b.options.wrapSingleTextNodes||b.options.removeEmptyNodes||b.options.cleanWhitespace)&&b.events.on("changeElementValue afterInit",function(){if(b.getRealMode()===Jodit.MODE_WYSIWYG){var c,d,e="",f="",g=[],h=0;if(b.observer.block(1),b.selection.restore(),b.selection.save(),b.options.wrapSingleTextNodes||b.options.removeEmptyNodes){for(c=[].slice.call(b.editor.childNodes),h=0;c&&h<c.length;h+=1)if(b.node.isBlock(c[h])&&""===c[h].textContent.length&&b.options.removeEmptyNodes)c[h].parentNode.removeChild(c[h]);else if(b.options.wrapSingleTextNodes)if(c[h].nodeType===Node.ELEMENT_NODE&&"img"===c[h].nodeName.toLowerCase())b.node.wrap(c[h],b.enterkey.createNewBlock(b.options.enter,!1,""));else if(c[h].nodeType!==Node.TEXT_NODE||0===b.helper.trim(c[h].nodeValue).length&&!f)"SPAN"===c[h].tagName&&"jodit_marker"===c[h].className?(g.push(c[h]),f+=c[h].outerHTML):f.length?(b.node.replace(g[0],b.enterkey.createNewBlock(b.options.enter,!1,f),!1,!0),a(g).remove(),f="",g=[]):Jodit.INVISIBLE_SPACE_REG_EXP.test(c[h].nodeValue)&&c[h].parentNode.removeChild(c[h]);else for(f+=c[h].nodeValue,g.push(c[h]),d=c[h].nextSibling;d&&"SPAN"===d.tagName&&"jodit_marker"===d.className;)g.push(d),f+=a(d).prop("outerHTML"),d=d.nextSibling,h+=1;f.length&&(b.node.replace(g[0],b.enterkey.createNewBlock(b.options.enter,!1,f),!1,!0),a(g).remove())}if(b.options.cleanWhitespace)for(d=b.editor.firstChild;d;)d.nodeType===Node.TEXT_NODE&&"jodit_marker"!==d.parentNode.className&&(e=d.nodeValue,f=e.replace(Jodit.INVISIBLE_SPACE_REG_EXP,""),f!==e&&f.length&&(d.nodeValue=f)),d=b.node.findSibling(d,b.editor,"firstChild","nextSibling",!1);b.selection.restore(),b.observer.block(0),b.syncCode()}})}}(Jodit.modules.Dom);