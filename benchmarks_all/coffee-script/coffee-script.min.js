(function(){var j,m,f,k,e,t,g,q,n,p,r,a,d,l,h,o,s,b,u={}.hasOwnProperty,c=[].indexOf||function(x){for(var w=0,v=this.length;w<v;w++){if(w in this&&this[w]===x){return w}}return -1};g=require("fs");s=require("vm");l=require("path");j=require("./lexer").Lexer;d=require("./parser").parser;n=require("./helpers");m=require("./sourcemap");exports.VERSION="1.10.0";exports.FILE_EXTENSIONS=[".coffee",".litcoffee",".coffee.md"];exports.helpers=n;b=function(i){return function(y,w){var x,v;if(w==null){w={}}try{return i.call(this,y,w)}catch(v){x=v;if(typeof y!=="string"){throw x}throw n.updateSyntaxError(x,y,w.filename)}}};exports.compile=k=b(function(x,L){var K,D,J,F,E,H,B,A,w,C,v,I,z,y,G;I=n.merge,F=n.extend;L=F({},L);if(L.sourceMap){v=new m}G=a.tokenize(x,L);L.referencedVars=(function(){var O,M,N;N=[];for(O=0,M=G.length;O<M;O++){y=G[O];if(y.variable){N.push(y[1])}}return N})();H=d.parse(G).compileToFragments(L);J=0;if(L.header){J+=1}if(L.shiftLine){J+=1}D=0;w="";for(A=0,C=H.length;A<C;A++){E=H[A];if(L.sourceMap){if(E.locationData&&!/^[;\s]*$/.test(E.code)){v.add([E.locationData.first_line,E.locationData.first_column],[J,D],{noReplace:true})}z=n.count(E.code,"\n");J+=z;if(z){D=E.code.length-(E.code.lastIndexOf("\n")+1)}else{D+=E.code.length}}w+=E.code}if(L.header){B="Generated by CoffeeScript "+this.VERSION;w="// "+B+"\n"+w}if(L.sourceMap){K={js:w};K.sourceMap=v;K.v3SourceMap=v.generate(L,x);return K}else{return w}});exports.tokens=b(function(v,i){return a.tokenize(v,i)});exports.nodes=b(function(v,i){if(typeof v==="string"){return d.parse(a.tokenize(v,i))}else{return d.parse(v)}});exports.run=function(y,w){var z,v,i,x;if(w==null){w={}}i=require.main;i.filename=process.argv[1]=w.filename?g.realpathSync(w.filename):".";i.moduleCache&&(i.moduleCache={});v=w.filename?l.dirname(g.realpathSync(w.filename)):g.realpathSync(".");i.paths=require("module")._nodeModulePaths(v);if(!n.isCoffee(i.filename)||require.extensions){z=k(y,w);y=(x=z.js)!=null?x:z}return i._compile(y,i.filename)};exports["eval"]=function(w,z){var O,B,N,J,L,x,I,K,M,H,G,A,F,E,D,y,C;if(z==null){z={}}if(!(w=w.trim())){return}J=(A=s.Script.createContext)!=null?A:s.createContext;x=(F=s.isContext)!=null?F:function(i){return z.sandbox instanceof J().constructor};if(J){if(z.sandbox!=null){if(x(z.sandbox)){y=z.sandbox}else{y=J();E=z.sandbox;for(K in E){if(!u.call(E,K)){continue}C=E[K];y[K]=C}}y.global=y.root=y.GLOBAL=y}else{y=global}y.__filename=z.filename||"eval";y.__dirname=l.dirname(y.__filename);if(!(y!==global||y.module||y.require)){O=require("module");y.module=B=new O(z.modulename||"eval");y.require=N=function(i){return O._load(i,B,true)};B.filename=y.__filename;D=Object.getOwnPropertyNames(require);for(L=0,M=D.length;L<M;L++){G=D[L];if(G!=="paths"&&G!=="arguments"&&G!=="caller"){N[G]=require[G]}}N.paths=B.paths=O._nodeModulePaths(process.cwd());N.resolve=function(i){return O._resolveFilename(i,B)}}}H={};for(K in z){if(!u.call(z,K)){continue}C=z[K];H[K]=C}H.bare=true;I=k(w,H);if(y===global){return s.runInThisContext(I)}else{return s.runInContext(I,y)}};exports.register=function(){return require("./register")};if(require.extensions){h=this.FILE_EXTENSIONS;for(p=0,r=h.length;p<r;p++){e=h[p];if((f=require.extensions)[e]==null){f[e]=function(){throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require "+e+" files.")}}}}exports._compileFile=function(i,A){var y,x,w,v,z;if(A==null){A=false}v=g.readFileSync(i,"utf8");z=v.charCodeAt(0)===65279?v.substring(1):v;try{y=k(z,{filename:i,sourceMap:A,literate:n.isLiterate(i)})}catch(w){x=w;throw n.updateSyntaxError(x,z,i)}return y};a=new j;d.lexer={lex:function(){var i,v;v=d.tokens[this.pos++];if(v){i=v[0],this.yytext=v[1],this.yylloc=v[2];d.errorToken=v.origin||v;this.yylineno=this.yylloc.first_line}else{i=""}return i},setInput:function(i){d.tokens=i;return this.pos=0},upcomingInput:function(){return""}};d.yy=require("./nodes");d.yy.parseError=function(y,v){var x,B,i,A,w,z;w=v.token;A=d.errorToken,z=d.tokens;B=A[0],i=A[1],x=A[2];i=(function(){switch(false){case A!==z[z.length-1]:return"end of input";case B!=="INDENT"&&B!=="OUTDENT":return"indentation";case B!=="IDENTIFIER"&&B!=="NUMBER"&&B!=="STRING"&&B!=="STRING_START"&&B!=="REGEX"&&B!=="REGEX_START":return B.replace(/_START$/,"").toLowerCase();default:return n.nameWhitespaceCharacter(i)}})();return n.throwSyntaxError("unexpected "+i,x)};t=function(v,w){var x,y,B,z,C,G,A,H,F,i,E,D;z=void 0;B="";if(v.isNative()){B="native"}else{if(v.isEval()){z=v.getScriptNameOrSourceURL();if(!z){B=(v.getEvalOrigin())+", "}}else{z=v.getFileName()}z||(z="<anonymous>");H=v.getLineNumber();y=v.getColumnNumber();i=w(z,H,y);B=i?z+":"+i[0]+":"+i[1]:z+":"+H+":"+y}C=v.getFunctionName();G=v.isConstructor();A=!(v.isToplevel()||G);if(A){F=v.getMethodName();D=v.getTypeName();if(C){E=x="";if(D&&C.indexOf(D)){E=D+"."}if(F&&C.indexOf("."+F)!==C.length-F.length-1){x=" [as "+F+"]"}return""+E+C+x+" ("+B+")"}else{return D+"."+(F||"<anonymous>")+" ("+B+")"}}else{if(G){return"new "+(C||"<anonymous>")+" ("+B+")"}else{if(C){return C+" ("+B+")"}else{return B}}}};o={};q=function(v){var w,i;if(o[v]){return o[v]}if(i=l!=null?l.extname(v):void 0,c.call(exports.FILE_EXTENSIONS,i)<0){return}w=exports._compileFile(v,true);return o[v]=w.sourceMap};Error.prepareStackTrace=function(v,i){var y,x,w;w=function(A,z,B){var C,D;D=q(A);if(D){C=D.sourceLocation([z-1,B-1])}if(C){return[C[0]+1,C[1]+1]}else{return null}};x=(function(){var A,z,B;B=[];for(A=0,z=i.length;A<z;A++){y=i[A];if(y.getFunction()===exports.run){break}B.push("  at "+(t(y,w)))}return B})();return(v.toString())+"\n"+(x.join("\n"))+"\n"}}).call(this);