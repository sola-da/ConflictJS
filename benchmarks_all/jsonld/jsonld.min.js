!function(){var e="undefined"!=typeof process&&process.versions&&process.versions.node,t=!e&&("undefined"!=typeof window||"undefined"!=typeof self);t&&"undefined"==typeof global&&("undefined"!=typeof window?global=window:"undefined"!=typeof self?global=self:"undefined"!=typeof $&&(global=$));var n=function(n){function r(){}function a(e){for(var t=[],n=Object.keys(e).sort(),r=0;r<n.length;++r){var a=n[r],o=e[a];A(o)||(o=[o]);for(var i=0;i<o.length;++i){var l=o[i];if(null!==l){if(!J(l))throw new Se("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":l,"@language":a.toLowerCase()})}}}return t}function o(e,t){if(A(t))for(var n=0;n<t.length;++n)t[n]=o(e,t[n]);else if(Q(t))t["@list"]=o(e,t["@list"]);else if(T(t)){G(t)&&(t["@id"]=e.getId(t["@id"]));for(var r=Object.keys(t).sort(),a=0;a<r.length;++a){var i=r[a];"@id"!==i&&(t[i]=o(e,t[i]))}}return t}function i(e,t,r){if(null===r||void 0===r)return null;var a=D(e,t,{vocab:!0});if("@id"===a)return D(e,r,{base:!0});if("@type"===a)return D(e,r,{vocab:!0,base:!0});var o=n.getContextValue(e,t,"@type");if("@id"===o||"@graph"===a&&J(r))return{"@id":D(e,r,{base:!0})};if("@vocab"===o)return{"@id":D(e,r,{vocab:!0,base:!0})};if(_(a))return r;var i={};if(null!==o)i["@type"]=o;else if(J(r)){var l=n.getContextValue(e,t,"@language");null!==l&&(i["@language"]=l)}return-1===["boolean","number","string"].indexOf(typeof r)&&(r=r.toString()),i["@value"]=r,i}function l(e,t,n){for(var r=[],a=Object.keys(e).sort(),o=0;o<a.length;++o)for(var i=a[o],l=e[i],c=Object.keys(l).sort(),d=0;d<c.length;++d){var f=c[d],p=l[f];if("@type"===f)f=we;else if(_(f))continue;for(var h=0;h<p.length;++h){var v=p[h],g={};if(g.type=0===i.indexOf("_:")?"blank node":"IRI",g.value=i,$(i)){var y={};if(y.type=0===f.indexOf("_:")?"blank node":"IRI",y.value=f,$(f)&&("blank node"!==y.type||n.produceGeneralizedRdf))if(Q(v))u(v["@list"],t,g,y,r);else{var m=s(v);m&&r.push({subject:g,predicate:y,object:m})}}}}return r}function u(e,t,n,r,a){for(var o={type:"IRI",value:me},i={type:"IRI",value:xe},l={type:"IRI",value:be},u=0;u<e.length;++u){var c=e[u],d={type:"blank node",value:t.getId()};a.push({subject:n,predicate:r,object:d}),n=d,r=o;var f=s(c);f&&a.push({subject:n,predicate:r,object:f}),r=i}a.push({subject:n,predicate:r,object:l})}function s(e){var t={};if(X(e)){t.type="literal";var n=e["@value"],r=e["@type"]||null;V(n)?(t.value=n.toString(),t.datatype=r||fe):F(n)||r===pe?(F(n)||(n=parseFloat(n)),t.value=n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=r||pe):P(n)?(t.value=n.toFixed(0),t.datatype=r||he):"@language"in e?(t.value=n,t.datatype=r||Le,t.language=e["@language"]):(t.value=n,t.datatype=r||ve)}else{var a=T(e)?e["@id"]:e;t.type=0===a.indexOf("_:")?"blank node":"IRI",t.value=a}return"IRI"!==t.type||$(t.value)?t:null}function c(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var n={"@value":e.value};if(e.language)n["@language"]=e.language;else{var r=e.datatype;if(r||(r=ve),t){if(r===fe)"true"===n["@value"]?n["@value"]=!0:"false"===n["@value"]&&(n["@value"]=!1);else if(B(n["@value"]))if(r===he){var a=parseInt(n["@value"],10);a.toFixed(0)===n["@value"]&&(n["@value"]=a)}else r===pe&&(n["@value"]=parseFloat(n["@value"]));-1===[fe,he,pe,ve].indexOf(r)&&(n["@type"]=r)}else r!==ve&&(n["@type"]=r)}return n}function d(e,t){for(var n=["subject","predicate","object"],r=0;r<n.length;++r){var a=n[r];if(e[a].type!==t[a].type||e[a].value!==t[a].value)return!1}return e.object.language!==t.object.language?!1:e.object.datatype===t.object.datatype}function f(e,t,r,a,o,i){if(A(e))for(var l=0;l<e.length;++l)f(e[l],t,r,a,void 0,i);else{if(!T(e))return void(i&&i.push(e));if(X(e)){if("@type"in e){var u=e["@type"];0===u.indexOf("_:")&&(e["@type"]=u=a.getId(u))}return void(i&&i.push(e))}if("@type"in e)for(var s=e["@type"],l=0;l<s.length;++l){var u=s[l];0===u.indexOf("_:")&&a.getId(u)}M(o)&&(o=G(e)?a.getId(e["@id"]):e["@id"]),i&&i.push({"@id":o});var c=t[r],d=c[o]=c[o]||{};d["@id"]=o;for(var p=Object.keys(e).sort(),h=0;h<p.length;++h){var v=p[h];if("@id"!==v)if("@reverse"!==v)if("@graph"!==v)if("@type"!==v&&_(v)){if("@index"===v&&v in d&&(e[v]!==d[v]||e[v]["@id"]!==d[v]["@id"]))throw new Se("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:d});d[v]=e[v]}else{var g=e[v];if(0===v.indexOf("_:")&&(v=a.getId(v)),0!==g.length)for(var y=0;y<g.length;++y){var m=g[y];if("@type"===v&&(m=0===m.indexOf("_:")?a.getId(m):m),z(m)||H(m)){var x=G(m)?a.getId(m["@id"]):m["@id"];n.addValue(d,v,{"@id":x},{propertyIsArray:!0,allowDuplicate:!1}),f(m,t,r,a,x)}else if(Q(m)){var b=[];f(m["@list"],t,r,a,o,b),m={"@list":b},n.addValue(d,v,m,{propertyIsArray:!0,allowDuplicate:!1})}else f(m,t,r,a,o),n.addValue(d,v,m,{propertyIsArray:!0,allowDuplicate:!1})}else n.addValue(d,v,[],{propertyIsArray:!0})}else{o in t||(t[o]={});var w="@merged"===r?r:o;f(e[v],t,w,a)}else{var j={"@id":o},k=e["@reverse"];for(var I in k)for(var L=k[I],O=0;O<L.length;++O){var E=L[O],S=E["@id"];G(E)&&(S=a.getId(S)),f(E,t,r,a,S),n.addValue(c[S],I,j,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function p(e){for(var t=e["@default"],n=Object.keys(e).sort(),r=0;r<n.length;++r){var a=n[r];if("@default"!==a){var o=e[a],i=t[a];i?"@graph"in i||(i["@graph"]=[]):t[a]=i={"@id":a,"@graph":[]};for(var l=i["@graph"],u=Object.keys(o).sort(),s=0;s<u.length;++s){var c=o[u[s]];H(c)||l.push(c)}}}return t}function h(e,t,n,r,a){m(n),n=n[0];for(var o=e.options,i={embed:y(n,o,"embed"),explicit:y(n,o,"explicit"),requireAll:y(n,o,"requireAll")},l=x(e,t,n,i),u=Object.keys(l).sort(),s=0;s<u.length;++s){var c=u[s],d=l[c];if("@link"===i.embed&&c in e.link)j(r,a,e.link[c]);else{null===a&&(e.uniqueEmbeds={});var f={};if(f["@id"]=c,e.link[c]=f,"@never"===i.embed||g(d,e.subjectStack))j(r,a,f);else{"@last"===i.embed&&(c in e.uniqueEmbeds&&w(e,c),e.uniqueEmbeds[c]={parent:r,property:a}),e.subjectStack.push(d);for(var p=Object.keys(d).sort(),b=0;b<p.length;b++){var k=p[b];if(_(k))f[k]=W(d[k]);else if(!i.explicit||k in n)for(var I=d[k],L=0;L<I.length;++L){var O=I[L];if(Q(O)){var E={"@list":[]};j(f,k,E);var S=O["@list"];for(var D in S)if(O=S[D],H(O)){var N=k in n?n[k][0]["@list"]:v(i);h(e,[O["@id"]],N,E,"@list")}else j(E,"@list",W(O))}else if(H(O)){var N=k in n?n[k]:v(i);h(e,[O["@id"]],N,f,k)}else j(f,k,W(O))}}for(var p=Object.keys(n).sort(),b=0;b<p.length;++b){var k=p[b];if(!_(k)){var C=n[k][0],R=y(C,o,"omitDefault");if(!(R||k in f)){var T="@null";"@default"in C&&(T=W(C["@default"])),A(T)||(T=[T]),f[k]=[{"@preserve":T}]}}}j(r,a,f),e.subjectStack.pop()}}}}function v(e){var t={};for(var n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function g(e,t){for(var n=t.length-1;n>=0;--n)if(t[n]["@id"]===e["@id"])return!0;return!1}function y(e,t,n){var r="@"+n,a=r in e?e[r][0]:t[n];return"embed"===n&&(a===!0?a="@last":a===!1?a="@never":"@always"!==a&&"@never"!==a&&"@link"!==a&&(a="@last")),a}function m(e){if(!A(e)||1!==e.length||!T(e[0]))throw new Se("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function x(e,t,n,r){for(var a={},o=0;o<t.length;++o){var i=t[o],l=e.subjects[i];b(l,n,r)&&(a[i]=l)}return a}function b(e,t,r){if("@type"in t&&(1!==t["@type"].length||!T(t["@type"][0]))){for(var a=t["@type"],o=0;o<a.length;++o)if(n.hasValue(e,"@type",a[o]))return!0;return!1}var i=!0,l=!1;for(var u in t){if(_(u)){if("@id"!==u&&"@type"!==u)continue;if(i=!1,"@id"===u&&J(t[u])){if(e[u]!==t[u])return!1;l=!0;continue}}if(i=!1,u in e){if(A(t[u])&&0===t[u].length&&void 0!==e[u])return!1;l=!0}else{var s=A(t[u])&&T(t[u][0])&&"@default"in t[u][0];if(r.requireAll&&!s)return!1}}return i||l}function w(e,t){var r=e.uniqueEmbeds,a=r[t],o=a.parent,i=a.property,l={"@id":t};if(A(o)){for(var u=0;u<o.length;++u)if(n.compareValues(o[u],l)){o[u]=l;break}}else{var s=A(o[i]);n.removeValue(o,i,l,{propertyIsArray:s}),n.addValue(o,i,l,{propertyIsArray:s})}var c=function(e){for(var t=Object.keys(r),n=0;n<t.length;++n){var a=t[n];a in r&&T(r[a].parent)&&r[a].parent["@id"]===e&&(delete r[a],c(a))}};c(t)}function j(e,t,r){T(e)?n.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function k(e,t,r){if(A(t)){for(var a=[],o=0;o<t.length;++o){var i=k(e,t[o],r);null!==i&&a.push(i)}t=a}else if(T(t)){if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if(X(t))return t;if(Q(t))return t["@list"]=k(e,t["@list"],r),t;var l=O(e,"@id");if(l in t){var u=t[l];if(u in r.link){var s=r.link[u].indexOf(t);if(-1!==s)return r.link[u][s];r.link[u].push(t)}else r.link[u]=[t]}for(var c in t){var i=k(e,t[c],r),d=n.getContextValue(e,c,"@container");r.compactArrays&&A(i)&&1===i.length&&null===d&&(i=i[0]),t[c]=i}}return t}function I(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:t>e?-1:1}function L(e,t,n,r,a,o){null===o&&(o="@null");var i=[];if("@id"!==o&&"@reverse"!==o||!H(n))i.push(o);else{"@reverse"===o&&i.push("@reverse");var l=O(e,n["@id"],null,{vocab:!0});l in e.mappings&&e.mappings[l]&&e.mappings[l]["@id"]===n["@id"]?i.push.apply(i,["@vocab","@id"]):i.push.apply(i,["@id","@vocab"])}i.push("@none");for(var u=e.inverse[t],s=0;s<r.length;++s){var c=r[s];if(c in u)for(var d=u[c][a],f=0;f<i.length;++f){var p=i[f];if(p in d)return d[p]}}return null}function O(e,t,n,r,a){if(null===t)return t;M(n)&&(n=null),M(a)&&(a=!1),r=r||{};var o=e.getInverse();if(_(t))return t in o?o[t]["@none"]["@type"]["@none"]:t;if(r.vocab&&t in o){var i=e["@language"]||"@none",l=[];T(n)&&"@index"in n&&l.push("@index");var u="@language",s="@null";if(a)u="@type",s="@reverse",l.push("@set");else if(Q(n)){"@index"in n||l.push("@list");for(var c=n["@list"],d=0===c.length?i:null,f=null,p=0;p<c.length;++p){var h=c[p],v="@none",g="@none";if(X(h)?"@language"in h?v=h["@language"]:"@type"in h?g=h["@type"]:v="@null":g="@id",null===d?d=v:v!==d&&X(h)&&(d="@none"),null===f?f=g:g!==f&&(f="@none"),"@none"===d&&"@none"===f)break}d=d||"@none",f=f||"@none","@none"!==f?(u="@type",s=f):s=d}else X(n)?"@language"in n&&!("@index"in n)?(l.push("@language"),s=n["@language"]):"@type"in n&&(u="@type",s=n["@type"]):(u="@type",s="@id"),l.push("@set");l.push("@none");var y=L(e,t,n,l,u,s);if(null!==y)return y}if(r.vocab&&"@vocab"in e){var m=e["@vocab"];if(0===t.indexOf(m)&&t!==m){var x=t.substr(m.length);if(!(x in e.mappings))return x}}for(var b=null,w=0,j=[],k=e.fastCurieMap,O=t.length-1;O>w&&t[w]in k;++w)k=k[t[w]],""in k&&j.push(k[""][0]);for(var p=j.length-1;p>=0;--p)for(var E=j[p],S=E.terms,D=0;D<S.length;++D){var N=S[D]+":"+t.substr(E.iri.length),R=!(N in e.mappings)||null===n&&e.mappings[N]["@id"]===t;R&&(null===b||I(N,b)<0)&&(b=N)}return null!==b?b:r.vocab?t:C(e["@base"],t)}function E(e,t,r){if(X(r)){var a=n.getContextValue(e,t,"@type"),o=n.getContextValue(e,t,"@language"),i=n.getContextValue(e,t,"@container"),l="@index"in r&&"@index"!==i;if(!l&&(r["@type"]===a||r["@language"]===o))return r["@value"];var u=Object.keys(r).length,s=1===u||2===u&&"@index"in r&&!l,c="@language"in e,d=J(r["@value"]),f=e.mappings[t]&&null===e.mappings[t]["@language"];if(s&&(!c||!d||f))return r["@value"];var p={};return l&&(p[O(e,"@index")]=r["@index"]),"@type"in r?p[O(e,"@type")]=O(e,r["@type"],null,{vocab:!0}):"@language"in r&&(p[O(e,"@language")]=r["@language"]),p[O(e,"@value")]=r["@value"],p}var h=D(e,t,{vocab:!0}),a=n.getContextValue(e,t,"@type"),v=O(e,r["@id"],null,{vocab:"@vocab"===a});if("@id"===a||"@vocab"===a||"@graph"===h)return v;var p={};return p[O(e,"@id")]=v,p}function S(e,t,n,r){if(n in r){if(r[n])return;throw new Se("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}if(r[n]=!1,_(n))throw new Se("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(""===n)throw new Se("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[n]&&delete e.mappings[n];var a=t[n];if(null===a||T(a)&&null===a["@id"])return e.mappings[n]=null,void(r[n]=!0);if(J(a)&&(a={"@id":a}),!T(a))throw new Se("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[n]={};if(o.reverse=!1,"@reverse"in a){if("@id"in a)throw new Se("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var i=a["@reverse"];if(!J(i))throw new Se("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var l=D(e,i,{vocab:!0,base:!1},t,r);if(!$(l))throw new Se("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=l,o.reverse=!0}else if("@id"in a){var l=a["@id"];if(!J(l))throw new Se("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(l!==n){if(l=D(e,l,{vocab:!0,base:!1},t,r),!$(l)&&!_(l))throw new Se("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=l}}var u=n.indexOf(":");if(o._termHasColon=-1!==u,!("@id"in o))if(o._termHasColon){var s=n.substr(0,u);if(s in t&&S(e,t,s,r),e.mappings[s]){var c=n.substr(u+1);o["@id"]=e.mappings[s]["@id"]+c}else o["@id"]=n}else{if(!("@vocab"in e))throw new Se("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});o["@id"]=e["@vocab"]+n}if(r[n]=!0,"@type"in a){var d=a["@type"];if(!J(d))throw new Se("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==d&&"@vocab"!==d){if(d=D(e,d,{vocab:!0,base:!1},t,r),!$(d))throw new Se("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===d.indexOf("_:"))throw new Se("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=d}if("@container"in a){var f=a["@container"];if("@list"!==f&&"@set"!==f&&"@index"!==f&&"@language"!==f)throw new Se("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==f&&"@set"!==f&&null!==f)throw new Se("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=f}if("@language"in a&&!("@type"in a)){var p=a["@language"];if(null!==p&&!J(p))throw new Se("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==p&&(p=p.toLowerCase()),o["@language"]=p}var l=o["@id"];if("@context"===l||"@preserve"===l)throw new Se("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function D(e,t,r,a,o){if(null===t||_(t))return t;if(t=String(t),a&&t in a&&o[t]!==!0&&S(e,a,t,o),r=r||{},r.vocab){var i=e.mappings[t];if(null===i)return null;if(i)return i["@id"]}var l=t.indexOf(":");if(-1!==l){var u=t.substr(0,l),s=t.substr(l+1);if("_"===u||0===s.indexOf("//"))return t;a&&u in a&&S(e,a,u,o);var i=e.mappings[u];return i?i["@id"]+s:t}if(r.vocab&&"@vocab"in e)return e["@vocab"]+t;var c=t;return r.base&&(c=n.prependBase(e["@base"],c)),c}function N(e,t){if(null===e)return t;if(-1!==t.indexOf(":"))return t;J(e)&&(e=n.url.parse(e||""));var r=n.url.parse(t),a={protocol:e.protocol||""};if(null!==r.authority)a.authority=r.authority,a.path=r.path,a.query=r.query;else if(a.authority=e.authority,""===r.path)a.path=e.path,null!==r.query?a.query=r.query:a.query=e.query;else{if(0===r.path.indexOf("/"))a.path=r.path;else{var o=e.path;""!==r.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=r.path),a.path=o}a.query=r.query}a.path=ae(a.path,!!a.authority);var i=a.protocol;return null!==a.authority&&(i+="//"+a.authority),i+=a.path,null!==a.query&&(i+="?"+a.query),null!==r.fragment&&(i+="#"+r.fragment),""===i&&(i="./"),i}function C(e,t){if(null===e)return t;J(e)&&(e=n.url.parse(e||""));var r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;for(var a=n.url.parse(t.substr(r.length)),o=e.normalizedPath.split("/"),i=a.normalizedPath.split("/"),l=a.fragment||a.query?0:1;o.length>0&&i.length>l&&o[0]===i[0];)o.shift(),i.shift();var u="";if(o.length>0){o.pop();for(var s=0;s<o.length;++s)u+="../"}return u+=i.join("/"),null!==a.query&&(u+="?"+a.query),null!==a.fragment&&(u+="#"+a.fragment),""===u&&(u="./"),u}function R(e){function t(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},n=e.fastCurieMap={},o={},i=e["@language"]||"@none",l=e.mappings,u=Object.keys(l).sort(I),s=0;s<u.length;++s){var c=u[s],d=l[c];if(null!==d){var f=d["@container"]||"@none",p=d["@id"];A(p)||(p=[p]);for(var h=0;h<p.length;++h){var v=p[h],g=t[v],y=_(v);if(g)y||d._termHasColon||o[v].push(c);else if(t[v]=g={},!y&&!d._termHasColon){o[v]=[c];var m={iri:v,terms:o[v]};v[0]in n?n[v[0]].push(m):n[v[0]]=[m]}if(g[f]||(g[f]={"@language":{},"@type":{}}),g=g[f],d.reverse)a(d,c,g["@type"],"@reverse");else if("@type"in d)a(d,c,g["@type"],d["@type"]);else if("@language"in d){var x=d["@language"]||"@null";a(d,c,g["@language"],x)}else a(d,c,g["@language"],i),a(d,c,g["@type"],"@none"),a(d,c,g["@language"],"@none")}}}for(var b in n)r(n,b,1);return t}function r(e,t,n){for(var a,o,i=e[t],l=e[t]={},u=0;u<i.length;++u)a=i[u].iri,o=n>=a.length?"":a[n],o in l?l[o].push(i[u]):l[o]=[i[u]];for(var t in l)""!==t&&r(l,t,n+1)}function a(e,t,n,r){r in n||(n[r]=t)}function o(){var e={};return e["@base"]=this["@base"],e.mappings=W(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}var i=n.url.parse(e.base||"");return{"@base":i,mappings:{},inverse:null,getInverse:t,clone:o}}function _(e){if(!J(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function T(e){return"[object Object]"===Object.prototype.toString.call(e)}function U(e){return T(e)&&0===Object.keys(e).length}function A(e){return Array.isArray(e)}function q(e){if(!J(e)&&!U(e)){var t=!1;if(A(e)){t=!0;for(var n=0;n<e.length;++n)if(!J(e[n])){t=!1;break}}if(!t)throw new Se('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function J(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function P(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function F(e){return P(e)&&-1!==String(e).indexOf(".")}function B(e){return!isNaN(parseFloat(e))&&isFinite(e)}function V(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function M(e){return"undefined"==typeof e}function z(e){var t=!1;if(T(e)&&!("@value"in e||"@set"in e||"@list"in e)){var n=Object.keys(e).length;t=n>1||!("@id"in e)}return t}function H(e){return T(e)&&1===Object.keys(e).length&&"@id"in e}function X(e){return T(e)&&"@value"in e}function Q(e){return T(e)&&"@list"in e}function G(e){var t=!1;return T(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function $(e){return J(e)&&-1!==e.indexOf(":")}function W(e){if(e&&"object"==typeof e){var t;if(A(e)){t=[];for(var n=0;n<e.length;++n)t[n]=W(e[n])}else if(T(e)){t={};for(var r in e)t[r]=W(e[r])}else t=e.toString();return t}return e}function Y(e,t,r,a){var o=Object.keys(t).length;if(A(e)){for(var i=0;i<e.length;++i)Y(e[i],t,r,a);return o<Object.keys(t).length}if(T(e)){for(var l in e)if("@context"===l){var u=e[l];if(A(u))for(var s=u.length,i=0;s>i;++i){var c=u[i];J(c)&&(c=n.prependBase(a,c),r?(c=t[c],A(c)?(Array.prototype.splice.apply(u,[i,1].concat(c)),i+=c.length-1,s=u.length):u[i]=c):c in t||(t[c]=!1))}else J(u)&&(u=n.prependBase(a,u),r?e[l]=t[u]:u in t||(t[u]=!1))}else Y(e[l],t,r,a);return o<Object.keys(t).length}return!1}function Z(e,t,n){var r=null,a=t.documentLoader,o=function(e,t,n,a,i){if(Object.keys(t).length>Ee)return r=new Se("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Ee}),i(r);var l={},u=function(){Y(e,l,!0,a),i(null,e)};Y(e,l,!1,a)||u();var s=[];for(var c in l)l[c]===!1&&s.push(c);for(var d=s.length,f=0;f<s.length;++f)!function(e){if(e in t)return r=new Se("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),i(r);var a=W(t);a[e]=!0;var s=function(t,s){if(!r){var c=s?s.document:null;if(!t&&J(c))try{c=JSON.parse(c)}catch(f){t=f}if(t?t=new Se("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):T(c)||(t=new Se("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return r=t,i(r);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},s.contextUrl&&(A(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(s.contextUrl)),o(c,a,n,e,function(t,n){return t?i(t):(l[e]=n["@context"],d-=1,void(0===d&&u()))})}},c=n(e,s);c&&"then"in c&&c.then(s.bind(null,null),s)}(s[f])};o(e,{},a,t.base,n)}function K(e){for(var t="(?:<([^:]+:[^>]*)>)",n="(_:(?:[A-Za-z0-9]+))",r='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',a="(?:\\^\\^"+t+")",o="(?:@([a-z]+(?:-[a-z0-9]+)*))",i="(?:"+r+"(?:"+a+"|"+o+")?)",l="(?:#.*)?",u="[ \\t]+",s="[ \\t]*",c=/(?:\r\n)|(?:\n)|(?:\r)/g,f=new RegExp("^"+s+l+"$"),p="(?:"+t+"|"+n+")"+u,h=t+u,v="(?:"+t+"|"+n+"|"+i+")"+s,g="(?:\\.|(?:(?:"+t+"|"+n+")"+s+"\\.))",y=new RegExp("^"+s+p+h+v+g+s+l+"$"),m={},x=e.split(c),b=0,w=0;w<x.length;++w){var j=x[w];if(b++,!f.test(j)){var k=j.match(y);if(null===k)throw new Se("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:b});var I={};if(M(k[1])?I.subject={type:"blank node",value:k[2]}:I.subject={type:"IRI",value:k[1]},I.predicate={type:"IRI",value:k[3]},M(k[4]))if(M(k[5])){I.object={type:"literal"},M(k[7])?M(k[8])?I.object.datatype=ve:(I.object.datatype=Le,I.object.language=k[8]):I.object.datatype=k[7];var L=k[6].replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");I.object.value=L}else I.object={type:"blank node",value:k[5]};else I.object={type:"IRI",value:k[4]};var O="@default";if(M(k[9])?M(k[10])||(O=k[10]):O=k[9],O in m){for(var E=!0,S=m[O],D=0;E&&D<S.length;++D)d(S[D],I)&&(E=!1);E&&S.push(I)}else m[O]=[I]}}return m}function ee(e){var t=[];for(var n in e)for(var r=e[n],a=0;a<r.length;++a){var o=r[a];"@default"===n&&(n=null),t.push(te(o,n))}return t.sort().join("")}function te(e,t){var n=e.subject,r=e.predicate,a=e.object,o=t||null;"name"in e&&e.name&&(o=e.name.value);var i="";if(i+="IRI"===n.type?"<"+n.value+">":n.value,i+=" ",i+="IRI"===r.type?"<"+r.value+">":r.value,i+=" ","IRI"===a.type)i+="<"+a.value+">";else if("blank node"===a.type)i+=a.value;else{var l=a.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');i+='"'+l+'"',a.datatype===Le?a.language&&(i+="@"+a.language):a.datatype!==ve&&(i+="^^<"+a.datatype+">")}return null!==o&&void 0!==o&&(i+=0!==o.indexOf("_:")?" <"+o+">":" "+o),i+=" .\n"}function ne(e){var t={};t["@default"]=[];for(var n=e.getSubjects(),r=0;r<n.length;++r){var a=n[r];if(null!==a){var o=e.getSubjectTriples(a);if(null!==o){var i=o.predicates;for(var l in i)for(var u=i[l].objects,s=0;s<u.length;++s){var c=u[s],d={};0===a.indexOf("_:")?d.subject={type:"blank node",value:a}:d.subject={type:"IRI",value:a},0===l.indexOf("_:")?d.predicate={type:"blank node",value:l}:d.predicate={type:"IRI",value:l};var f=c.value;if(c.type===ke){ce||Te();var p=new ce;f="";for(var h=0;h<c.value.length;h++)c.value[h].nodeType===de.ELEMENT_NODE?f+=p.serializeToString(c.value[h]):c.value[h].nodeType===de.TEXT_NODE&&(f+=c.value[h].nodeValue)}d.object={},c.type===Ie?0===c.value.indexOf("_:")?d.object.type="blank node":d.object.type="IRI":(d.object.type="literal",c.type===je?c.language?(d.object.datatype=Le,d.object.language=c.language):d.object.datatype=ve:d.object.datatype=c.type),d.object.value=f,t["@default"].push(d)}}}}return t}function re(e){this.prefix=e,this.counter=0,this.existing={}}function ae(e,t){var n="";0===e.indexOf("/")&&(n="/");for(var r=e.split("/"),a=[];r.length>0;)"."===r[0]||""===r[0]&&r.length>1?r.shift():".."!==r[0]?a.push(r.shift()):(r.shift(),t||a.length>0&&".."!==a[a.length-1]?a.pop():a.push(".."));return n+a.join("/")}n.compact=function(e,t,r,a){function o(e,n,r,o){if(e)return a(e);o.compactArrays&&!o.graph&&A(n)?1===n.length?n=n[0]:0===n.length&&(n={}):o.graph&&T(n)&&(n=[n]),T(t)&&"@context"in t&&(t=t["@context"]),t=W(t),A(t)||(t=[t]);var i=t;t=[];for(var l=0;l<i.length;++l)(!T(i[l])||Object.keys(i[l]).length>0)&&t.push(i[l]);var u=t.length>0;if(1===t.length&&(t=t[0]),A(n)){var s=O(r,"@graph"),c=n;n={},u&&(n["@context"]=t),n[s]=c}else if(T(n)&&u){var c=n;n={"@context":t};for(var d in c)n[d]=c[d]}a(null,n,r)}if(arguments.length<2)return n.nextTick(function(){a(new TypeError("Could not compact, too few arguments."))});if("function"==typeof r&&(a=r,r={}),r=r||{},null===t)return n.nextTick(function(){a(new Se("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===e)return n.nextTick(function(){a(null,null)});"base"in r||(r.base="string"==typeof e?e:""),"compactArrays"in r||(r.compactArrays=!0),"graph"in r||(r.graph=!1),"skipExpansion"in r||(r.skipExpansion=!1),"documentLoader"in r||(r.documentLoader=n.loadDocument),"link"in r||(r.link=!1),r.link&&(r.skipExpansion=!0);var i=function(e,t,r){return t.skipExpansion?n.nextTick(function(){r(null,e)}):void n.expand(e,t,r)};i(e,r,function(e,i){if(e)return a(new Se("Could not expand input before compaction.","jsonld.CompactError",{cause:e}));var l=R(r);n.processContext(l,t,r,function(e,t){if(e)return a(new Se("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var n;try{n=(new De).compact(t,null,i,r)}catch(l){return a(l)}o(null,n,t,r)})})},n.expand=function(e,t,r){function a(e){"base"in t||(t.base=e.documentUrl||"");var n={document:W(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in t){var a=W(t.expandContext);"object"==typeof a&&"@context"in a?n.expandContext=a:n.expandContext={"@context":a}}Z(n,t,function(e,n){if(e)return r(e);var a;try{var o=new De,i=R(t),l=n.document,u=n.remoteContext["@context"];n.expandContext&&(i=o.processContext(i,n.expandContext["@context"],t)),u&&(i=o.processContext(i,u,t)),a=o.expand(i,null,l,t,!1),T(a)&&"@graph"in a&&1===Object.keys(a).length?a=a["@graph"]:null===a&&(a=[]),A(a)||(a=[a])}catch(s){return r(s)}r(null,a)})}return arguments.length<1?n.nextTick(function(){r(new TypeError("Could not expand, too few arguments."))}):("function"==typeof t&&(r=t,t={}),t=t||{},"documentLoader"in t||(t.documentLoader=n.loadDocument),"keepFreeFloatingNodes"in t||(t.keepFreeFloatingNodes=!1),void n.nextTick(function(){if("string"==typeof e){var n=function(e,t){if(e)return r(e);try{if(!t.document)throw new Se("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(n){return r(new Se("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:n,remoteDoc:t}))}a(t)},o=t.documentLoader(e,n);return void(o&&"then"in o&&o.then(n.bind(null,null),n))}a({contextUrl:null,documentUrl:null,document:e})}))},n.flatten=function(e,t,r,a){return arguments.length<1?n.nextTick(function(){a(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof r?(a=r,r={}):"function"==typeof t&&(a=t,t=null,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=n.loadDocument),void n.expand(e,r,function(e,o){if(e)return a(new Se("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));var i;try{i=(new De).flatten(o)}catch(l){return a(l)}return null===t?a(null,i):(r.graph=!0,r.skipExpansion=!0,void n.compact(i,t,r,function(e,t){return e?a(new Se("Could not compact flattened output.","jsonld.FlattenError",{cause:e})):void a(null,t)}))}))},n.frame=function(e,t,r,a){function o(t){var o,i=t.document;i?(o=i["@context"],t.contextUrl?(o?A(o)?o.push(t.contextUrl):o=[o,t.contextUrl]:o=t.contextUrl,i["@context"]=o):o=o||{}):o={},n.expand(e,r,function(e,t){if(e)return a(new Se("Could not expand input before framing.","jsonld.FrameError",{cause:e}));var l=W(r);l.isFrame=!0,l.keepFreeFloatingNodes=!0,n.expand(i,l,function(e,r){if(e)return a(new Se("Could not expand frame before framing.","jsonld.FrameError",{cause:e}));var i;try{i=(new De).frame(t,r,l)}catch(u){return a(u)}l.graph=!0,l.skipExpansion=!0,l.link={},n.compact(i,o,l,function(e,t,n){if(e)return a(new Se("Could not compact framed output.","jsonld.FrameError",{cause:e}));var r=O(n,"@graph");l.link={},t[r]=k(n,t[r],l),a(null,t)})})})}return arguments.length<2?n.nextTick(function(){a(new TypeError("Could not frame, too few arguments."))}):("function"==typeof r&&(a=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=n.loadDocument),"embed"in r||(r.embed="@last"),r.explicit=r.explicit||!1,"requireAll"in r||(r.requireAll=!0),r.omitDefault=r.omitDefault||!1,void n.nextTick(function(){if("string"==typeof t){var e=function(e,t){if(e)return a(e);try{if(!t.document)throw new Se("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(n){return a(new Se("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:n,remoteDoc:t}))}o(t)},n=r.documentLoader(t,e);return void(n&&"then"in n&&n.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:t})}))},n.link=function(e,t,r,a){var o={};t&&(o["@context"]=t),o["@embed"]="@link",n.frame(e,o,r,a)},n.objectify=function(e,t,r,a){"function"==typeof r&&(a=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=n.loadDocument),n.expand(e,r,function(e,o){if(e)return a(new Se("Could not expand input before linking.","jsonld.LinkError",{cause:e}));var i;try{i=(new De).flatten(o)}catch(l){return a(l)}r.graph=!0,r.skipExpansion=!0,n.compact(i,t,r,function(e,t,r){if(e)return a(new Se("Could not compact flattened output before linking.","jsonld.LinkError",{cause:e}));var o=O(r,"@graph"),i=t[o][0],l=function(e){if(T(e)||A(e)){if(T(e)){if(l.visited[e["@id"]])return;l.visited[e["@id"]]=!0}for(var t in e){var a=e[t],o="@id"===n.getContextValue(r,t,"@type");
if(A(a)||T(a)||o)if(J(a)&&o)e[t]=a=i[a],l(a);else if(A(a))for(var u=0;u<a.length;++u)J(a[u])&&o?a[u]=i[a[u]]:T(a[u])&&"@id"in a[u]&&(a[u]=i[a[u]["@id"]]),l(a[u]);else if(T(a)){var s=a["@id"];e[t]=a=i[s],l(a)}}}};l.visited={},l(i),t.of_type={};for(var u in i)if("@type"in i[u]){var s=i[u]["@type"];A(s)||(s=[s]);for(var c=0;c<s.length;++c)s[c]in t.of_type||(t.of_type[s[c]]=[]),t.of_type[s[c]].push(i[u])}a(null,t)})})},n.normalize=function(e,t,r){if(arguments.length<1)return n.nextTick(function(){r(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof t&&(r=t,t={}),t=t||{},"algorithm"in t||(t.algorithm="URGNA2012"),"base"in t||(t.base="string"==typeof e?e:""),"documentLoader"in t||(t.documentLoader=n.loadDocument),"inputFormat"in t){if("application/nquads"!==t.inputFormat)return r(new Se("Unknown normalization input format.","jsonld.NormalizeError"));var a=K(e);(new De).normalize(a,t,r)}else{var o=W(t);delete o.format,o.produceGeneralizedRdf=!1,n.toRDF(e,o,function(e,n){return e?r(new Se("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e})):void(new De).normalize(n,t,r)})}},n.fromRDF=function(e,t,r){return arguments.length<1?n.nextTick(function(){r(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof t&&(r=t,t={}),t=t||{},"useRdfType"in t||(t.useRdfType=!1),"useNativeTypes"in t||(t.useNativeTypes=!1),"format"in t||!J(e)||"format"in t||(t.format="application/nquads"),void n.nextTick(function(){function n(e,t,n){(new De).fromRDF(e,t,n)}var a;if(t.format){if(a=t.rdfParser||se[t.format],!a)return r(new Se("Unknown input format.","jsonld.UnknownFormat",{format:t.format}))}else a=function(){return e};var o=!1;try{e=a(e,function(e,a){return o=!0,e?r(e):void n(a,t,r)})}catch(i){if(!o)return r(i);throw i}if(e){if("then"in e)return e.then(function(e){n(e,t,r)},r);n(e,t,r)}}))},n.toRDF=function(e,t,r){return arguments.length<1?n.nextTick(function(){r(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof t&&(r=t,t={}),t=t||{},"base"in t||(t.base="string"==typeof e?e:""),"documentLoader"in t||(t.documentLoader=n.loadDocument),void n.expand(e,t,function(e,n){if(e)return r(new Se("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var a;try{if(a=De.prototype.toRDF(n,t),t.format){if("application/nquads"===t.format)return r(null,ee(a));throw new Se("Unknown output format.","jsonld.UnknownFormat",{format:t.format})}}catch(o){return r(o)}r(null,a)}))},n.createNodeMap=function(e,t,r){return arguments.length<1?n.nextTick(function(){r(new TypeError("Could not create node map, too few arguments."))}):("function"==typeof t&&(r=t,t={}),t=t||{},"base"in t||(t.base="string"==typeof e?e:""),"documentLoader"in t||(t.documentLoader=n.loadDocument),void n.expand(e,t,function(e,n){if(e)return r(new Se("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var a;try{a=(new De).createNodeMap(n,t)}catch(o){return r(o)}r(null,a)}))},n.merge=function(e,t,r,a){function o(e,t){if(!u){if(e)return u=e,a(new Se("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));l.push(t),0===--s&&i(l)}}function i(e){var o=!0;"mergeNodes"in r&&(o=r.mergeNodes);var i,l=r.namer||r.issuer||new re("_:b"),u={"@default":{}};try{for(var s=0;s<e.length;++s){var c=e[s];c=n.relabelBlankNodes(c,{issuer:new re("_:b"+s+"-")});var d=o||0===s?u:{"@default":{}};if(f(c,d,"@default",l),d!==u)for(var h in d){var v=d[h];if(h in u){var g=u[h];for(var y in v)y in g||(g[y]=v[y])}else u[h]=v}}i=p(u)}catch(m){return a(m)}for(var x=[],b=Object.keys(i).sort(),w=0;w<b.length;++w){var j=i[b[w]];H(j)||x.push(j)}return null===t?a(null,x):(r.graph=!0,r.skipExpansion=!0,void n.compact(x,t,r,function(e,t){return e?a(new Se("Could not compact merged output.","jsonld.MergeError",{cause:e})):void a(null,t)}))}if(arguments.length<1)return n.nextTick(function(){a(new TypeError("Could not merge, too few arguments."))});if(!A(e))return n.nextTick(function(){a(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof r?(a=r,r={}):"function"==typeof t&&(a=t,t=null,r={}),r=r||{};for(var l=[],u=null,s=e.length,c=0;c<e.length;++c){var d={};for(var h in r)d[h]=r[h];n.expand(e[c],d,o)}},n.relabelBlankNodes=function(e,t){t=t||{};var n=t.namer||t.issuer||new re("_:b");return o(n,e)},n.prependBase=function(e,t){return N(e,t)},n.documentLoader=function(t,r){var a=new Se("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return e?r(a,{contextUrl:null,documentUrl:t,document:null}):n.promisify(function(e){e(a)})},n.loadDocument=function(e,t){var r=n.documentLoader(e,t);r&&"then"in r&&r.then(t.bind(null,null),t)},n.promises=function(e){e=e||{};var t=Array.prototype.slice,r=n.promisify,a=e.api||{},o=e.version||"jsonld.js";"string"==typeof e.api&&(e.version||(o=e.api),a={}),a.expand=function(e){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return r.apply(null,[n.expand].concat(t.call(arguments)))},a.compact=function(e,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var o=function(e,t,r,a){n.compact(e,t,r,function(e,t){a(e,t)})};return r.apply(null,[o].concat(t.call(arguments)))},a.flatten=function(e){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return r.apply(null,[n.flatten].concat(t.call(arguments)))},a.frame=function(e,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return r.apply(null,[n.frame].concat(t.call(arguments)))},a.fromRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return r.apply(null,[n.fromRDF].concat(t.call(arguments)))},a.toRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return r.apply(null,[n.toRDF].concat(t.call(arguments)))},a.normalize=function(e){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return r.apply(null,[n.normalize].concat(t.call(arguments)))},"jsonld.js"===o&&(a.link=function(e,a){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return r.apply(null,[n.link].concat(t.call(arguments)))},a.objectify=function(e){return r.apply(null,[n.objectify].concat(t.call(arguments)))},a.createNodeMap=function(e){return r.apply(null,[n.createNodeMap].concat(t.call(arguments)))},a.merge=function(e){return r.apply(null,[n.merge].concat(t.call(arguments)))});try{n.Promise=global.Promise||require("es6-promise").Promise}catch(i){var l=function(){throw new Error("Unable to find a Promise implementation.")};for(var u in a)a[u]=l}return a},n.promisify=function(e){if(!n.Promise)try{n.Promise=global.Promise||require("es6-promise").Promise}catch(t){throw new Error("Unable to find a Promise implementation.")}var r=Array.prototype.slice.call(arguments,1);return new n.Promise(function(t,n){e.apply(null,r.concat(function(e,r){e?n(e):t(r)}))})},n.promises({api:n.promises}),r.prototype=n.promises({version:"json-ld-1.0"}),r.prototype.toString=function(){return this instanceof r?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},n.JsonLdProcessor=r;var oe=!!Object.defineProperty;if(oe)try{Object.defineProperty({},"x",{})}catch(ie){oe=!1}oe&&(Object.defineProperty(r,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(r.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:r})),t&&"undefined"==typeof global.JsonLdProcessor&&(oe?Object.defineProperty(global,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:r}):global.JsonLdProcessor=r);var le="function"==typeof setImmediate&&setImmediate,ue=le?function(e){le(e)}:function(e){setTimeout(e,0)};"object"==typeof process&&"function"==typeof process.nextTick?n.nextTick=process.nextTick:n.nextTick=ue,n.setImmediate=le?ue:n.nextTick,n.parseLinkHeader=function(e){for(var t={},n=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,a=0;a<n.length;++a){var o=n[a].match(r);if(o){for(var i={target:o[1]},l=o[2],u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=u.exec(l);)i[o[1]]=void 0===o[2]?o[3]:o[2];var s=i.rel||"";A(t[s])?t[s].push(i):s in t?t[s]=[t[s],i]:t[s]=i}}return t},n.RequestQueue=function(){this._requests={}},n.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},n.RequestQueue.prototype.add=function(e,t){var r=this;if(!t&&!r._usePromise)throw new Error("callback must be specified.");return r._usePromise?new n.Promise(function(t,n){var a=r._requests[e];a||(a=r._requests[e]=r._loader(e).then(function(t){return delete r._requests[e],t})["catch"](function(t){throw delete r._requests[e],t})),a.then(function(e){t(e)})["catch"](function(e){n(e)})}):void(e in r._requests?r._requests[e].push(t):(r._requests[e]=[t],r._loader(e,function(t,n){var a=r._requests[e];delete r._requests[e];for(var o=0;o<a.length;++o)a[o](t,n)})))},n.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},n.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},n.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},n.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},n.ActiveContextCache.prototype.get=function(e,t){var n=JSON.stringify(e),r=JSON.stringify(t),a=this.cache[n];return a&&r in a?a[r]:null},n.ActiveContextCache.prototype.set=function(e,t,n){if(this.order.length===this.size){var r=this.order.shift();delete this.cache[r.activeCtx][r.localCtx]}var a=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:a,localCtx:o}),a in this.cache||(this.cache[a]={}),this.cache[a][o]=W(n)},n.cache={activeCtx:new n.ActiveContextCache},n.documentLoaders={},n.documentLoaders.jquery=function(e,t){function r(r,a){return 0!==r.indexOf("http:")&&0!==r.indexOf("https:")?a(new Se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null}):t.secure&&0!==r.indexOf("https")?a(new Se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null}):void e.ajax({url:r,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(e,t,o){var i={contextUrl:null,documentUrl:r,document:e},l=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link");if(u&&"application/ld+json"!==l){if(u=n.parseLinkHeader(u)[Oe],A(u))return a(new Se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),i);u&&(i.contextUrl=u.target)}a(null,i)},error:function(e,t,n){a(new Se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:n}),{contextUrl:null,documentUrl:r,document:null})}})}t=t||{};var a=new n.RequestQueue,o="usePromise"in t?t.usePromise:"undefined"!=typeof Promise;return o?a.wrapLoader(function(e){return n.promisify(r,e)}):a.wrapLoader(r)},n.documentLoaders.node=function(e){function t(u,s,c){function d(e,r,o){if(f={contextUrl:null,documentUrl:u,document:o||null},e)return c(new Se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:u,cause:e}),f);var i=l.STATUS_CODES[r.statusCode];if(r.statusCode>=400)return c(new Se("URL could not be dereferenced: "+i,"jsonld.InvalidUrl",{code:"loading document failed",url:u,httpStatusCode:r.statusCode}),f);if(r.headers.link&&"application/ld+json"!==r.headers["content-type"]){var d=n.parseLinkHeader(r.headers.link)[Oe];if(A(d))return c(new Se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:u}),f);d&&(f.contextUrl=d.target)}return r.statusCode>=300&&r.statusCode<400&&r.headers.location?s.length===a?c(new Se("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:u,httpStatusCode:r.statusCode,redirects:s}),f):-1!==s.indexOf(u)?c(new Se("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:u,httpStatusCode:r.statusCode,redirects:s}),f):(s.push(u),t(r.headers.location,s,c)):(s.push(u),void c(e,f))}if(0!==u.indexOf("http:")&&0!==u.indexOf("https:"))return c(new Se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:u}),{contextUrl:null,documentUrl:u,document:null});if(e.secure&&0!==u.indexOf("https"))return c(new Se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:u}),{contextUrl:null,documentUrl:u,document:null});var f=null;if(null!==f)return c(null,f);var p={Accept:i};for(var h in e.headers)p[h]=e.headers[h];o({url:u,headers:p,strictSSL:r,followRedirect:!1},d)}e=e||{};var r="strictSSL"in e?e.strictSSL:!0,a="maxRedirects"in e?e.maxRedirects:-1,o="request"in e?e.request:require("request"),i="application/ld+json, application/json",l=require("http"),u=new n.RequestQueue;if(e.usePromise)return u.wrapLoader(function(e){return n.promisify(t,e,[])});var s=e.headers||{};if("Accept"in s||"accept"in s)throw new RangeError('Accept header may not be specified as an option; only "'+i+'" is supported.');return u.wrapLoader(function(e,n){t(e,[],n)})},n.documentLoaders.xhr=function(e){function t(t,a){if(0!==t.indexOf("http:")&&0!==t.indexOf("https:"))return a(new Se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null});if(e.secure&&0!==t.indexOf("https"))return a(new Se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null});var o=e.xhr||XMLHttpRequest,i=new o;i.onload=function(){if(i.status>=400)return a(new Se("URL could not be dereferenced: "+i.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:t,httpStatusCode:i.status}),{contextUrl:null,documentUrl:t,document:null});var e,o={contextUrl:null,documentUrl:t,document:i.response},l=i.getResponseHeader("Content-Type");if(r.test(i.getAllResponseHeaders())&&(e=i.getResponseHeader("Link")),e&&"application/ld+json"!==l){if(e=n.parseLinkHeader(e)[Oe],A(e))return a(new Se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:t}),o);e&&(o.contextUrl=e.target)}a(null,o)},i.onerror=function(){a(new Se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:t}),{contextUrl:null,documentUrl:t,document:null})},i.open("GET",t,!0),i.setRequestHeader("Accept","application/ld+json, application/json"),i.send()}e=e||{};var r=/(^|(\r\n))link:/i,a=new n.RequestQueue,o="usePromise"in e?e.usePromise:"undefined"!=typeof Promise;return o?a.wrapLoader(function(e){return n.promisify(t,e)}):a.wrapLoader(t)},n.useDocumentLoader=function(e){if(!(e in n.documentLoaders))throw new Se('Unknown document loader type: "'+e+'"',"jsonld.UnknownDocumentLoader",{type:e});n.documentLoader=n.documentLoaders[e].apply(n,Array.prototype.slice.call(arguments,1))},n.processContext=function(e,t){var r={},a=2;arguments.length>3&&(r=arguments[2]||{},a+=1);var o=arguments[a];return"base"in r||(r.base=""),"documentLoader"in r||(r.documentLoader=n.loadDocument),null===t?o(null,R(r)):(t=W(t),T(t)&&"@context"in t||(t={"@context":t}),void Z(t,r,function(t,n){if(t)return o(t);try{n=(new De).processContext(e,n,r)}catch(a){return o(a)}o(null,n)}))},n.hasProperty=function(e,t){var n=!1;if(t in e){var r=e[t];n=!A(r)||r.length>0}return n},n.hasValue=function(e,t,r){var a=!1;if(n.hasProperty(e,t)){var o=e[t],i=Q(o);if(A(o)||i){i&&(o=o["@list"]);for(var l=0;l<o.length;++l)if(n.compareValues(r,o[l])){a=!0;break}}else A(r)||(a=n.compareValues(r,o))}return a},n.addValue=function(e,t,r,a){if(a=a||{},"propertyIsArray"in a||(a.propertyIsArray=!1),"allowDuplicate"in a||(a.allowDuplicate=!0),A(r)){0!==r.length||!a.propertyIsArray||t in e||(e[t]=[]);for(var o=0;o<r.length;++o)n.addValue(e,t,r[o],a)}else if(t in e){var i=!a.allowDuplicate&&n.hasValue(e,t,r);A(e[t])||i&&!a.propertyIsArray||(e[t]=[e[t]]),i||e[t].push(r)}else e[t]=a.propertyIsArray?[r]:r},n.getValues=function(e,t){var n=e[t]||[];return A(n)||(n=[n]),n},n.removeProperty=function(e,t){delete e[t]},n.removeValue=function(e,t,r,a){a=a||{},"propertyIsArray"in a||(a.propertyIsArray=!1);var o=n.getValues(e,t).filter(function(e){return!n.compareValues(e,r)});0===o.length?n.removeProperty(e,t):1!==o.length||a.propertyIsArray?e[t]=o:e[t]=o[0]},n.compareValues=function(e,t){return e===t?!0:X(e)&&X(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"]?!0:T(e)&&"@id"in e&&T(t)&&"@id"in t?e["@id"]===t["@id"]:!1},n.getContextValue=function(e,t,n){var r=null;if(null===t)return r;if("@language"===n&&n in e&&(r=e[n]),e.mappings[t]){var a=e.mappings[t];M(n)?r=a:n in a&&(r=a[n])}return r};var se={};if(n.registerRDFParser=function(e,t){se[e]=t},n.unregisterRDFParser=function(e){delete se[e]},e){if("undefined"==typeof ce)var ce=null;if("undefined"==typeof de)var de={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var fe="http://www.w3.org/2001/XMLSchema#boolean",pe="http://www.w3.org/2001/XMLSchema#double",he="http://www.w3.org/2001/XMLSchema#integer",ve="http://www.w3.org/2001/XMLSchema#string",ge="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ye=ge+"List",me=ge+"first",xe=ge+"rest",be=ge+"nil",we=ge+"type",je=ge+"PlainLiteral",ke=ge+"XMLLiteral",Ie=ge+"object",Le=ge+"langString",Oe="http://www.w3.org/ns/json-ld#context",Ee=10,Se=function(t,n,r){e?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=n||"jsonld.Error",this.message=t||"An unspecified JSON-LD error occurred.",this.details=r||{}};e?require("util").inherits(Se,Error):"undefined"!=typeof Error&&(Se.prototype=new Error);var De=function(){};De.prototype.compact=function(e,t,r,a){if(A(r)){for(var o=[],i=0;i<r.length;++i){var l=this.compact(e,t,r[i],a);null!==l&&o.push(l)}if(a.compactArrays&&1===o.length){var u=n.getContextValue(e,t,"@container");null===u&&(o=o[0])}return o}if(T(r)){if(a.link&&"@id"in r&&r["@id"]in a.link)for(var s=a.link[r["@id"]],i=0;i<s.length;++i)if(s[i].expanded===r)return s[i].compacted;if(X(r)||H(r)){var o=E(e,t,r);return a.link&&H(r)&&(r["@id"]in a.link||(a.link[r["@id"]]=[]),a.link[r["@id"]].push({expanded:r,compacted:o})),o}var c="@reverse"===t,o={};a.link&&"@id"in r&&(r["@id"]in a.link||(a.link[r["@id"]]=[]),a.link[r["@id"]].push({expanded:r,compacted:o}));for(var d=Object.keys(r).sort(),f=0;f<d.length;++f){var p=d[f],h=r[p];if("@id"!==p&&"@type"!==p)if("@reverse"!==p)if("@index"!==p)if("@graph"!==p&&"@list"!==p&&_(p)){var v=O(e,p);n.addValue(o,v,h)}else{if(0===h.length){var g=O(e,p,h,{vocab:!0},c);n.addValue(o,g,h,{propertyIsArray:!0})}for(var y=0;y<h.length;++y){var m=h[y],g=O(e,p,m,{vocab:!0},c),u=n.getContextValue(e,g,"@container"),x=Q(m),b=null;x&&(b=m["@list"]);var w=this.compact(e,g,x?b:m,a);if(x)if(A(w)||(w=[w]),"@list"!==u){var j={};j[O(e,"@list")]=w,w=j,"@index"in m&&(w[O(e,"@index")]=m["@index"])}else if(g in o)throw new Se('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===u||"@index"===u){var k;g in o?k=o[g]:o[g]=k={},"@language"===u&&X(w)&&(w=w["@value"]),n.addValue(k,m[u],w)}else{var I=!a.compactArrays||"@set"===u||"@list"===u||A(w)&&0===w.length||"@list"===p||"@graph"===p;n.addValue(o,g,w,{propertyIsArray:I})}}}else{var u=n.getContextValue(e,t,"@container");if("@index"===u)continue;var v=O(e,p);n.addValue(o,v,h)}else{var L=this.compact(e,"@reverse",h,a);for(var S in L)if(e.mappings[S]&&e.mappings[S].reverse){var D=L[S],u=n.getContextValue(e,S,"@container"),N="@set"===u||!a.compactArrays;n.addValue(o,S,D,{propertyIsArray:N}),delete L[S]}if(Object.keys(L).length>0){var v=O(e,p);n.addValue(o,v,L)}}else{var L;if(J(h))L=O(e,h,null,{vocab:"@type"===p});else{L=[];for(var y=0;y<h.length;++y)L.push(O(e,h[y],null,{vocab:!0}))}var v=O(e,p),I=A(L)&&0===h.length;n.addValue(o,v,L,{propertyIsArray:I})}}return o}return r},De.prototype.expand=function(e,t,r,o,l){var u=this;if(null===r||void 0===r)return null;if(!A(r)&&!T(r))return l||null!==t&&"@graph"!==D(e,t,{vocab:!0})?i(e,t,r):null;if(A(r)){var s=[],c=n.getContextValue(e,t,"@container");l=l||"@list"===c;for(var d=0;d<r.length;++d){var f=u.expand(e,t,r[d],o);if(l&&(A(f)||Q(f)))throw new Se("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==f&&(A(f)?s=s.concat(f):s.push(f))}return s}"@context"in r&&(e=u.processContext(e,r["@context"],o));for(var p=D(e,t,{vocab:!0}),s={},h=Object.keys(r).sort(),v=0;v<h.length;++v){var g,y=h[v],m=r[y];if("@context"!==y){var x=D(e,y,{vocab:!0});if(null!==x&&($(x)||_(x))){if(_(x)){if("@reverse"===p)throw new Se("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:m});if(x in s)throw new Se("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:x})}if("@id"===x&&!J(m)){if(!o.isFrame)throw new Se('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:m});if(!T(m))throw new Se('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:m})}if("@type"===x&&q(m),"@graph"===x&&!T(m)&&!A(m))throw new Se('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:m});if("@value"===x&&(T(m)||A(m)))throw new Se('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:m});if("@language"===x){if(null===m)continue;if(!J(m))throw new Se('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:m});m=m.toLowerCase()}if("@index"===x&&!J(m))throw new Se('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:m});if("@reverse"!==x){var c=n.getContextValue(e,y,"@container");if("@language"===c&&T(m))g=a(m);else if("@index"===c&&T(m))g=function(t){for(var n=[],r=Object.keys(m).sort(),a=0;a<r.length;++a){var i=r[a],l=m[i];A(l)||(l=[l]),l=u.expand(e,t,l,o,!1);for(var s=0;s<l.length;++s){var c=l[s];"@index"in c||(c["@index"]=i),n.push(c)}}return n}(y);else{var b="@list"===x;if(b||"@set"===x){var w=t;if(b&&"@graph"===p&&(w=null),g=u.expand(e,w,m,o,b),b&&Q(g))throw new Se("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else g=u.expand(e,y,m,o,!1)}if(null!==g||"@value"===x)if("@list"===x||Q(g)||"@list"!==c||(g=A(g)?g:[g],g={"@list":g}),e.mappings[y]&&e.mappings[y].reverse){var j=s["@reverse"]=s["@reverse"]||{};A(g)||(g=[g]);for(var k=0;k<g.length;++k){var I=g[k];if(X(I)||Q(I))throw new Se('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});n.addValue(j,x,I,{propertyIsArray:!0})}}else{var L=-1===["@index","@id","@type","@value","@language"].indexOf(x);n.addValue(s,x,g,{propertyIsArray:L})}}else{if(!T(m))throw new Se('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:m});if(g=u.expand(e,"@reverse",m,o),"@reverse"in g)for(var O in g["@reverse"])n.addValue(s,O,g["@reverse"][O],{propertyIsArray:!0});var j=s["@reverse"]||null;for(var O in g)if("@reverse"!==O){null===j&&(j=s["@reverse"]={}),n.addValue(j,O,[],{propertyIsArray:!0});for(var E=g[O],k=0;k<E.length;++k){var I=E[k];if(X(I)||Q(I))throw new Se('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});n.addValue(j,O,I,{propertyIsArray:!0})}}}}}}h=Object.keys(s);var S=h.length;if("@value"in s){if("@type"in s&&"@language"in s)throw new Se('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});var N=S-1;if("@type"in s&&(N-=1),"@index"in s&&(N-=1),"@language"in s&&(N-=1),0!==N)throw new Se('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});if(null===s["@value"])s=null;else{if("@language"in s&&!J(s["@value"]))throw new Se("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:s});if("@type"in s&&(!$(s["@type"])||0===s["@type"].indexOf("_:")))throw new Se('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:s})}}else if("@type"in s&&!A(s["@type"]))s["@type"]=[s["@type"]];else if("@set"in s||"@list"in s){if(S>1&&!(2===S&&"@index"in s))throw new Se('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:s});"@set"in s&&(s=s["@set"],h=Object.keys(s),S=h.length)}else 1===S&&"@language"in s&&(s=null);return!T(s)||o.keepFreeFloatingNodes||l||null!==t&&"@graph"!==p||(0===S||"@value"in s||"@list"in s||1===S&&"@id"in s)&&(s=null),s},De.prototype.createNodeMap=function(e,t){t=t||{};var n=t.namer||t.issuer||new re("_:b"),r={"@default":{}};return f(e,r,"@default",n),p(r)},De.prototype.flatten=function(e){for(var t=this.createNodeMap(e),n=[],r=Object.keys(t).sort(),a=0;a<r.length;++a){var o=t[r[a]];H(o)||n.push(o)}return n},De.prototype.frame=function(e,t,n){var r={options:n,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},a=new re("_:b");f(e,r.graphs,"@merged",a),r.subjects=r.graphs["@merged"];var o=[];return h(r,Object.keys(r.subjects).sort(),t,o,null),o},De.prototype.normalize=function(e,t,n){return"URDNA2015"===t.algorithm?new Ne(t).main(e,n):"URGNA2012"===t.algorithm?new Ce(t).main(e,n):void n(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},De.prototype.fromRDF=function(e,t,r){var a={},o={"@default":a},i={};for(var l in e){var u=e[l];l in o||(o[l]={}),"@default"===l||l in a||(a[l]={"@id":l});for(var s=o[l],d=0;d<u.length;++d){var f=u[d],p=f.subject.value,h=f.predicate.value,v=f.object;p in s||(s[p]={"@id":p});var g=s[p],y="IRI"===v.type||"blank node"===v.type;if(!y||v.value in s||(s[v.value]={"@id":v.value}),h!==we||t.useRdfType||!y){var m=c(v,t.useNativeTypes);if(n.addValue(g,h,m,{propertyIsArray:!0}),y)if(v.value===be){var x=s[v.value];"usages"in x||(x.usages=[]),x.usages.push({node:g,property:h,value:m})}else v.value in i?i[v.value]=!1:i[v.value]={node:g,property:h,value:m}}else n.addValue(g,"@type",v.value,{propertyIsArray:!0})}}for(var l in o){var b=o[l];if(be in b){for(var w=b[be],j=0;j<w.usages.length;++j){for(var k=w.usages[j],g=k.node,I=k.property,L=k.value,O=[],E=[],S=Object.keys(g).length;I===xe&&T(i[g["@id"]])&&A(g[me])&&1===g[me].length&&A(g[xe])&&1===g[xe].length&&(3===S||4===S&&A(g["@type"])&&1===g["@type"].length&&g["@type"][0]===ye)&&(O.push(g[me][0]),E.push(g["@id"]),k=i[g["@id"]],g=k.node,I=k.property,L=k.value,S=Object.keys(g).length,0===g["@id"].indexOf("_:")););if(I===me){if(g["@id"]===be)continue;L=b[L["@id"]][xe][0],O.pop(),E.pop()}delete L["@id"],L["@list"]=O.reverse();for(var D=0;D<E.length;++D)delete b[E[D]]}delete w.usages}}for(var N=[],C=Object.keys(a).sort(),j=0;j<C.length;++j){var R=C[j],g=a[R];if(R in o)for(var u=g["@graph"]=[],b=o[R],_=Object.keys(b).sort(),U=0;U<_.length;++U){var q=b[_[U]];H(q)||u.push(q)}H(g)||N.push(g)}r(null,N)},De.prototype.toRDF=function(e,t){var n=new re("_:b"),r={"@default":{}};f(e,r,"@default",n);for(var a={},o=Object.keys(r).sort(),i=0;i<o.length;++i){var u=o[i];("@default"===u||$(u))&&(a[u]=l(r[u],n,t))}return a},De.prototype.processContext=function(e,t,r){T(t)&&"@context"in t&&A(t["@context"])&&(t=t["@context"]);var a=A(t)?t:[t];if(0===a.length)return e.clone();for(var o=e,i=0;i<a.length;++i){var l=a[i];if(null!==l){if(T(l)&&"@context"in l&&(l=l["@context"]),!T(l))throw new Se("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:l});if(n.cache.activeCtx){var u=n.cache.activeCtx.get(e,l);if(u){o=e=u;continue}}e=o,o=o.clone();var s={};if("@base"in l){var c=l["@base"];if(null===c)c=null;else{if(!J(c))throw new Se('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:l});if(""!==c&&!$(c))throw new Se('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:l})}null!==c&&(c=n.url.parse(c||"")),o["@base"]=c,s["@base"]=!0}if("@vocab"in l){var d=l["@vocab"];if(null===d)delete o["@vocab"];else{if(!J(d))throw new Se('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});if(!$(d))throw new Se('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});o["@vocab"]=d}s["@vocab"]=!0}if("@language"in l){var d=l["@language"];if(null===d)delete o["@language"];else{if(!J(d))throw new Se('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:l});o["@language"]=d.toLowerCase()}s["@language"]=!0}for(var f in l)S(o,l,f,s);n.cache.activeCtx&&n.cache.activeCtx.set(e,l,o)}else o=e=R(r)}return o};var Ne=function(){var e={subject:"s",object:"o",name:"g"},t=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new re("_:c14n"),this.quads=[],this.schedule={},"maxCallStackDepth"in e?this.schedule.MAX_DEPTH=e.maxCallStackDepth:this.schedule.MAX_DEPTH=500,"maxTotalCallStackDepth"in e?this.schedule.MAX_TOTAL_DEPTH=e.maxCallStackDepth:this.schedule.MAX_TOTAL_DEPTH=4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,"timeSlice"in e?this.schedule.timeSlice=e.timeSlice:this.schedule.timeSlice=10};return t.prototype.doWork=function(e,t){
var r=this.schedule;return r.totalDepth>=r.MAX_TOTAL_DEPTH?t(new Error("Maximum total call stack depth exceeded; normalization aborting.")):void function a(){if(r.depth===r.MAX_DEPTH)return r.depth=0,r.running=!1,n.nextTick(a);var o=(new Date).getTime();return r.running||(r.start=(new Date).getTime(),r.deadline=r.start+r.timeSlice),o<r.deadline?(r.running=!0,r.depth++,r.totalDepth++,e(function(e,n){r.depth--,r.totalDepth--,t(e,n)})):(r.depth=0,r.running=!1,void n.setImmediate(a))}()},t.prototype.forEach=function(e,t,n){var r,a,o=this,i=0;if(A(e))a=e.length,r=function(){return i===a?!1:(r.value=e[i++],r.key=i,!0)};else{var l=Object.keys(e);a=l.length,r=function(){return i===a?!1:(r.key=l[i++],r.value=e[r.key],!0)}}!function u(e,a){return e?n(e):r()?o.doWork(function(){t(r.value,r.key,u)}):void n()}()},t.prototype.waterfall=function(e,t){var n=this;n.forEach(e,function(e,t,r){n.doWork(e,r)},t)},t.prototype.whilst=function(e,t,n){var r=this;!function a(o){return o?n(o):e()?void r.doWork(t,a):n()}()},t.prototype.main=function(e,t){var n=this;n.schedule.start=(new Date).getTime();var r;if(n.options.format&&"application/nquads"!==n.options.format)return t(new Se("Unknown output format.","jsonld.UnknownFormat",{format:n.options.format}));var a={};n.waterfall([function(t){n.forEach(e,function(e,t,r){"@default"===t&&(t=null),n.forEach(e,function(e,r,o){null!==t&&(0===t.indexOf("_:")?e.name={type:"blank node",value:t}:e.name={type:"IRI",value:t}),n.quads.push(e),n.forEachComponent(e,function(t){if("blank node"===t.type){var r=t.value;r in n.blankNodeInfo?n.blankNodeInfo[r].quads.push(e):(a[r]=!0,n.blankNodeInfo[r]={quads:[e]})}}),o()},r)},t)},function(e){var t=!0;n.whilst(function(){return t},function(e){t=!1,n.hashToBlankNodes={},n.waterfall([function(e){n.forEach(a,function(e,t,r){n.hashFirstDegreeQuads(t,function(e,a){return e?r(e):(a in n.hashToBlankNodes?n.hashToBlankNodes[a].push(t):n.hashToBlankNodes[a]=[t],void r())})},e)},function(e){var r=Object.keys(n.hashToBlankNodes).sort();n.forEach(r,function(e,r,o){var i=n.hashToBlankNodes[e];if(i.length>1)return o();var l=i[0];n.canonicalIssuer.getId(l),delete a[l],delete n.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(n.hashToBlankNodes).sort();n.forEach(t,function(e,t,r){var a=[],o=n.hashToBlankNodes[e];n.waterfall([function(e){n.forEach(o,function(e,t,r){if(n.canonicalIssuer.hasId(e))return r();var o=new re("_:b");o.getId(e),n.hashNDegreeQuads(e,o,function(e,t){return e?r(e):(a.push(t),void r())})},e)},function(e){a.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),n.forEach(a,function(e,t,r){for(var a in e.issuer.existing)n.canonicalIssuer.getId(a);r()},e)}],r)},e)},function(e){var t=[];n.waterfall([function(e){n.forEach(n.quads,function(e,r,a){n.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(n.canonicalIssuer.prefix)&&(e.value=n.canonicalIssuer.getId(e.value))}),t.push(te(e)),a()},e)},function(e){return t.sort(),"application/nquads"===n.options.format?(r=t.join(""),e()):(r=K(t.join("")),void e())}],e)}],function(e){t(e,r)})},t.prototype.hashFirstDegreeQuads=function(e,t){var n=this,r=n.blankNodeInfo[e];if("hash"in r)return t(null,r.hash);var a=[],o=r.quads;n.forEach(o,function(t,r,o){var i={predicate:t.predicate};n.forEachComponent(t,function(t,r){i[r]=n.modifyFirstDegreeComponent(e,t,r)}),a.push(te(i)),o()},function(e){return e?t(e):(a.sort(),r.hash=_e.hashNQuads(n.name,a),void t(null,r.hash))})},t.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:(t=W(t),t.value=t.value===e?"_:a":"_:z",t)},t.prototype.hashRelatedBlankNode=function(e,t,n,r,a){var o,i=this;i.waterfall([function(t){return i.canonicalIssuer.hasId(e)?(o=i.canonicalIssuer.getId(e),t()):n.hasId(e)?(o=n.getId(e),t()):void i.hashFirstDegreeQuads(e,function(e,n){return e?t(e):(o=n,void t())})}],function(e){if(e)return a(e);var n=new _e(i.name);return n.update(r),"g"!==r&&n.update(i.getRelatedPredicate(t)),n.update(o),a(null,n.digest())})},t.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},t.prototype.hashNDegreeQuads=function(e,t,n){var r,a=this,o=new _e(a.name);a.waterfall([function(n){a.createHashToRelated(e,t,function(e,t){return e?n(e):(r=t,void n())})},function(e){var n=Object.keys(r).sort();a.forEach(n,function(e,n,i){o.update(e);var l,u="",s=new Re(r[e]);a.whilst(function(){return s.hasNext()},function(e){var n=s.next(),r=t.clone(),o="",i=[];a.waterfall([function(t){a.forEach(n,function(t,n,l){return a.canonicalIssuer.hasId(t)?o+=a.canonicalIssuer.getId(t):(r.hasId(t)||i.push(t),o+=r.getId(t)),0!==u.length&&o.length>=u.length&&o>u?e():void l()},t)},function(t){a.forEach(i,function(t,n,i){a.hashNDegreeQuads(t,r,function(n,a){return n?i(n):(o+=r.getId(t),o+="<"+a.hash+">",r=a.issuer,0!==u.length&&o.length>=u.length&&o>u?e():void i())})},t)},function(e){(0===u.length||u>o)&&(u=o,l=r),e()}],e)},function(e){return e?i(e):(o.update(u),t=l,void i())})},e)}],function(e){n(e,{hash:o.digest(),issuer:t})})},t.prototype.createHashToRelated=function(t,n,r){var a=this,o={},i=a.blankNodeInfo[t].quads;a.forEach(i,function(r,i,l){a.forEach(r,function(i,l,u){if("predicate"===l||"blank node"!==i.type||i.value===t)return u();var s=i.value,c=e[l];a.hashRelatedBlankNode(s,r,n,c,function(e,t){return e?u(e):(t in o?o[t].push(s):o[t]=[s],void u())})},l)},function(e){r(e,o)})},t.prototype.forEachComponent=function(e,t){for(var n in e)"predicate"!==n&&t(e[n],n,e)},t}(),Ce=function(){var e=function(e){Ne.call(this,e),this.name="URGNA2012"};return e.prototype=new Ne,e.prototype.modifyFirstDegreeComponent=function(e,t,n){return"blank node"!==t.type?t:(t=W(t),"name"===n?t.value="_:g":t.value=t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,n){var r=this,a={},o=r.blankNodeInfo[e].quads;r.forEach(o,function(n,o,i){var l,u;if("blank node"===n.subject.type&&n.subject.value!==e)u=n.subject.value,l="p";else{if("blank node"!==n.object.type||n.object.value===e)return i();u=n.object.value,l="r"}r.hashRelatedBlankNode(u,n,t,l,function(e,t){t in a?a[t].push(u):a[t]=[u],i()})},function(e){n(e,a)})},e}();Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),n.registerRDFParser("application/nquads",K),n.registerRDFParser("rdfa-api",ne),n.IdentifierIssuer=re,n.UniqueNamer=re,re.prototype.clone=function(){var e=new re(this.prefix);return e.counter=this.counter,e.existing=W(this.existing),e},re.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},re.prototype.getName=re.prototype.getName,re.prototype.hasId=function(e){return e in this.existing},re.prototype.isNamed=re.prototype.hasId;var Re=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};Re.prototype.hasNext=function(){return!this.done},Re.prototype.next=function(){for(var e=this.list.slice(),t=null,n=0,r=this.list.length,a=0;r>a;++a){var o=this.list[a],i=this.left[o];(null===t||o>t)&&(i&&a>0&&o>this.list[a-1]||!i&&r-1>a&&o>this.list[a+1])&&(t=o,n=a)}if(null===t)this.done=!0;else{var l=this.left[t]?n-1:n+1;this.list[n]=this.list[l],this.list[l]=t;for(var a=0;r>a;++a)this.list[a]>t&&(this.left[this.list[a]]=!this.left[this.list[a]])}return e};var _e=function(e){if(!(this instanceof _e))return new _e(e);if(-1===["URDNA2015","URGNA2012"].indexOf(e))throw new Error("Invalid RDF Dataset Normalization algorithm: "+e);_e._init.call(this,e)};if(_e.hashNQuads=function(e,t){for(var n=new _e(e),r=0;r<t.length;++r)n.update(t[r]);return n.digest()},function(e){if(e){var t=require("crypto");return _e._init=function(e){e="URDNA2015"===e?"sha256":"sha1",this.md=t.createHash(e)},_e.prototype.update=function(e){return this.md.update(e,"utf8")},void(_e.prototype.digest=function(){return this.md.digest("hex")})}_e._init=function(e){e="URDNA2015"===e?new a.Algorithm:new r.Algorithm,this.md=new n(e)},_e.prototype.update=function(e){return this.md.update(e)},_e.prototype.digest=function(){return this.md.digest().toHex()};var n=function(e){if(!(this instanceof n))return new n(e);if(this._algorithm=e,!n._padding||n._padding.length<this._algorithm.blockSize){n._padding=String.fromCharCode(128);for(var t=String.fromCharCode(0),r=64;r>0;)1&r&&(n._padding+=t),r>>>=1,r>0&&(t+=t)}this.start()};n.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var e=this._algorithm.messageLengthSize/4,t=0;e>t;++t)this.fullMessageLength.push(0);return this._input=new n.ByteBuffer,this.state=this._algorithm.start(),this},n.prototype.update=function(e){e=new n.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length();var t=e.length();t=[t/4294967296>>>0,t>>>0];for(var r=this.fullMessageLength.length-1;r>=0;--r)this.fullMessageLength[r]+=t[1],t[1]=t[0]+(this.fullMessageLength[r]/4294967296>>>0),this.fullMessageLength[r]=this.fullMessageLength[r]>>>0,t[0]=t[1]/4294967296>>>0;for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},n.prototype.digest=function(){var e=new n.ByteBuffer;e.putBytes(this._input.bytes());var t=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,r=t&this._algorithm.blockSize-1;e.putBytes(n._padding.substr(0,this._algorithm.blockSize-r));for(var a=new n.ByteBuffer,o=0;o<this.fullMessageLength.length;++o)a.putInt32(this.fullMessageLength[o]<<3|this.fullMessageLength[o+1]>>>28);this._algorithm.writeMessageLength(e,a);var i=this._algorithm.digest(this.state.copy(),e),l=new n.ByteBuffer;return i.write(l),l},n.ByteBuffer=function(e){"string"==typeof e?this.data=e:this.data="",this.read=0},n.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},n.ByteBuffer.prototype.putBytes=function(e){this.data+=e},n.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);16>n&&(e+="0"),e+=n.toString(16)}return e};var r={_w:null};r.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},r.Algorithm.prototype.start=function(){return r._w||(r._w=new Array(80)),r._createState()},r.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},r.Algorithm.prototype.digest=function(e,t){for(var n,a,o,i,l,u,s,c,d=t.length(),f=r._w;d>=64;){for(a=e.h0,o=e.h1,i=e.h2,l=e.h3,u=e.h4,c=0;16>c;++c)n=t.getInt32(),f[c]=n,s=l^o&(i^l),n=(a<<5|a>>>27)+s+u+1518500249+n,u=l,l=i,i=o<<30|o>>>2,o=a,a=n;for(;20>c;++c)n=f[c-3]^f[c-8]^f[c-14]^f[c-16],n=n<<1|n>>>31,f[c]=n,s=l^o&(i^l),n=(a<<5|a>>>27)+s+u+1518500249+n,u=l,l=i,i=o<<30|o>>>2,o=a,a=n;for(;32>c;++c)n=f[c-3]^f[c-8]^f[c-14]^f[c-16],n=n<<1|n>>>31,f[c]=n,s=o^i^l,n=(a<<5|a>>>27)+s+u+1859775393+n,u=l,l=i,i=o<<30|o>>>2,o=a,a=n;for(;40>c;++c)n=f[c-6]^f[c-16]^f[c-28]^f[c-32],n=n<<2|n>>>30,f[c]=n,s=o^i^l,n=(a<<5|a>>>27)+s+u+1859775393+n,u=l,l=i,i=o<<30|o>>>2,o=a,a=n;for(;60>c;++c)n=f[c-6]^f[c-16]^f[c-28]^f[c-32],n=n<<2|n>>>30,f[c]=n,s=o&i|l&(o^i),n=(a<<5|a>>>27)+s+u+2400959708+n,u=l,l=i,i=o<<30|o>>>2,o=a,a=n;for(;80>c;++c)n=f[c-6]^f[c-16]^f[c-28]^f[c-32],n=n<<2|n>>>30,f[c]=n,s=o^i^l,n=(a<<5|a>>>27)+s+u+3395469782+n,u=l,l=i,i=o<<30|o>>>2,o=a,a=n;e.h0=e.h0+a|0,e.h1=e.h1+o|0,e.h2=e.h2+i|0,e.h3=e.h3+l|0,e.h4=e.h4+u|0,d-=64}return e},r._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return e.copy=function(){var t=r._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)},e};var a={_k:null,_w:null};a.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},a.Algorithm.prototype.start=function(){return a._k||a._init(),a._createState()},a.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},a.Algorithm.prototype.digest=function(e,t){for(var n,r,o,i,l,u,s,c,d,f,p,h,v,g,y,m=t.length(),x=a._k,b=a._w;m>=64;){for(s=0;16>s;++s)b[s]=t.getInt32();for(;64>s;++s)n=b[s-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,r=b[s-15],r=(r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3,b[s]=n+b[s-7]+r+b[s-16]|0;for(c=e.h0,d=e.h1,f=e.h2,p=e.h3,h=e.h4,v=e.h5,g=e.h6,y=e.h7,s=0;64>s;++s)i=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),l=g^h&(v^g),o=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),u=c&d|f&(c^d),n=y+i+l+x[s]+b[s],r=o+u,y=g,g=v,v=h,h=p+n|0,p=f,f=d,d=c,c=n+r|0;e.h0=e.h0+c|0,e.h1=e.h1+d|0,e.h2=e.h2+f|0,e.h3=e.h3+p|0,e.h4=e.h4+h|0,e.h5=e.h5+v|0,e.h6=e.h6+g|0,e.h7=e.h7+y|0,m-=64}return e},a._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return e.copy=function(){var t=a._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)},e},a._init=function(){a._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a._w=new Array(64)}}(e),!ce)var Te=function(){ce=require("xmldom").XMLSerializer};if(n.url={},n.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},n.url.parse=function(e,t){for(var r={},a=n.url.parsers[t||"full"],o=a.regex.exec(e),i=a.keys.length;i--;)r[a.keys[i]]=void 0===o[i]?null:o[i];return r.normalizedPath=ae(r.path,!!r.authority),r},e?n.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&n.useDocumentLoader("xhr"),e){n.use=function(e){switch(e){case"request":n.request=require("jsonld-request");break;default:throw new Se("Unknown extension.","jsonld.UnknownExtension",{extension:e})}};var Ue={exports:{},filename:__dirname};require("pkginfo")(Ue,"version"),n.version=Ue.exports.version}return n},r=function(){return n(function(){return r()})};return!e&&"function"==typeof define&&define.amd?define([],function(){return n(r),r}):(n(r),"function"==typeof require&&"undefined"!=typeof module&&module.exports&&(module.exports=r),t&&("undefined"==typeof jsonld?jsonld=jsonldjs=r:jsonldjs=r)),r}();
//# sourceMappingURL=./jsonld.min.js.map