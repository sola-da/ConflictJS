!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.domainr=t()}}(function(){return function t(e,i,s){function n(a,o){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var i=e[a][1][t];return n(i?i:t)},h,h.exports,t,e,i,s)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,e,i){"use strict";function s(t,e){if(!e)throw new Error("[domainr] Missing callback");return c?void r(t,e):void a(t,e)}function n(){try{var t=window.XMLHttpRequest||window.ActiveXObject;return new t("MSXML2.XMLHTTP.3.0")}catch(e){return{}}}function r(t,e){var i=n();i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return void o.error("Error fetching data: "+i.responseText);var t;try{t=JSON.parse(i.responseText)}catch(s){return void o.error("Unable to parse data: "+i.responseText+"; "+s)}e(t)}},i.open("GET",t,!0),i.send()}function a(t,e){var i=document.createElement("script");i.async=!0;var s="_jsonp"+u++,n=setTimeout(function(){o.error("Timeout trying to retrieve "+t)},5e3);window[s]=function(t){clearTimeout(n),setTimeout(function(){var t=document.getElementById(s);t.parentNode.removeChild(t),window[s]=void 0;try{delete window[s]}catch(e){}},0),e(t)};var r=t.indexOf("?")>=0?"&":"?";i.setAttribute("src",t+r+"callback="+s),i.id=s;var a=document.head||document.getElementsByTagName("head")[0]||document.documentElement;a.insertBefore(i,a.firstChild)}var o=t("./util"),u=0,c=!1;"withCredentials"in n()&&(c=!0),e.exports={getJSON:s}},{"./util":6}],2:[function(t,e,i){"use strict";function s(t){if(t=t||{},this.clientId=t.clientId,this.mashapeKey=t.mashapeKey,!this.clientId&&!this.mashapeKey)throw new Error("[domainr] Missing mashapeKey or clientId");this.baseURL=t.baseURL||(this.clientId?"https://api.domainr.com/v2":"https://domainr.p.mashape.com/v2")}var n=t("./ajax"),r=t("./util");s.prototype={search:function(t,e){this._get("/search",this.searchParams(t),e)},searchParams:function(t){return r.extract(t,["query","registrar","location","defaults"])},status:function(t,e){if(!t)throw new Error("[domainr] domains array is required");r.uniq(t);var i={domain:t.join(",")};this._get("/status",i,e)},options:function(t,e){this._get("/options",{domain:t},e)},zones:function(t){this._get("/zones",{},t)},registerURL:function(t,e){var i=r.extract(e,["registrar"]);return i.domain=t,this._url("/register",i)},_get:function(t,e,i){var s=this.baseURL+t+"?"+r.qs(e||{},this._key());n.getJSON(s,i)},_url:function(t,e){return this.baseURL+t+"?"+r.qs(e||{},this._key())},_key:function(){return this.clientId?{client_id:this.clientId}:{"mashape-key":this.mashapeKey}}},e.exports=s},{"./ajax":1,"./util":6}],3:[function(t,e,i){"use strict";var s=t("./client"),n=t("./search-box");t("./jquery"),e.exports={Client:s,SearchBox:n}},{"./client":2,"./jquery":4,"./search-box":5}],4:[function(t,e,i){"use strict";var s=(t("./search-box"),t("./util"));if(window.jQuery){var n=window.jQuery;n.fn.domainrSearchBox=function(t){return this.each(function(e,i){var r=s.extract(t,["clientId","mashapeKey","renderWith","limit","registrar","defaults","onSelect"]);if(r.observe=i,t.renderTo){var a=n(t.renderTo);a.length>0&&(r.renderTo=a[0])}new domainr.SearchBox(r)}),this}}},{"./search-box":5,"./util":6}],5:[function(t,e,i){"use strict";function s(t){var e=t.results,i=e.length;if(0===i)return"";for(var s=['<div class="domainr-results">'],n=0;i>n;n++){var r=e[n],a=["domainr-result",r.status];t.selection===n&&a.push("selected"),s.push('<div class="'+a.join(" ")+'" data-domain="'+r.domain+'"><span class="domainr-result-domain"><span class="domainr-result-host">'+r.host+'</span><span class="domainr-result-subdomain">'+r.subdomain+'</span><span class="domainr-result-zone">'+r.zone+'</span></span><span class="domainr-result-path">'+r.path+"</span></div>")}return s.push("</div>"),s.join("")}function n(t,e,i,s){if(s){var n=i;i=function(){return n.apply(s,arguments)}}t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function r(t,e){t.classList?t.classList.add(e):t.className+=" "+e}var a=t("./client"),o=t("./util"),u=function(t){var e=this;if(t=t||{},!t.observe)throw new Error('[domainr] "observe" is required');this._client=new a(o.extract(t,["clientId","mashapeKey"])),this._state={query:"",results:[],limit:20,selection:-1},this._seq=0,this._last=0,this._cache={},this._listeners={},this._renderer=s,this._in=t.observe,n(this._in,"keyup",this._input,this),n(this._in,"input",this._input,this),n(this._in,"change",this._input,this),n(this._in,"keydown",this._keydown,this),void 0!==t.renderTo&&(this._out=t.renderTo,r(this._out,"domainr-results-container"),n(this._out,"click",this._click,this)),void 0!==t.renderWith&&(this._renderer=t.renderWith),void 0!==t.limit&&(this._state.limit=t.limit),void 0!==t.registrar&&(this._state.registrar=t.registrar),void 0!==t.defaults&&(this._state.defaults=t.defaults.join(",")),void 0!==t.onSelect?this._onSelect=t.onSelect:this._onSelect=function(t){e._in.value=t.domain,window.open(e._client.registerURL(t.domain))}};u.prototype={_input:function(){this._state.query!=this._in.value&&(this._state.query=this._in.value,this._search())},_keydown:function(t){t=t||window.event;var e=!1;38===t.keyCode?(e=!0,this._state.selection--,this._state.selection<0&&(this._state.selection=this._state.results.length-1),this._update()):40===t.keyCode?(e=!0,this._state.selection++,this._state.selection>=this._state.results.length&&(this._state.selection=0),this._update()):13===t.keyCode&&-1!==this._state.selection&&(e=!0,this._choose(this._state.results[this._state.selection])),e&&t.preventDefault&&t.preventDefault()},_click:function(t){t=t||window.event;for(var e=this._state.results,i=t.target||t.srcElement;i&&i!=document;i=i.parentNode){var s=i.getAttribute("data-domain");if(s)for(var n=0;n<e.length;n++){var r=e[n];if(r.domain==s)return void this._choose(r)}}},_render:function(){return this._out?(this._out.innerHTML=this._renderer(this._state),this):void 0},_search:function(){var t=this;this._state.selection=-1;var e=o.qs(this._client.searchParams(this._state)),i=this._cache[e];if(void 0!==i)return this._state.results=i.results,void this._update();var s=this._seq++;this._client.search(this._state,function(i){t._cache[e]=i,t._last>s||(t._last=s,t._state.results=i.results,t._update())})},_update:function(){this._limit(),this._status(),this._render()},_limit:function(){this._state.limit>=0&&this._state.results.length>this._state.limit&&(this._state.results.length=this._state.limit)},_status:function(){for(var t=this,e=[],i=10,s=this._state.results,n=0;n<s.length&&e.length<i;n++){var r=s[n];r.status=this._cache[r.domain+":status"]||r.status,r.status||(r.status="unknown",e.push(r.domain))}0!==e.length&&this._client.status(e,function(e){for(var i=e.status,s=0;s<i.length;s++){var n=i[s];t._cache[n.domain+":status"]=n.status}t._update()})},_choose:function(t){this._onSelect&&this._onSelect(t)}},e.exports=u},{"./client":2,"./util":6}],6:[function(t,e,i){"use strict";function s(t,e){var i={};if(t)for(var s=0;s<e.length;s++){var n=e[s];void 0!==t[n]&&(i[n]=t[n])}return i}function n(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];for(var s in i)t.push(o(s)+"="+o(i[s]))}return t.join("&")}function r(t){window.console&&window.console.error&&window.console.error("[domainr] "+t)}function a(t){if(t){var e,i;for(e=0;e<t.length;e++)for(i=e+1;i<t.length;i++)t[e]===t[i]&&(t.splice(i,1),i--)}}var o=encodeURIComponent;e.exports={euc:o,extract:s,qs:n,error:r,uniq:a}},{}]},{},[3])(3)});